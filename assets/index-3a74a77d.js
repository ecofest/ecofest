var wl=Object.defineProperty;var _l=(e,r,n)=>r in e?wl(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var ue=(e,r,n)=>(_l(e,typeof r!="symbol"?r+"":r,n),n);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function fr(e,r,n){return n.a=e,n.f=r,n}function d(e){return fr(2,e,function(r){return function(n){return e(r,n)}})}function P(e){return fr(3,e,function(r){return function(n){return function(t){return e(r,n,t)}}})}function ve(e){return fr(4,e,function(r){return function(n){return function(t){return function(a){return e(r,n,t,a)}}}})}function Qe(e){return fr(5,e,function(r){return function(n){return function(t){return function(a){return function(o){return e(r,n,t,a,o)}}}}})}function Nn(e){return fr(6,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return e(r,n,t,a,o,s)}}}}}})}function Ia(e){return fr(7,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return e(r,n,t,a,o,s,u)}}}}}}})}function Na(e){return fr(8,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return function(l){return e(r,n,t,a,o,s,u,l)}}}}}}}})}function Lo(e){return fr(9,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return function(l){return function(f){return e(r,n,t,a,o,s,u,l,f)}}}}}}}}})}function i(e,r,n){return e.a===2?e.f(r,n):e(r)(n)}function w(e,r,n,t){return e.a===3?e.f(r,n,t):e(r)(n)(t)}function ce(e,r,n,t,a){return e.a===4?e.f(r,n,t,a):e(r)(n)(t)(a)}function S(e,r,n,t,a,o){return e.a===5?e.f(r,n,t,a,o):e(r)(n)(t)(a)(o)}function mr(e,r,n,t,a,o,s){return e.a===6?e.f(r,n,t,a,o,s):e(r)(n)(t)(a)(o)(s)}function Fo(e,r,n,t,a,o,s,u){return e.a===7?e.f(r,n,t,a,o,s,u):e(r)(n)(t)(a)(o)(s)(u)}function yl(e,r,n,t,a,o,s,u,l){return e.a===8?e.f(r,n,t,a,o,s,u,l):e(r)(n)(t)(a)(o)(s)(u)(l)}function re(e,r){for(var n,t=[],a=ra(e,r,0,t);a&&(n=t.pop());a=ra(n.a,n.b,0,t));return a}function ra(e,r,n,t){if(e===r)return!0;if(typeof e!="object"||e===null||r===null)return typeof e=="function"&&Xr(5),!1;if(n>100)return t.push(c(e,r)),!0;e.$<0&&(e=Ur(e),r=Ur(r));for(var a in e)if(!ra(e[a],r[a],n+1,t))return!1;return!0}var xl=d(re),El=d(function(e,r){return!re(e,r)});function ae(e,r,n){if(typeof e!="object")return e===r?0:e<r?-1:1;if(typeof e.$>"u")return(n=ae(e.a,r.a))||(n=ae(e.b,r.b))?n:ae(e.c,r.c);for(;e.b&&r.b&&!(n=ae(e.a,r.a));e=e.b,r=r.b);return n||(e.b?1:r.b?-1:0)}d(function(e,r){return ae(e,r)<0});d(function(e,r){return ae(e,r)<1});d(function(e,r){return ae(e,r)>0});d(function(e,r){return ae(e,r)>=0});var jl=d(function(e,r){var n=ae(e,r);return n<0?cs:n?Om:ls}),Yr=0;function c(e,r){return{a:e,b:r}}function Te(e,r,n){return{a:e,b:r,c:n}}function T(e,r){var n={};for(var t in e)n[t]=e[t];for(var t in r)n[t]=r[t];return n}d(Z);function Z(e,r){if(typeof e=="string")return e+r;if(!e.b)return r;var n=We(e.a,r);e=e.b;for(var t=n;e.b;e=e.b)t=t.b=We(e.a,r);return n}var _={$:0};function We(e,r){return{$:1,a:e,b:r}}var Cl=d(We);function b(e){for(var r=_,n=e.length;n--;)r=We(e[n],r);return r}function Ra(e){for(var r=[];e.b;e=e.b)r.push(e.a);return r}var Ml=P(function(e,r,n){for(var t=[];r.b&&n.b;r=r.b,n=n.b)t.push(i(e,r.a,n.a));return b(t)});ve(function(e,r,n,t){for(var a=[];r.b&&n.b&&t.b;r=r.b,n=n.b,t=t.b)a.push(w(e,r.a,n.a,t.a));return b(a)});Qe(function(e,r,n,t,a){for(var o=[];r.b&&n.b&&t.b&&a.b;r=r.b,n=n.b,t=t.b,a=a.b)o.push(ce(e,r.a,n.a,t.a,a.a));return b(o)});Nn(function(e,r,n,t,a,o){for(var s=[];r.b&&n.b&&t.b&&a.b&&o.b;r=r.b,n=n.b,t=t.b,a=a.b,o=o.b)s.push(S(e,r.a,n.a,t.a,a.a,o.a));return b(s)});var Al=d(function(e,r){return b(Ra(r).sort(function(n,t){return ae(e(n),e(t))}))});d(function(e,r){return b(Ra(r).sort(function(n,t){var a=i(e,n,t);return a===ls?0:a===cs?-1:1}))});var Pl=[];function Ol(e){return e.length}var Vl=P(function(e,r,n){for(var t=new Array(e),a=0;a<e;a++)t[a]=n(r+a);return t}),Sl=d(function(e,r){for(var n=new Array(e),t=0;t<e&&r.b;t++)n[t]=r.a,r=r.b;return n.length=t,c(n,r)});d(function(e,r){return r[e]});P(function(e,r,n){for(var t=n.length,a=new Array(t),o=0;o<t;o++)a[o]=n[o];return a[e]=r,a});d(function(e,r){for(var n=r.length,t=new Array(n+1),a=0;a<n;a++)t[a]=r[a];return t[n]=e,t});P(function(e,r,n){for(var t=n.length,a=0;a<t;a++)r=i(e,n[a],r);return r});var ql=P(function(e,r,n){for(var t=n.length-1;t>=0;t--)r=i(e,n[t],r);return r});d(function(e,r){for(var n=r.length,t=new Array(n),a=0;a<n;a++)t[a]=e(r[a]);return t});P(function(e,r,n){for(var t=n.length,a=new Array(t),o=0;o<t;o++)a[o]=i(e,r+o,n[o]);return a});P(function(e,r,n){return n.slice(e,r)});P(function(e,r,n){var t=r.length,a=e-t;a>n.length&&(a=n.length);for(var o=t+a,s=new Array(o),u=0;u<t;u++)s[u]=r[u];for(var u=0;u<a;u++)s[u+t]=n[u];return s});d(function(e,r){return r});d(function(e,r){return console.log(e+": "+Il()),r});function Il(e){return"<internals>"}function Xr(e){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}d(function(e,r){return e+r});d(function(e,r){return e-r});d(function(e,r){return e*r});d(function(e,r){return e/r});d(function(e,r){return e/r|0});d(Math.pow);d(function(e,r){return r%e});var Nl=d(function(e,r){var n=r%e;return e===0?Xr(11):n>0&&e<0||n<0&&e>0?n+e:n});d(Math.atan2);function Rl(e){return e===1/0||e===-1/0}var Tl=Math.ceil,Dl=Math.floor,Mi=Math.log,Bl=isNaN;function Ll(e){return!e}d(function(e,r){return e&&r});d(function(e,r){return e||r});d(function(e,r){return e!==r});var Fl=d(function(e,r){return e+r});function Ul(e){var r=e.charCodeAt(0);return isNaN(r)?y:O(55296<=r&&r<=56319?c(e[0]+e[1],e.slice(2)):c(e[0],e.slice(1)))}d(function(e,r){return e+r});function Hl(e){return e.length}d(function(e,r){for(var n=r.length,t=new Array(n),a=0;a<n;){var o=r.charCodeAt(a);if(55296<=o&&o<=56319){t[a]=e(r[a]+r[a+1]),a+=2;continue}t[a]=e(r[a]),a++}return t.join("")});var zl=d(function(e,r){for(var n=[],t=r.length,a=0;a<t;){var o=r[a],s=r.charCodeAt(a);a++,55296<=s&&s<=56319&&(o+=r[a],a++),e(o)&&n.push(o)}return n.join("")});function Jl(e){for(var r=e.length,n=new Array(r),t=0;t<r;){var a=e.charCodeAt(t);55296<=a&&a<=56319?(n[r-t]=e[t+1],t++,n[r-t]=e[t-1],t++):(n[r-t]=e[t],t++)}return n.join("")}P(function(e,r,n){for(var t=n.length,a=0;a<t;){var o=n[a],s=n.charCodeAt(a);a++,55296<=s&&s<=56319&&(o+=n[a],a++),r=i(e,o,r)}return r});var Wl=P(function(e,r,n){for(var t=n.length;t--;){var a=n[t],o=n.charCodeAt(t);56320<=o&&o<=57343&&(t--,a=n[t]+a),r=i(e,a,r)}return r}),Kl=d(function(e,r){return r.split(e)}),Ql=d(function(e,r){return r.join(e)}),Gl=P(function(e,r,n){return n.slice(e,r)});function Zl(e){return e.trim()}function Yl(e){return b(e.trim().split(/\s+/g))}function Xl(e){return b(e.split(/\r\n|\r|\n/g))}function ec(e){return e.toUpperCase()}function rc(e){return e.toLowerCase()}d(function(e,r){for(var n=r.length;n--;){var t=r[n],a=r.charCodeAt(n);if(56320<=a&&a<=57343&&(n--,t=r[n]+t),e(t))return!0}return!1});var nc=d(function(e,r){for(var n=r.length;n--;){var t=r[n],a=r.charCodeAt(n);if(56320<=a&&a<=57343&&(n--,t=r[n]+t),!e(t))return!1}return!0}),tc=d(function(e,r){return r.indexOf(e)>-1}),ac=d(function(e,r){return r.indexOf(e)===0});d(function(e,r){return r.length>=e.length&&r.lastIndexOf(e)===r.length-e.length});var ic=d(function(e,r){var n=e.length;if(n<1)return _;for(var t=0,a=[];(t=r.indexOf(e,t))>-1;)a.push(t),t=t+n;return b(a)});function Uo(e){return e+""}function oc(e){for(var r=0,n=e.charCodeAt(0),t=n==43||n==45?1:0,a=t;a<e.length;++a){var o=e.charCodeAt(a);if(o<48||57<o)return y;r=10*r+o-48}return a==t?y:O(n==45?-r:r)}function sc(e){if(e.length===0||/[\sxbo]/.test(e))return y;var r=+e;return r===r?O(r):y}function uc(e){var r=e.charCodeAt(0);return 55296<=r&&r<=56319?(r-55296)*1024+e.charCodeAt(1)-56320+65536:r}function lc(e){return e<0||1114111<e?"ï¿½":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320))}function cc(e){return{$:0,a:e}}function St(e){return{$:2,b:e}}var mc=St(function(e){return typeof e=="boolean"?$e(e):Je("a BOOL",e)}),pc=St(function(e){return typeof e=="number"?$e(e):Je("a FLOAT",e)}),fc=St(function(e){return $e(e)}),dc=St(function(e){return typeof e=="string"?$e(e):e instanceof String?$e(e+""):Je("a STRING",e)});function $c(e){return{$:3,b:e}}function vc(e){return{$:5,c:e}}var bc=d(function(e,r){return{$:6,d:e,b:r}}),hc=d(function(e,r){return{$:7,e,b:r}});function gc(e){return{$:8,b:e}}function dr(e,r){return{$:9,f:e,g:r}}var kc=d(function(e,r){return{$:10,b:r,h:e}});function wc(e){return{$:11,g:e}}var _c=d(function(e,r){return dr(e,[r])}),yc=P(function(e,r,n){return dr(e,[r,n])});ve(function(e,r,n,t){return dr(e,[r,n,t])});Qe(function(e,r,n,t,a){return dr(e,[r,n,t,a])});Nn(function(e,r,n,t,a,o){return dr(e,[r,n,t,a,o])});Ia(function(e,r,n,t,a,o,s){return dr(e,[r,n,t,a,o,s])});Na(function(e,r,n,t,a,o,s,u){return dr(e,[r,n,t,a,o,s,u])});Lo(function(e,r,n,t,a,o,s,u,l){return dr(e,[r,n,t,a,o,s,u,l])});d(function(e,r){try{var n=JSON.parse(r);return Ve(e,n)}catch(t){return we(i(Qa,"This is not valid JSON! "+t.message,r))}});var Ta=d(function(e,r){return Ve(e,r)});function Ve(e,r){switch(e.$){case 2:return e.b(r);case 5:return r===null?$e(e.c):Je("null",r);case 3:return Jn(r)?Ai(e.b,r,b):Je("a LIST",r);case 4:return Jn(r)?Ai(e.b,r,xc):Je("an ARRAY",r);case 6:var n=e.d;if(typeof r!="object"||r===null||!(n in r))return Je("an OBJECT with a field named `"+n+"`",r);var f=Ve(e.b,r[n]);return Re(f)?f:we(i(Ni,n,f.a));case 7:var t=e.e;if(!Jn(r))return Je("an ARRAY",r);if(t>=r.length)return Je("a LONGER array. Need index "+t+" but only see "+r.length+" entries",r);var f=Ve(e.b,r[t]);return Re(f)?f:we(i(ps,t,f.a));case 8:if(typeof r!="object"||r===null||Jn(r))return Je("an OBJECT",r);var a=_;for(var o in r)if(r.hasOwnProperty(o)){var f=Ve(e.b,r[o]);if(!Re(f))return we(i(Ni,o,f.a));a=We(c(o,f.a),a)}return $e(_e(a));case 9:for(var s=e.f,u=e.g,l=0;l<u.length;l++){var f=Ve(u[l],r);if(!Re(f))return f;s=s(f.a)}return $e(s);case 10:var f=Ve(e.b,r);return Re(f)?Ve(e.h(f.a),r):f;case 11:for(var p=_,m=e.g;m.b;m=m.b){var f=Ve(m.a,r);if(Re(f))return f;p=We(f.a,p)}return we(Vm(_e(p)));case 1:return we(i(Qa,e.a,r));case 0:return $e(e.a)}}function Ai(e,r,n){for(var t=r.length,a=new Array(t),o=0;o<t;o++){var s=Ve(e,r[o]);if(!Re(s))return we(i(ps,o,s.a));a[o]=s.a}return $e(n(a))}function Jn(e){return Array.isArray(e)||typeof FileList<"u"&&e instanceof FileList}function xc(e){return i(Xm,e.length,function(r){return e[r]})}function Je(e,r){return we(i(Qa,"Expecting "+e,r))}function Tr(e,r){if(e===r)return!0;if(e.$!==r.$)return!1;switch(e.$){case 0:case 1:return e.a===r.a;case 2:return e.b===r.b;case 5:return e.c===r.c;case 3:case 4:case 8:return Tr(e.b,r.b);case 6:return e.d===r.d&&Tr(e.b,r.b);case 7:return e.e===r.e&&Tr(e.b,r.b);case 9:return e.f===r.f&&Pi(e.g,r.g);case 10:return e.h===r.h&&Tr(e.b,r.b);case 11:return Pi(e.g,r.g)}}function Pi(e,r){var n=e.length;if(n!==r.length)return!1;for(var t=0;t<n;t++)if(!Tr(e[t],r[t]))return!1;return!0}var Ec=d(function(e,r){return JSON.stringify(r,null,e)+""});function Da(e){return e}function jc(){return[]}function Cc(){return{}}var Mc=P(function(e,r,n){return n[e]=r,n});function Ac(e){return d(function(r,n){return n.push(e(r)),n})}var Pc=null;function $r(e){return{$:0,a:e}}function Oc(e){return{$:1,a:e}}function Ge(e){return{$:2,b:e,c:null}}var na=d(function(e,r){return{$:3,b:e,d:r}});d(function(e,r){return{$:4,b:e,d:r}});function Vc(e){return{$:5,b:e}}var Sc=0;function Ba(e){var r={$:0,e:Sc++,f:e,g:null,h:[]};return La(r),r}function Ho(e){return Ge(function(r){r($r(Ba(e)))})}function zo(e,r){e.h.push(r),La(e)}var qc=d(function(e,r){return Ge(function(n){zo(e,r),n($r(Yr))})}),Jt=!1,Oi=[];function La(e){if(Oi.push(e),!Jt){for(Jt=!0;e=Oi.shift();)Ic(e);Jt=!1}}function Ic(e){for(;e.f;){var r=e.f.$;if(r===0||r===1){for(;e.g&&e.g.$!==r;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else if(r===2){e.f.c=e.f.b(function(n){e.f=n,La(e)});return}else if(r===5){if(e.h.length===0)return;e.f=e.f.b(e.h.shift())}else e.g={$:r===3?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}function Nc(e){return Ge(function(r){var n=setTimeout(function(){r($r(Yr))},e);return function(){clearTimeout(n)}})}ve(function(e,r,n,t){return Fa(r,t,e.dD,e.ek,e.d4,function(){return function(){}})});function Fa(e,r,n,t,a,o){var s=i(Ta,e,r?r.flags:void 0);Re(s)||Xr(2);var u={},l=n(s.a),f=l.a,p=o($,f),m=Rc(u,$);function $(v,g){var k=i(t,v,f);p(f=k.a,g),Si(u,k.b,a(f))}return Si(u,l.b,a(f)),m?{ports:m}:{}}var Ce={};function Rc(e,r){var n;for(var t in Ce){var a=Ce[t];a.a&&(n=n||{},n[t]=a.a(t,r)),e[t]=Dc(a,r)}return n}function Tc(e,r,n,t,a){return{b:e,c:r,d:n,e:t,f:a}}function Dc(e,r){var n={g:r,h:void 0},t=e.c,a=e.d,o=e.e,s=e.f;function u(l){return i(na,u,Vc(function(f){var p=f.a;return f.$===0?w(a,n,p,l):o&&s?ce(t,n,p.i,p.j,l):w(t,n,o?p.i:p.j,l)}))}return n.h=Ba(i(na,u,e.b))}var Bc=d(function(e,r){return Ge(function(n){e.g(r),n($r(Yr))})});d(function(e,r){return i(qc,e.h,{$:0,a:r})});function Ua(e){return function(r){return{$:1,k:e,l:r}}}function Jo(e){return{$:2,m:e}}d(function(e,r){return{$:3,n:e,o:r}});var Vi=[],Wt=!1;function Si(e,r,n){if(Vi.push({p:e,q:r,r:n}),!Wt){Wt=!0;for(var t;t=Vi.shift();)Lc(t.p,t.q,t.r);Wt=!1}}function Lc(e,r,n){var t={};lt(!0,r,t,null),lt(!1,n,t,null);for(var a in e)zo(e[a],{$:"fx",a:t[a]||{i:_,j:_}})}function lt(e,r,n,t){switch(r.$){case 1:var a=r.k,o=Fc(e,a,t,r.l);n[a]=Uc(e,o,n[a]);return;case 2:for(var s=r.m;s.b;s=s.b)lt(e,s.a,n,t);return;case 3:lt(e,r.o,n,{s:r.n,t});return}}function Fc(e,r,n,t){function a(s){for(var u=n;u;u=u.t)s=u.s(s);return s}var o=e?Ce[r].e:Ce[r].f;return i(o,a,t)}function Uc(e,r,n){return n=n||{i:_,j:_},e?n.i=We(r,n.i):n.j=We(r,n.j),n}function Wo(e){Ce[e]&&Xr(3)}function Ko(e,r){return Wo(e),Ce[e]={e:Hc,u:r,a:zc},Ua(e)}var Hc=d(function(e,r){return r});function zc(e){var r=[],n=Ce[e].u,t=Nc(0);Ce[e].b=t,Ce[e].c=P(function(s,u,l){for(;u.b;u=u.b)for(var f=r,p=n(u.a),m=0;m<f.length;m++)f[m](p);return t});function a(s){r.push(s)}function o(s){r=r.slice();var u=r.indexOf(s);u>=0&&r.splice(u,1)}return{subscribe:a,unsubscribe:o}}function Ha(e,r){return Wo(e),Ce[e]={f:Jc,u:r,a:Wc},Ua(e)}var Jc=d(function(e,r){return function(n){return e(r(n))}});function Wc(e,r){var n=_,t=Ce[e].u,a=$r(null);Ce[e].b=a,Ce[e].c=P(function(s,u,l){return n=u,a});function o(s){var u=i(Ta,t,s);Re(u)||Xr(4,e,u.a);for(var l=u.a,f=n;f.b;f=f.b)r(f.a(l))}return{send:o}}var ct,Pr=typeof document<"u"?document:{};function za(e,r){e.appendChild(r)}ve(function(e,r,n,t){var a=t.node;return a.parentNode.replaceChild(lr(e,function(){}),a),{}});function ta(e){return{$:0,a:e}}var Qo=d(function(e,r){return d(function(n,t){for(var a=[],o=0;t.b;t=t.b){var s=t.a;o+=s.b||0,a.push(s)}return o+=a.length,{$:1,c:r,d:Xo(n),e:a,f:e,b:o}})}),te=Qo(void 0),Kc=d(function(e,r){return d(function(n,t){for(var a=[],o=0;t.b;t=t.b){var s=t.a;o+=s.b.b||0,a.push(s)}return o+=a.length,{$:2,c:r,d:Xo(n),e:a,f:e,b:o}})});Kc(void 0);d(function(e,r){return{$:4,j:e,k:r,b:1+(r.b||0)}});function vr(e,r){return{$:5,l:e,m:r,k:void 0}}var Qc=d(function(e,r){return vr([e,r],function(){return e(r)})}),Gc=P(function(e,r,n){return vr([e,r,n],function(){return i(e,r,n)})});ve(function(e,r,n,t){return vr([e,r,n,t],function(){return w(e,r,n,t)})});Qe(function(e,r,n,t,a){return vr([e,r,n,t,a],function(){return ce(e,r,n,t,a)})});Nn(function(e,r,n,t,a,o){return vr([e,r,n,t,a,o],function(){return S(e,r,n,t,a,o)})});Ia(function(e,r,n,t,a,o,s){return vr([e,r,n,t,a,o,s],function(){return mr(e,r,n,t,a,o,s)})});Na(function(e,r,n,t,a,o,s,u){return vr([e,r,n,t,a,o,s,u],function(){return Fo(e,r,n,t,a,o,s,u)})});Lo(function(e,r,n,t,a,o,s,u,l){return vr([e,r,n,t,a,o,s,u,l],function(){return yl(e,r,n,t,a,o,s,u,l)})});var Go=d(function(e,r){return{$:"a0",n:e,o:r}}),Zc=d(function(e,r){return{$:"a1",n:e,o:r}}),Zo=d(function(e,r){return{$:"a2",n:e,o:r}}),nr=d(function(e,r){return{$:"a3",n:e,o:r}});P(function(e,r,n){return{$:"a4",n:r,o:{f:e,o:n}}});var Yc=/^script$/i,Xc=/^(on|formAction$)/i,em=/^\s*j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:/i,rm=/^\s*(j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:|d\s*a\s*t\s*a\s*:\s*t\s*e\s*x\s*t\s*\/\s*h\s*t\s*m\s*l\s*(,|;))/i;function nm(e){return Yc.test(e)?"p":e}function tm(e){return Xc.test(e)?"data-"+e:e}function am(e){return em.test(e)?"":e}function Yo(e){return rm.test(e)?"":e}d(function(e,r){return r.$==="a0"?i(Go,r.n,im(e,r.o)):r});function im(e,r){var n=Ga(r);return{$:r.$,a:n?w(xs,n<3?om:sm,Se(e),r.a):i(he,e,r.a)}}var om=d(function(e,r){return c(e(r.a),r.b)}),sm=d(function(e,r){return{af:e(r.af),bU:r.bU,bH:r.bH}});function Xo(e){for(var r={};e.b;e=e.b){var n=e.a,t=n.$,a=n.n,o=n.o;if(t==="a2"){a==="className"?qi(r,a,o):r[a]=o;continue}var s=r[t]||(r[t]={});t==="a3"&&a==="class"?qi(s,a,o):s[a]=o}return r}function qi(e,r,n){var t=e[r];e[r]=t?t+" "+n:n}function lr(e,r){var n=e.$;if(n===5)return lr(e.k||(e.k=e.m()),r);if(n===0)return Pr.createTextNode(e.a);if(n===4){for(var t=e.k,a=e.j;t.$===4;)typeof a!="object"?a=[a,t.j]:a.push(t.j),t=t.k;var o={j:a,p:r},s=lr(t,o);return s.elm_event_node_ref=o,s}if(n===3){var s=e.h(e.g);return aa(s,r,e.d),s}var s=e.f?Pr.createElementNS(e.f,e.c):Pr.createElement(e.c);ct&&e.c=="a"&&s.addEventListener("click",ct(s)),aa(s,r,e.d);for(var u=e.e,l=0;l<u.length;l++)za(s,lr(n===1?u[l]:u[l].b,r));return s}function aa(e,r,n){for(var t in n){var a=n[t];t==="a1"?um(e,a):t==="a0"?mm(e,r,a):t==="a3"?lm(e,a):t==="a4"?cm(e,a):(t!=="value"&&t!=="checked"||e[t]!==a)&&(e[t]=a)}}function um(e,r){var n=e.style;for(var t in r)n[t]=r[t]}function lm(e,r){for(var n in r){var t=r[n];typeof t<"u"?e.setAttribute(n,t):e.removeAttribute(n)}}function cm(e,r){for(var n in r){var t=r[n],a=t.f,o=t.o;typeof o<"u"?e.setAttributeNS(a,n,o):e.removeAttributeNS(a,n)}}function mm(e,r,n){var t=e.elmFs||(e.elmFs={});for(var a in n){var o=n[a],s=t[a];if(!o){e.removeEventListener(a,s),t[a]=void 0;continue}if(s){var u=s.q;if(u.$===o.$){s.q=o;continue}e.removeEventListener(a,s)}s=pm(r,o),e.addEventListener(a,s,Ja&&{passive:Ga(o)<2}),t[a]=s}}var Ja;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){Ja=!0}}))}catch{}function pm(e,r){function n(t){var a=n.q,o=Ve(a.a,t);if(Re(o)){for(var s=Ga(a),u=o.a,l=s?s<3?u.a:u.af:u,f=s==1?u.b:s==3&&u.bU,p=(f&&t.stopPropagation(),(s==2?u.b:s==3&&u.bH)&&t.preventDefault(),e),m,$;m=p.j;){if(typeof m=="function")l=m(l);else for(var $=m.length;$--;)l=m[$](l);p=p.p}p(l,f)}}return n.q=r,n}function fm(e,r){return e.$==r.$&&Tr(e.a,r.a)}function es(e,r){var n=[];return De(e,r,n,0),n}function ye(e,r,n,t){var a={$:r,r:n,s:t,t:void 0,u:void 0};return e.push(a),a}function De(e,r,n,t){if(e!==r){var a=e.$,o=r.$;if(a!==o)if(a===1&&o===2)r=wm(r),o=1;else{ye(n,0,t,r);return}switch(o){case 5:for(var s=e.l,u=r.l,l=s.length,f=l===u.length;f&&l--;)f=s[l]===u[l];if(f){r.k=e.k;return}r.k=r.m();var p=[];De(e.k,r.k,p,0),p.length>0&&ye(n,1,t,p);return;case 4:for(var m=e.j,$=r.j,v=!1,g=e.k;g.$===4;)v=!0,typeof m!="object"?m=[m,g.j]:m.push(g.j),g=g.k;for(var k=r.k;k.$===4;)v=!0,typeof $!="object"?$=[$,k.j]:$.push(k.j),k=k.k;if(v&&m.length!==$.length){ye(n,0,t,r);return}(v?!dm(m,$):m!==$)&&ye(n,2,t,$),De(g,k,n,t+1);return;case 0:e.a!==r.a&&ye(n,3,t,r.a);return;case 1:Ii(e,r,n,t,$m);return;case 2:Ii(e,r,n,t,vm);return;case 3:if(e.h!==r.h){ye(n,0,t,r);return}var E=Wa(e.d,r.d);E&&ye(n,4,t,E);var C=r.i(e.g,r.g);C&&ye(n,5,t,C);return}}}function dm(e,r){for(var n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function Ii(e,r,n,t,a){if(e.c!==r.c||e.f!==r.f){ye(n,0,t,r);return}var o=Wa(e.d,r.d);o&&ye(n,4,t,o),a(e,r,n,t)}function Wa(e,r,n){var t;for(var a in e){if(a==="a1"||a==="a0"||a==="a3"||a==="a4"){var o=Wa(e[a],r[a]||{},a);o&&(t=t||{},t[a]=o);continue}if(!(a in r)){t=t||{},t[a]=n?n==="a1"?"":n==="a0"||n==="a3"?void 0:{f:e[a].f,o:void 0}:typeof e[a]=="string"?"":null;continue}var s=e[a],u=r[a];s===u&&a!=="value"&&a!=="checked"||n==="a0"&&fm(s,u)||(t=t||{},t[a]=u)}for(var l in r)l in e||(t=t||{},t[l]=r[l]);return t}function $m(e,r,n,t){var a=e.e,o=r.e,s=a.length,u=o.length;s>u?ye(n,6,t,{v:u,i:s-u}):s<u&&ye(n,7,t,{v:s,e:o});for(var l=s<u?s:u,f=0;f<l;f++){var p=a[f];De(p,o[f],n,++t),t+=p.b||0}}function vm(e,r,n,t){for(var a=[],o={},s=[],u=e.e,l=r.e,f=u.length,p=l.length,m=0,$=0,v=t;m<f&&$<p;){var g=u[m],k=l[$],E=g.a,C=k.a,A=g.b,D=k.b,G=void 0,je=void 0;if(E===C){v++,De(A,D,a,v),v+=A.b||0,m++,$++;continue}var ge=u[m+1],tr=l[$+1];if(ge){var me=ge.a,ar=ge.b;je=C===me}if(tr){var Hn=tr.a,_r=tr.b;G=E===Hn}if(G&&je){v++,De(A,_r,a,v),mn(o,a,E,D,$,s),v+=A.b||0,v++,pn(o,a,E,ar,v),v+=ar.b||0,m+=2,$+=2;continue}if(G){v++,mn(o,a,C,D,$,s),De(A,_r,a,v),v+=A.b||0,m+=1,$+=2;continue}if(je){v++,pn(o,a,E,A,v),v+=A.b||0,v++,De(ar,D,a,v),v+=ar.b||0,m+=2,$+=1;continue}if(ge&&me===Hn){v++,pn(o,a,E,A,v),mn(o,a,C,D,$,s),v+=A.b||0,v++,De(ar,_r,a,v),v+=ar.b||0,m+=2,$+=2;continue}break}for(;m<f;){v++;var g=u[m],A=g.b;pn(o,a,g.a,A,v),v+=A.b||0,m++}for(;$<p;){var h=h||[],k=l[$];mn(o,a,k.a,k.b,void 0,h),$++}(a.length>0||s.length>0||h)&&ye(n,8,t,{w:a,x:s,y:h})}var rs="_elmW6BL";function mn(e,r,n,t,a,o){var s=e[n];if(!s){s={c:0,z:t,r:a,s:void 0},o.push({r:a,A:s}),e[n]=s;return}if(s.c===1){o.push({r:a,A:s}),s.c=2;var u=[];De(s.z,t,u,s.r),s.r=a,s.s.s={w:u,A:s};return}mn(e,r,n+rs,t,a,o)}function pn(e,r,n,t,a){var o=e[n];if(!o){var s=ye(r,9,a,void 0);e[n]={c:1,z:t,r:a,s};return}if(o.c===0){o.c=2;var u=[];De(t,o.z,u,a),ye(r,9,a,{w:u,A:o});return}pn(e,r,n+rs,t,a)}function ns(e,r,n,t){fn(e,r,n,0,0,r.b,t)}function fn(e,r,n,t,a,o,s){for(var u=n[t],l=u.r;l===a;){var f=u.$;if(f===1)ns(e,r.k,u.s,s);else if(f===8){u.t=e,u.u=s;var p=u.s.w;p.length>0&&fn(e,r,p,0,a,o,s)}else if(f===9){u.t=e,u.u=s;var m=u.s;if(m){m.A.s=e;var p=m.w;p.length>0&&fn(e,r,p,0,a,o,s)}}else u.t=e,u.u=s;if(t++,!(u=n[t])||(l=u.r)>o)return t}var $=r.$;if($===4){for(var v=r.k;v.$===4;)v=v.k;return fn(e,v,n,t,a+1,o,e.elm_event_node_ref)}for(var g=r.e,k=e.childNodes,E=0;E<g.length;E++){a++;var C=$===1?g[E]:g[E].b,A=a+(C.b||0);if(a<=l&&l<=A&&(t=fn(k[E],C,n,t,a,A,s),!(u=n[t])||(l=u.r)>o))return t;a=A}return t}function ts(e,r,n,t){return n.length===0?e:(ns(e,r,n,t),mt(e,n))}function mt(e,r){for(var n=0;n<r.length;n++){var t=r[n],a=t.t,o=bm(a,t);a===e&&(e=o)}return e}function bm(e,r){switch(r.$){case 0:return hm(e,r.s,r.u);case 4:return aa(e,r.u,r.s),e;case 3:return e.replaceData(0,e.length,r.s),e;case 1:return mt(e,r.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=r.s:e.elm_event_node_ref={j:r.s,p:r.u},e;case 6:for(var o=r.s,t=0;t<o.i;t++)e.removeChild(e.childNodes[o.v]);return e;case 7:for(var o=r.s,n=o.e,t=o.v,a=e.childNodes[t];t<n.length;t++)e.insertBefore(lr(n[t],r.u),a);return e;case 9:var o=r.s;if(!o)return e.parentNode.removeChild(e),e;var s=o.A;return typeof s.r<"u"&&e.parentNode.removeChild(e),s.s=mt(e,o.w),e;case 8:return gm(e,r);case 5:return r.s(e);default:Xr(10)}}function hm(e,r,n){var t=e.parentNode,a=lr(r,n);return a.elm_event_node_ref||(a.elm_event_node_ref=e.elm_event_node_ref),t&&a!==e&&t.replaceChild(a,e),a}function gm(e,r){var n=r.s,t=km(n.y,r);e=mt(e,n.w);for(var a=n.x,o=0;o<a.length;o++){var s=a[o],u=s.A,l=u.c===2?u.s:lr(u.z,r.u);e.insertBefore(l,e.childNodes[s.r])}return t&&za(e,t),e}function km(e,r){if(e){for(var n=Pr.createDocumentFragment(),t=0;t<e.length;t++){var a=e[t],o=a.A;za(n,o.c===2?o.s:lr(o.z,r.u))}return n}}function Ka(e){if(e.nodeType===3)return ta(e.textContent);if(e.nodeType!==1)return ta("");for(var r=_,n=e.attributes,t=n.length;t--;){var a=n[t],o=a.name,s=a.value;r=We(i(nr,o,s),r)}for(var u=e.tagName.toLowerCase(),l=_,f=e.childNodes,t=f.length;t--;)l=We(Ka(f[t]),l);return w(te,u,r,l)}function wm(e){for(var r=e.e,n=r.length,t=new Array(n),a=0;a<n;a++)t[a]=r[a].b;return{$:1,c:e.c,d:e.d,e:t,f:e.f,b:e.b}}var _m=ve(function(e,r,n,t){return Fa(r,t,e.dD,e.ek,e.d4,function(a,o){var s=e.em,u=t.node,l=Ka(u);return as(o,function(f){var p=s(f),m=es(l,p);u=ts(u,l,m,a),l=p})})});ve(function(e,r,n,t){return Fa(r,t,e.dD,e.ek,e.d4,function(a,o){var s=e.bM&&e.bM(a),u=e.em,l=Pr.title,f=Pr.body,p=Ka(f);return as(o,function(m){ct=s;var $=u(m),v=te("body")(_)($.db),g=es(p,v);f=ts(f,p,g,a),p=v,ct=0,l!==$.cU&&(Pr.title=l=$.cU)})})});var pt=typeof requestAnimationFrame<"u"?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function as(e,r){r(e);var n=0;function t(){n=n===1?0:(pt(t),r(e),1)}return function(a,o){e=a,o?(r(e),n===2&&(n=1)):(n===0&&pt(t),n=2)}}d(function(e,r){return i(ei,Ya,Ge(function(){r&&history.go(r),e()}))});d(function(e,r){return i(ei,Ya,Ge(function(){history.pushState({},"",r),e()}))});d(function(e,r){return i(ei,Ya,Ge(function(){history.replaceState({},"",r),e()}))});var ym={addEventListener:function(){},removeEventListener:function(){}},xm=typeof window<"u"?window:ym;P(function(e,r,n){return Ho(Ge(function(t){function a(o){Ba(n(o))}return e.addEventListener(r,a,Ja&&{passive:!0}),function(){e.removeEventListener(r,a)}}))});d(function(e,r){var n=Ve(e,r);return Re(n)?O(n.a):y});function is(e,r){return Ge(function(n){pt(function(){var t=document.getElementById(e);n(t?$r(r(t)):Oc(ep(e)))})})}function Em(e){return Ge(function(r){pt(function(){r($r(e()))})})}d(function(e,r){return is(r,function(n){return n[e](),Yr})});d(function(e,r){return Em(function(){return xm.scroll(e,r),Yr})});P(function(e,r,n){return is(e,function(t){return t.scrollLeft=r,t.scrollTop=n,Yr})});var jm=/.^/,Cm=d(function(e,r){var n="g";e.dK&&(n+="m"),e.dd&&(n+="i");try{return O(new RegExp(r,n))}catch{return y}}),Mm=d(function(e,r){return r.match(e)!==null}),os=P(function(e,r,n){for(var t=[],a=0,o=n,s=r.lastIndex,u=-1,l;a++<e&&(l=r.exec(o))&&u!=r.lastIndex;){for(var f=l.length-1,p=new Array(f);f>0;){var m=l[f];p[--f]=m?O(m):y}t.push(ce(Fs,l[0],l.index,a,b(p))),u=r.lastIndex}return r.lastIndex=s,b(t)}),ss=ve(function(e,r,n,t){var a=0;function o(s){if(a++>=e)return s;for(var u=arguments.length-3,l=new Array(u);u>0;){var f=arguments[u];l[--u]=f?O(f):y}return n(ce(Fs,s,arguments[arguments.length-2],a,b(l)))}return t.replace(r,o)});P(function(e,r,n){for(var t=n,a=[],o=r.lastIndex,s=r.lastIndex;e--;){var u=r.exec(t);if(!u)break;a.push(t.slice(o,u.index)),o=r.lastIndex}return a.push(t.slice(o)),r.lastIndex=s,b(a)});var us=1/0;d(function(e,r){return e&r});d(function(e,r){return e|r});d(function(e,r){return e^r});d(function(e,r){return r<<e});d(function(e,r){return r>>e});d(function(e,r){return r>>>e});function Am(e){return encodeURIComponent(e)}function Pm(e){try{return O(decodeURIComponent(e))}catch{return y}}var ls=1,Om=2,cs=0,M=Cl,ms=P(function(e,r,n){e:for(;;){if(n.$===-2)return r;var t=n.b,a=n.c,o=n.d,s=n.e,u=e,l=w(e,t,a,w(ms,e,r,s)),f=o;e=u,r=l,n=f;continue e}}),Ur=function(e){return w(ms,P(function(r,n,t){return i(M,c(r,n),t)}),_,e)},Wn=ql;P(function(e,r,n){var t=n.c,a=n.d,o=d(function(s,u){if(s.$){var f=s.a;return w(Wn,e,u,f)}else{var l=s.a;return w(Wn,o,u,l)}});return w(Wn,o,w(Wn,e,r,a),t)});var we=function(e){return{$:1,a:e}},Qa=d(function(e,r){return{$:3,a:e,b:r}}),Ni=d(function(e,r){return{$:0,a:e,b:r}}),ps=d(function(e,r){return{$:1,a:e,b:r}}),$e=function(e){return{$:0,a:e}},Vm=function(e){return{$:2,a:e}},O=function(e){return{$:0,a:e}},y={$:1},fs=nc,Sm=Ec,jn=Uo,Mr=d(function(e,r){return i(Ql,e,Ra(r))}),Rn=d(function(e,r){return b(i(Kl,e,r))}),ds=function(e){return i(Mr,`
    `,i(Rn,`
`,e))},Ae=P(function(e,r,n){e:for(;;)if(n.b){var t=n.a,a=n.b,o=e,s=i(e,t,r),u=a;e=o,r=s,n=u;continue e}else return r}),$s=function(e){return w(Ae,d(function(r,n){return n+1}),0,e)},qm=Ml,Im=P(function(e,r,n){e:for(;;)if(ae(e,r)<1){var t=e,a=r-1,o=i(M,r,n);e=t,r=a,n=o;continue e}else return n}),Nm=d(function(e,r){return w(Im,e,r,_)}),Rm=d(function(e,r){return w(qm,e,i(Nm,0,$s(r)-1),r)}),en=uc,vs=function(e){var r=en(e);return 97<=r&&r<=122},bs=function(e){var r=en(e);return r<=90&&65<=r},Tm=function(e){return vs(e)||bs(e)},ft=function(e){var r=en(e);return r<=57&&48<=r},Dm=function(e){return vs(e)||bs(e)||ft(e)},_e=function(e){return w(Ae,M,_,e)},rn=Ul,Bm=d(function(e,r){return`

(`+(jn(e+1)+(") "+ds(hs(r))))}),hs=function(e){return i(Lm,e,_)},Lm=d(function(e,r){e:for(;;)switch(e.$){case 0:var n=e.a,s=e.b,t=function(){var k=rn(n);if(k.$===1)return!1;var E=k.a,C=E.a,A=E.b;return Tm(C)&&i(fs,Dm,A)}(),a=t?"."+n:"['"+(n+"']"),l=s,f=i(M,a,r);e=l,r=f;continue e;case 1:var o=e.a,s=e.b,u="["+(jn(o)+"]"),l=s,f=i(M,u,r);e=l,r=f;continue e;case 2:var p=e.a;if(p.b)if(p.b.b){var m=function(){return r.b?"The Json.Decode.oneOf at json"+i(Mr,"",_e(r)):"Json.Decode.oneOf"}(),g=m+(" failed in the following "+(jn($s(p))+" ways:"));return i(Mr,`

`,i(M,g,i(Rm,Bm,p)))}else{var s=p.a,l=s,f=r;e=l,r=f;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return r.b?" at json"+i(Mr,"",_e(r)):"!"}();default:var $=e.a,v=e.b,g=function(){return r.b?"Problem with the value at json"+(i(Mr,"",_e(r))+`:

    `):`Problem with the given value:

`}();return g+(ds(i(Sm,4,v))+(`

`+$))}}),Fe=32,ia=ve(function(e,r,n,t){return{$:0,a:e,b:r,c:n,d:t}}),oa=Pl,gs=Tl,ks=d(function(e,r){return Mi(r)/Mi(e)}),sa=gs(i(ks,2,Fe)),Fm=ce(ia,0,sa,oa,oa),ws=Vl,Um=function(e){return{$:1,a:e}};d(function(e,r){return e(r)});var Hm=d(function(e,r){return r(e)}),zm=xl,Jm=Dl,Ri=Ol,_s=d(function(e,r){return ae(e,r)>0?e:r}),Wm=function(e){return{$:0,a:e}},ys=Sl,Km=d(function(e,r){e:for(;;){var n=i(ys,Fe,e),t=n.a,a=n.b,o=i(M,Wm(t),r);if(a.b){var s=a,u=o;e=s,r=u;continue e}else return _e(o)}}),Qm=function(e){var r=e.a;return r},Gm=d(function(e,r){e:for(;;){var n=gs(r/Fe);if(n===1)return i(ys,Fe,e).a;var t=i(Km,e,_),a=n;e=t,r=a;continue e}}),Zm=d(function(e,r){if(r.s){var n=r.s*Fe,t=Jm(i(ks,Fe,n-1)),a=e?_e(r.y):r.y,o=i(Gm,a,r.s);return ce(ia,Ri(r.x)+n,i(_s,5,t*sa),o,r.x)}else return ce(ia,Ri(r.x),sa,oa,r.x)}),Ym=Qe(function(e,r,n,t,a){e:for(;;){if(r<0)return i(Zm,!1,{y:t,s:n/Fe|0,x:a});var o=Um(w(ws,Fe,r,e)),s=e,u=r-Fe,l=n,f=i(M,o,t),p=a;e=s,r=u,n=l,t=f,a=p;continue e}}),Xm=d(function(e,r){if(e<=0)return Fm;var n=e%Fe,t=w(ws,n,e-n,r),a=e-n-Fe;return S(Ym,r,a,e,_,t)}),Re=function(e){return!e.$},he=_c,xs=yc,Se=cc,Ga=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},Za=function(e){return e},ep=Za,Ti=Nn(function(e,r,n,t,a,o){return{cd:o,ch:r,cx:t,cz:n,cG:e,cH:a}}),rp=tc,J=Hl,Be=Gl,br=d(function(e,r){return e<1?r:w(Be,e,J(r),r)}),qt=ic,hr=function(e){return e===""},qr=d(function(e,r){return e<1?"":w(Be,0,e,r)}),It=oc,Di=Qe(function(e,r,n,t,a){if(hr(a)||i(rp,"@",a))return y;var o=i(qt,":",a);if(o.b){if(o.b.b)return y;var s=o.a,u=It(i(br,s+1,a));if(u.$===1)return y;var l=u;return O(mr(Ti,e,i(qr,s,a),l,r,n,t))}else return O(mr(Ti,e,a,y,r,n,t))}),Bi=ve(function(e,r,n,t){if(hr(t))return y;var a=i(qt,"/",t);if(a.b){var o=a.a;return S(Di,e,i(br,o,t),r,n,i(qr,o,t))}else return S(Di,e,"/",r,n,t)}),Li=P(function(e,r,n){if(hr(n))return y;var t=i(qt,"?",n);if(t.b){var a=t.a;return ce(Bi,e,O(i(br,a+1,n)),r,i(qr,a,n))}else return ce(Bi,e,y,r,n)});d(function(e,r){if(hr(r))return y;var n=i(qt,"#",r);if(n.b){var t=n.a;return w(Li,e,O(i(br,t+1,r)),i(qr,t,r))}else return w(Li,e,y,r)});var Es=ac,Ya=function(e){},Tn=$r,np=Tn(0),js=ve(function(e,r,n,t){if(t.b){var a=t.a,o=t.b;if(o.b){var s=o.a,u=o.b;if(u.b){var l=u.a,f=u.b;if(f.b){var p=f.a,m=f.b,$=n>500?w(Ae,e,r,_e(m)):ce(js,e,r,n+1,m);return i(e,a,i(e,s,i(e,l,i(e,p,$))))}else return i(e,a,i(e,s,i(e,l,r)))}else return i(e,a,i(e,s,r))}else return i(e,a,r)}else return r}),Ir=P(function(e,r,n){return ce(js,e,r,0,n)}),ne=d(function(e,r){return w(Ir,d(function(n,t){return i(M,e(n),t)}),_,r)}),dt=na,Xa=d(function(e,r){return i(dt,function(n){return Tn(e(n))},r)}),tp=P(function(e,r,n){return i(dt,function(t){return i(dt,function(a){return Tn(i(e,t,a))},n)},r)}),ap=function(e){return w(Ir,tp(M),Tn(_),e)},ip=Bc,op=d(function(e,r){var n=r;return Ho(i(dt,ip(e),n))}),sp=P(function(e,r,n){return i(Xa,function(t){return 0},ap(i(ne,op(e),r)))}),up=P(function(e,r,n){return Tn(0)}),lp=d(function(e,r){var n=r;return i(Xa,e,n)});Ce.Task=Tc(np,sp,up,lp);var cp=Ua("Task"),ei=d(function(e,r){return cp(i(Xa,e,r))}),mp=_m,$t=Ta,er={$:-2},ur=er,Fi={aI:_,av:y,aw:y,U:ur,a8:ur,Q:ur,aP:ur},pp=d(function(e,r){return w(Ae,Ac(e),jc(),r)}),hn=Da,Cs=Ko("evaluateAll",pp(hn)),fp=function(e){return b(["informations","alimentation","transport","infrastructures","hÃ©bergement","Ã©nergie","communication"])},dp=P(function(e,r,n){var t=e(r);if(t.$)return n;var a=t.a;return i(M,a,n)}),Me=d(function(e,r){return w(Ir,dp(e),_,r)}),I=d(function(e,r){if(r.$)return y;var n=r.a;return O(e(n))}),ri=d(function(e,r){e:for(;;)if(r.b){var n=r.a,t=r.b;if(e(n))return!0;var a=e,o=t;e=a,r=o;continue e}else return!1}),vt=d(function(e,r){return i(ri,function(n){return re(n,e)},r)}),ie=function(e){if(e.b){var r=e.a;return e.b,O(r)}else return y},Ms=function(e){return i(Rn," . ",e)},x=d(function(e,r){if(r.$)return e;var n=r.a;return n}),$p=function(e){return i(x,e,ie(Ms(e)))},As=jl,xe=d(function(e,r){e:for(;;){if(r.$===-2)return y;var n=r.b,t=r.c,a=r.d,o=r.e,s=i(As,e,n);switch(s){case 0:var u=e,l=a;e=u,r=l;continue e;case 1:return O(t);default:var u=e,l=o;e=u,r=l;continue e}}}),z=Qe(function(e,r,n,t,a){return{$:-1,a:e,b:r,c:n,d:t,e:a}}),Hr=Qe(function(e,r,n,t,a){if(a.$===-1&&!a.a){a.a;var o=a.b,s=a.c,u=a.d,l=a.e;if(t.$===-1&&!t.a){t.a;var f=t.b,p=t.c,m=t.d,$=t.e;return S(z,0,r,n,S(z,1,f,p,m,$),S(z,1,o,s,u,l))}else return S(z,e,o,s,S(z,0,r,n,t,u),l)}else if(t.$===-1&&!t.a&&t.d.$===-1&&!t.d.a){t.a;var f=t.b,p=t.c,v=t.d;v.a;var g=v.b,k=v.c,E=v.d,C=v.e,$=t.e;return S(z,0,f,p,S(z,1,g,k,E,C),S(z,1,r,n,$,a))}else return S(z,e,r,n,t,a)}),ua=P(function(e,r,n){if(n.$===-2)return S(z,0,e,r,er,er);var t=n.a,a=n.b,o=n.c,s=n.d,u=n.e,l=i(As,e,a);switch(l){case 0:return S(Hr,t,a,o,w(ua,e,r,s),u);case 1:return S(z,t,a,r,s,u);default:return S(Hr,t,a,o,s,w(ua,e,r,u))}}),nn=P(function(e,r,n){var t=w(ua,e,r,n);if(t.$===-1&&!t.a){t.a;var a=t.b,o=t.c,s=t.d,u=t.e;return S(z,1,a,o,s,u)}else{var l=t;return l}}),vp=function(e){e:for(;;)if(e.$===-1&&e.d.$===-1){var r=e.d,n=r;e=n;continue e}else return e},Ps=function(e){if(e.$===-1&&e.d.$===-1&&e.e.$===-1)if(e.e.d.$===-1&&!e.e.d.a){var r=e.a,n=e.b,t=e.c,a=e.d;a.a;var o=a.b,s=a.c,u=a.d,l=a.e,f=e.e;f.a;var p=f.b,m=f.c,$=f.d;$.a;var v=$.b,g=$.c,k=$.d,E=$.e,C=f.e;return S(z,0,v,g,S(z,1,n,t,S(z,0,o,s,u,l),k),S(z,1,p,m,E,C))}else{var r=e.a,n=e.b,t=e.c,A=e.d;A.a;var o=A.b,s=A.c,u=A.d,l=A.e,D=e.e;D.a;var p=D.b,m=D.c,$=D.d,C=D.e;return S(z,1,n,t,S(z,0,o,s,u,l),S(z,0,p,m,$,C))}else return e},Ui=function(e){if(e.$===-1&&e.d.$===-1&&e.e.$===-1)if(e.d.d.$===-1&&!e.d.d.a){var r=e.a,n=e.b,t=e.c,a=e.d;a.a;var o=a.b,s=a.c,u=a.d;u.a;var l=u.b,f=u.c,p=u.d,m=u.e,$=a.e,v=e.e;v.a;var g=v.b,k=v.c,E=v.d,C=v.e;return S(z,0,o,s,S(z,1,l,f,p,m),S(z,1,n,t,$,S(z,0,g,k,E,C)))}else{var r=e.a,n=e.b,t=e.c,A=e.d;A.a;var o=A.b,s=A.c,D=A.d,$=A.e,G=e.e;G.a;var g=G.b,k=G.c,E=G.d,C=G.e;return S(z,1,n,t,S(z,0,o,s,D,$),S(z,0,g,k,E,C))}else return e},bp=Ia(function(e,r,n,t,a,o,s){if(o.$===-1&&!o.a){o.a;var u=o.b,l=o.c,f=o.d,p=o.e;return S(z,n,u,l,f,S(z,0,t,a,p,s))}else{e:for(;;)if(s.$===-1&&s.a===1)if(s.d.$===-1)if(s.d.a===1){s.a;var m=s.d;return m.a,Ui(r)}else break e;else return s.a,s.d,Ui(r);else break e;return r}}),nt=function(e){if(e.$===-1&&e.d.$===-1){var r=e.a,n=e.b,t=e.c,a=e.d,o=a.a,s=a.d,u=e.e;if(o===1){if(s.$===-1&&!s.a)return s.a,S(z,r,n,t,nt(a),u);var l=Ps(e);if(l.$===-1){var f=l.a,p=l.b,m=l.c,$=l.d,v=l.e;return S(Hr,f,p,m,nt($),v)}else return er}else return S(z,r,n,t,nt(a),u)}else return er},gn=d(function(e,r){if(r.$===-2)return er;var n=r.a,t=r.b,a=r.c,o=r.d,s=r.e;if(ae(e,t)<0)if(o.$===-1&&o.a===1){o.a;var u=o.d;if(u.$===-1&&!u.a)return u.a,S(z,n,t,a,i(gn,e,o),s);var l=Ps(r);if(l.$===-1){var f=l.a,p=l.b,m=l.c,$=l.d,v=l.e;return S(Hr,f,p,m,i(gn,e,$),v)}else return er}else return S(z,n,t,a,i(gn,e,o),s);else return i(hp,e,Fo(bp,e,r,n,t,a,o,s))}),hp=d(function(e,r){if(r.$===-1){var n=r.a,t=r.b,a=r.c,o=r.d,s=r.e;if(re(e,t)){var u=vp(s);if(u.$===-1){var l=u.b,f=u.c;return S(Hr,n,l,f,o,nt(s))}else return er}else return S(Hr,n,t,a,o,i(gn,e,s))}else return er}),gp=d(function(e,r){var n=i(gn,e,r);if(n.$===-1&&!n.a){n.a;var t=n.b,a=n.c,o=n.d,s=n.e;return S(z,1,t,a,o,s)}else{var u=n;return u}}),kp=P(function(e,r,n){var t=r(i(xe,e,n));if(t.$)return i(gp,e,n);var a=t.a;return w(nn,e,a,n)}),wp=d(function(e,r){return w(Ae,d(function(n,t){var a=$p(n);return i(vt,a,r)?w(kp,a,function(o){if(o.$)return O(b([n]));var s=o.a;return O(i(M,n,s))},t):t}),ur,i(Me,function(n){var t=n.a,a=n.b;return i(I,function(o){return t},a.dU)},Ur(e)))}),_p=Jo,dn=_p(_),Os=function(e){return w(Ae,d(function(r,n){var t=r.a,a=r.b;return w(nn,t,a,n)}),ur,e)},yp=gc,Vs=function(e){return i(he,Os,yp(e))},xp=Na(function(e,r,n,t,a,o,s,u){return{dn:a,$7:r,dv:o,dN:u,dU:e,d5:n,cU:s,ej:t}}),Ep=P(function(e,r,n){return{c5:r,d_:e,d$:n}}),jp=function(e){return{$:0,a:e}},Cp=function(e){return{$:2,a:e}},Mp=function(e){return{$:7,a:e}},Ap=function(e){return{$:1,a:e}},Pp=function(e){return{$:5,a:e}},Op=function(e){return{$:6,a:e}},Vp=function(e){return{$:4,a:e}},Sp=function(e){return{$:3,a:e}},Ye=bc,zr=kc,Kt=function(e){return i(zr,e,Se(0))},sr=$c,kn=function(e){return{$:2,a:e}},qp={$:3},Ss=function(e){return{$:1,a:e}},ni=function(e){return{$:0,a:e}},ti=mc,Ip=pc,Nt=vc,Rt=wc,ke=dc,ai=Rt(b([i(he,function(e){switch(e){case"oui":return kn(!0);case"non":return kn(!1);default:return ni(e)}},ke),i(he,Ss,Ip),i(he,kn,ti),Nt(qp)])),Pe=function(e){return Rt(b([Nt(y),i(he,O,e)]))},qs=xs(Hm),bt=d(function(e,r){return w(Ir,Ye,r,e)}),Cn=fc,Np=P(function(e,r,n){var t=function(o){return Rt(b([o,Nt(n)]))},a=function(o){var s=i($t,i(bt,e,Cn),o);if(s.$)return Se(n);var u=s.a,l=i($t,t(r),u);if(l.$)return i(bt,e,t(r));var f=l.a;return Se(f)};return i(zr,a,Cn)}),Oe=ve(function(e,r,n,t){return i(qs,w(Np,b([e]),r,n),t)}),Rp=d(function(e,r){return{df:e,cC:r}}),Br=P(function(e,r,n){return i(qs,i(Ye,e,r),n)}),Tp=w(Br,"possibilitÃ©s",sr(ke),ce(Oe,"choix obligatoire",Pe(ke),y,Se(Rp))),Dp=d(function(e,r){return{c8:r,dV:e}}),Bp=Vs(ai),Lp=w(Br,"avec",Bp,w(Br,"rÃ¨gle",ke,Se(Dp)));function wn(){return ce(Oe,"sinon",Pe(_n()),y,ce(Oe,"alors",Pe(_n()),y,ce(Oe,"si",Pe(_n()),y,Se(Ep))))}function _n(){return Rt(b([i(he,jp,ai),i(he,Ap,i(Ye,"somme",sr(ke))),i(he,Cp,i(Ye,"moyenne",sr(ke))),i(he,Sp,i(Ye,"variations",sr(Kt(function(e){return wn()})))),i(he,Vp,i(Ye,"une possibilitÃ©",Tp)),i(he,Pp,i(Ye,"toutes ces conditions",sr(Kt(function(e){return wn()})))),i(he,Op,i(Ye,"une de ces conditions",sr(Kt(function(e){return wn()})))),i(he,Mp,i(Ye,"recalcul",Lp))]))}var Fp=wn();wn=function(){return Fp};var la=_n();_n=function(){return la};var Up=ce(Oe,"note",Pe(ke),y,ce(Oe,"titre",Pe(ke),y,ce(Oe,"formule",Pe(la),y,ce(Oe,"par dÃ©faut",Pe(la),y,ce(Oe,"unitÃ©",Pe(ke),y,ce(Oe,"rÃ©sumÃ©",Pe(ke),y,ce(Oe,"description",Pe(ke),y,ce(Oe,"question",Pe(ke),y,Se(xp))))))))),Hp=Vs(Up),zp=function(e){var r=i($t,Hp,e);if(r.$){var a=r.a;return c(T(Fi,{av:O(a)}),dn)}else{var n=r.a,t=fp();return c(T(Fi,{aI:t,aw:ie(t),a8:i(wp,n,t),Q:n}),Cs(i(ne,function(o){var s=o.a;return s},Ur(n))))}},Jp=function(e){return{$:3,a:e}},Wp=function(e){return{$:2,a:e}},Kp=function(e){return{$:1,a:e}},Qp=Jo,ht=hc,Gp=Ha("evaluatedRule",i(zr,function(e){return i(zr,function(r){return Se(c(e,r))},i(ht,1,Cn))},i(ht,0,ke))),Zp=Ha("evaluatedRules",sr(i(zr,function(e){return i(zr,function(r){return Se(c(e,r))},i(ht,1,Cn))},i(ht,0,ke)))),Yp=Ha("situationUpdated",Nt(0)),Xp=function(e){return Qp(b([Gp(Kp),Zp(Wp),Yp(Jp)]))},ii=P(function(e,r,n){e:for(;;){if(n.$===-2)return r;var t=n.b,a=n.c,o=n.d,s=n.e,u=e,l=w(e,t,a,w(ii,e,r,o)),f=s;e=u,r=l,n=f;continue e}}),ef=P(function(e,r,n){return w(ii,P(function(t,a,o){return w(Mc,e(t),r(a),o)}),Cc(),n)}),rf=Da,nf=Pc,tf=function(e){return"'"+(e+"'")},af=function(e){switch(e.$){case 0:var r=e.a;return hn(tf(r));case 1:var n=e.a;return rf(n);case 2:var t=e.a;return hn(t?"oui":"non");default:return nf}},of=function(e){return w(ef,Za,af,e)},sf=Ko("setSituation",Za),uf=P(function(e,r,n){return{cm:n,dJ:r,aM:e}}),lf=w(Br,"isNullable",ti,w(Br,"missingVariables",sr(ke),w(Br,"nodeValue",ai,Se(uf)))),Hi=d(function(e,r){var n=e.a,t=e.b,a=i($t,lf,t);if(a.$){var s=a.a;return T(r,{av:O(s)})}else{var o=a.a;return T(r,{U:w(nn,n,o,r.U)})}}),cf=d(function(e,r){switch(e.$){case 0:var n=e.a,s=n.a,t=n.b,a=w(nn,s,t,r.aP);return c(T(r,{aP:a}),sf(of(a)));case 1:var o=e.a,s=o.a,u=o.b;return c(i(Hi,c(s,u),r),dn);case 2:var l=e.a;return c(w(Ae,Hi,r,l),dn);case 3:return c(r,Cs(i(ne,function(p){var m=p.a;return m},Ur(r.Q))));case 4:var f=e.a;return c(T(r,{aw:O(f)}),dn);default:return c(r,dn)}}),Ue=d(function(e,r){return i(Zo,e,hn(r))}),q=Ue("className"),Y=te("div"),zi=function(e){return e.$===-2},mf=Qc,Kn=mf,pf=Gc,ff=pf,df=function(e){return{$:4,a:e}},gt=te("a"),fe=d(function(e,r){if(r.$)return y;var n=r.a;return e(n)}),Is=te("li"),$f=function(e){return{$:0,a:e}},Ns=Go,Rs=d(function(e,r){return i(Ns,e,$f(r))}),vf=function(e){return i(Rs,"click",Se(e))},bf=ta,oe=bf,oi=ec,Ts=te("ul"),hf=d(function(e,r){return i(Y,b([q("flex flex-wrap md:justify-center bg-neutral rounded-md border border-base-200 p-2 mb-4")]),b([i(Ts,b([q("menu menu-horizontal gap-2")]),i(ne,function(n){var t=i(x,"",i(fe,function(a){return re(a,n)?O(" bg-primary text-white border-transparent"):y},r));return i(Is,_,b([i(gt,b([q("bg-base-100 rounded-md border border-base-200 cursor-pointer px-4 py-2 text-xs font-semibold hover:bg-primary hover:text-white hover:border-transparent"+t),vf(df(n))]),b([oe(oi(n))]))]))},e))]))}),gf=Ue("id"),Ds=d(function(e,r){return r.b?w(Ir,M,r,e):e}),tt=function(e){return w(Ir,Ds,_,e)},F=P(function(e,r,n){return r(e(n))}),Mn=function(e){return{$:5,a:e}},pr=d(function(e,r){return{$:6,a:e,b:r}}),Tt=d(function(e,r){return{$:4,a:e,b:r}}),An=d(function(e,r){return e<1?"":w(Be,-e,J(r),r)}),kt=Zl,Bs=function(e){return i(An,2,e)==="  "?kt(e)+"  ":kt(e)},ca=d(function(e,r){return i(Tt,e+(`
`+Bs(r)),_)}),Ls=P(function(e,r,n){return e(r(n))}),kf=Ll,wf=d(function(e,r){return!i(ri,i(Ls,kf,e),r)}),Fs=ve(function(e,r,n,t){return{dC:r,cq:e,dO:n,d3:t}}),_f=Cm,W=function(e){return i(_f,{dd:!1,dK:!1},e)},K=jm,yf=i(x,K,W("^ {0,3}(?:>[ ]?)(.*)$")),si=i(x,K,W("^\\s*$")),tn=Mm,xf=function(e){var r=e.a,n=e.b,t=e.c,a=J(n),o=a>=4,s=o?Z(n,t):t,u=o||i(tn,si,t)?r.A-a:r.A;return c(T(r,{A:u}),s)},Ef=i(x,K,W("^ {0,3}(#{1,6})(?:[ \\t]+[ \\t#]+$|[ \\t]+|$)(.*?)(?:\\s+[ \\t#]*)?$")),ui=P(function(e,r,n){return{$:2,a:e,b:r,c:n}}),jf=function(e){var r=e.d3;if(r.b&&!r.a.$&&r.b.b){var n=r.a.a,t=r.b,a=t.a;return O(w(ui,i(x,"",a),J(n),_))}else return y},Ee=os,He=d(function(e,r){if(r.$)return we(e);var n=r.a;return $e(n)}),Us=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,function(t){return i(M,t,n)},i(fe,jf,ie(w(Ee,1,Ef,r)))))},Hs=function(e){return{$:0,a:e}},cr=d(function(e,r){return{$:3,a:e,b:r}}),wt=d(function(e,r){return{$:1,a:e,b:r}}),Cf=d(function(e,r){if(r.b){var n=r.a,t=r.b;return i(M,i(zs,n,e),t)}else return b([b([Hs(e.cq)])])}),zs=d(function(e,r){e:for(;;)if(e.b)switch(e.a.$){case 3:if(e.a.a.$===1&&e.a.a.a){var n=e.a,t=n.a,a=t.b,o=n.b,f=e.b;return function(m){return i(M,m,f)}(i(cr,i(wt,!0,a),o+`
`))}else break e;case 6:var s=e.a,u=s.a,l=s.b,f=e.b;return i(M,i(pr,u,i(Cf,r,l)),f);default:break e}else break e;return i(M,Hs(r.cq),e)}),Js=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,zs(n),ie(w(Ee,1,si,r))))},Mf=i(x,K,W("^(?: {4,4}| {0,3}\\t)(.*)$")),at={$:0},Af=d(function(e,r){e:for(;;)if(e.b&&!e.a.$){var n=e.a.a,t=e.b,a=t,o=i(M,n,r);e=a,r=o;continue e}else return c(e,r)}),_t=d(function(e,r){e:for(;;)if(r.b)switch(r.a.$){case 4:var n=r.a,t=n.a,l=r.b;return O(i(M,i(ca,t,e),l));case 5:var a=r.a.a,l=r.b;return i(I,function(m){return i(M,Mn(m),l)},i(_t,e,a));case 6:var o=r.a,s=o.a,u=o.b,l=r.b;if(u.b){var f=u.a,p=u.b;return i(I,i(F,function(m){return i(M,m,p)},i(F,pr(s),function(m){return i(M,m,l)})),i(_t,e,f))}else return y;default:break e}else break e;return y}),li=function(e){return i(Mr,"",e)},gr=ss(us),Pf=ss,Ws=i(x,K,W("\\t")),yt=function(e){return i(F,i(gr,Ws,function(r){return"    "}),w(Pf,1,i(x,K,W("^ {0,"+(jn(e)+"}"))),function(r){return""}))},Of=d(function(e,r){var n=r.a,t=r.b;if(n.b&&n.a.$===3&&!n.a.a.$){var a=n.a;a.a;var o=a.b,s=n.b;return O(function(u){return i(M,u,s)}(i(cr,at,function(u){return u+(e+`
`)}(Z(o,li(i(ne,function(u){return i(yt,4,u)+`
`},t)))))))}else return y}),Vf=d(function(e,r){e:for(;;)if(e.b)switch(e.a.$){case 3:if(e.a.a.$)break e;var n=e.a;n.a;var t=n.b,o=e.b;return function(u){return i(M,u,o)}(i(cr,at,t+(r+`
`)));case 0:var a=e.a.a,o=e.b;return i(x,function(s){return i(M,s,e)}(i(cr,at,r+`
`)),i(Of,r,i(Af,o,b([a]))));default:break e}else break e;return i(x,function(s){return i(M,s,e)}(i(cr,at,r+`
`)),i(_t,r,e))}),Ks=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,Vf(n),i(x,y,i(x,y,i(I,i(F,function(t){return t.d3},ie),ie(w(Ee,1,Mf,r)))))))},Sf=i(x,K,W("&#([0-9]{1,8});")),ma=Fl,Jr=function(e){return i(ma,e,"")},xt=lc,Pn=Nl,qf=function(e){var r=i(Pn,16,e),n=i(Pn,131070,e);return e>=131070&&(0<=n&&n<=15||65536<=n&&n<=65551)&&(r===14||r===15)},If=function(e){return e===9||e===10||e===13||e===133||32<=e&&e<=126||160<=e&&e<=55295||57344<=e&&e<=64975||65008<=e&&e<=65533||65536<=e&&e<=1114109},Qs=function(e){return If(e)&&!qf(e)?Jr(xt(e)):Jr(xt(65533))},Nf=function(e){return i(x,e.cq,i(I,Qs,i(fe,It,i(x,y,ie(e.d3)))))},Rf=i(gr,Sf,Nf),Tf=i(x,K,W("&([0-9a-zA-Z]+);")),Df=Os(b([c("quot",34),c("amp",38),c("apos",39),c("lt",60),c("gt",62),c("nbsp",160),c("iexcl",161),c("cent",162),c("pound",163),c("curren",164),c("yen",165),c("brvbar",166),c("sect",167),c("uml",168),c("copy",169),c("ordf",170),c("laquo",171),c("not",172),c("shy",173),c("reg",174),c("macr",175),c("deg",176),c("plusmn",177),c("sup2",178),c("sup3",179),c("acute",180),c("micro",181),c("para",182),c("middot",183),c("cedil",184),c("sup1",185),c("ordm",186),c("raquo",187),c("frac14",188),c("frac12",189),c("frac34",190),c("iquest",191),c("Agrave",192),c("Aacute",193),c("Acirc",194),c("Atilde",195),c("Auml",196),c("Aring",197),c("AElig",198),c("Ccedil",199),c("Egrave",200),c("Eacute",201),c("Ecirc",202),c("Euml",203),c("Igrave",204),c("Iacute",205),c("Icirc",206),c("Iuml",207),c("ETH",208),c("Ntilde",209),c("Ograve",210),c("Oacute",211),c("Ocirc",212),c("Otilde",213),c("Ouml",214),c("times",215),c("Oslash",216),c("Ugrave",217),c("Uacute",218),c("Ucirc",219),c("Uuml",220),c("Yacute",221),c("THORN",222),c("szlig",223),c("agrave",224),c("aacute",225),c("acirc",226),c("atilde",227),c("auml",228),c("aring",229),c("aelig",230),c("ccedil",231),c("egrave",232),c("eacute",233),c("ecirc",234),c("euml",235),c("igrave",236),c("iacute",237),c("icirc",238),c("iuml",239),c("eth",240),c("ntilde",241),c("ograve",242),c("oacute",243),c("ocirc",244),c("otilde",245),c("ouml",246),c("divide",247),c("oslash",248),c("ugrave",249),c("uacute",250),c("ucirc",251),c("uuml",252),c("yacute",253),c("thorn",254),c("yuml",255),c("OElig",338),c("oelig",339),c("Scaron",352),c("scaron",353),c("Yuml",376),c("fnof",402),c("circ",710),c("tilde",732),c("Alpha",913),c("Beta",914),c("Gamma",915),c("Delta",916),c("Epsilon",917),c("Zeta",918),c("Eta",919),c("Theta",920),c("Iota",921),c("Kappa",922),c("Lambda",923),c("Mu",924),c("Nu",925),c("Xi",926),c("Omicron",927),c("Pi",928),c("Rho",929),c("Sigma",931),c("Tau",932),c("Upsilon",933),c("Phi",934),c("Chi",935),c("Psi",936),c("Omega",937),c("alpha",945),c("beta",946),c("gamma",947),c("delta",948),c("epsilon",949),c("zeta",950),c("eta",951),c("theta",952),c("iota",953),c("kappa",954),c("lambda",955),c("mu",956),c("nu",957),c("xi",958),c("omicron",959),c("pi",960),c("rho",961),c("sigmaf",962),c("sigma",963),c("tau",964),c("upsilon",965),c("phi",966),c("chi",967),c("psi",968),c("omega",969),c("thetasym",977),c("upsih",978),c("piv",982),c("ensp",8194),c("emsp",8195),c("thinsp",8201),c("zwnj",8204),c("zwj",8205),c("lrm",8206),c("rlm",8207),c("ndash",8211),c("mdash",8212),c("lsquo",8216),c("rsquo",8217),c("sbquo",8218),c("ldquo",8220),c("rdquo",8221),c("bdquo",8222),c("dagger",8224),c("Dagger",8225),c("bull",8226),c("hellip",8230),c("permil",8240),c("prime",8242),c("Prime",8243),c("lsaquo",8249),c("rsaquo",8250),c("oline",8254),c("frasl",8260),c("euro",8364),c("image",8465),c("weierp",8472),c("real",8476),c("trade",8482),c("alefsym",8501),c("larr",8592),c("uarr",8593),c("rarr",8594),c("darr",8595),c("harr",8596),c("crarr",8629),c("lArr",8656),c("uArr",8657),c("rArr",8658),c("dArr",8659),c("hArr",8660),c("forall",8704),c("part",8706),c("exist",8707),c("empty",8709),c("nabla",8711),c("isin",8712),c("notin",8713),c("ni",8715),c("prod",8719),c("sum",8721),c("minus",8722),c("lowast",8727),c("radic",8730),c("prop",8733),c("infin",8734),c("ang",8736),c("and",8743),c("or",8744),c("cap",8745),c("cup",8746),c("int",8747),c("there4",8756),c("sim",8764),c("cong",8773),c("asymp",8776),c("ne",8800),c("equiv",8801),c("le",8804),c("ge",8805),c("sub",8834),c("sup",8835),c("nsub",8836),c("sube",8838),c("supe",8839),c("oplus",8853),c("otimes",8855),c("perp",8869),c("sdot",8901),c("lceil",8968),c("rceil",8969),c("lfloor",8970),c("rfloor",8971),c("lang",9001),c("rang",9002),c("loz",9674),c("spades",9824),c("clubs",9827),c("hearts",9829),c("diams",9830)])),Bf=function(e){return i(x,e.cq,i(I,i(F,xt,Jr),i(fe,function(r){return i(xe,r,Df)},i(x,y,ie(e.d3)))))},Lf=i(gr,Tf,Bf),Ff=i(x,K,W("(\\\\+)([!\"#$%&\\'()*+,./:;<=>?@[\\\\\\]^_`{|}~-])")),Gs=P(function(e,r,n){return e<=0?n:w(Gs,e>>1,Z(r,r),e&1?Z(n,r):n)}),Wr=d(function(e,r){return w(Gs,e,r,"")}),Uf=i(gr,Ff,function(e){var r=e.d3;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$){var n=r.a.a,t=r.b,a=t.a.a;return Z(i(Wr,J(n)/2|0,"\\"),a)}else return e.cq}),Hf=i(x,K,W("&#[Xx]([0-9a-fA-F]{1,8});")),zf=Wl,Zs=function(e){return w(zf,M,_,e)},Ys=rc,Jf=i(F,Ys,i(F,Zs,i(Ae,d(function(e,r){return r*16+i(Pn,39,en(e))-9}),0))),Wf=function(e){return i(x,e.cq,i(I,i(F,Jf,Qs),i(x,y,ie(e.d3))))},Kf=i(gr,Hf,Wf),Et=function(e){return Kf(Rf(Lf(Uf(e))))},Qf=Yl,Gf=function(e){var r=e.d3;if(r.b&&r.b.b&&!r.b.a.$&&r.b.b.b){var n=r.a,t=r.b,a=t.a.a,o=t.b,s=o.a;return O(i(wt,!0,{bl:i(qr,1,a),bm:J(a),A:i(x,0,i(I,J,n)),bv:i(I,Et,i(fe,function(u){return u===""?y:O(u)},ie(i(x,_,i(I,Qf,s)))))}))}else return y},Zf=i(x,K,W("^( {0,3})(`{3,}(?!.*`)|~{3,}(?!.*~))(.*)$")),Xs=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,function(t){return i(M,t,n)},i(I,function(t){return i(cr,t,"")},i(fe,Gf,ie(w(Ee,1,Zf,r))))))},Yf=function(e){return{$:1,a:e}},eu={$:0},Xf=function(e){var r=e.d3;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$&&r.b.b.b&&!r.b.b.a.$&&r.b.b.b.b&&r.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a.a,o=t.b,s=o.a.a,u=o.b,l=u.a,f=u.b,p=f.a;return O(Te({aJ:s,A:J(n)+1,ae:!1,aT:i(x,eu,i(I,Yf,It(a)))},i(x,"",l),i(x,"",p)))}else return y},ed=i(x,K,W("^( *(\\d{1,9})([.)])( {0,4}))(?:[ \\t](.*))?$")),rd=function(e){return i(He,e,i(fe,Xf,ie(w(Ee,1,ed,e))))},nd=function(e){var r=e.d3;if(r.b&&!r.a.$){var n=r.a.a;return i(Es,"=",n)?O(c(1,n)):O(c(2,n))}else return y},td=P(function(e,r,n){var t=n.a;if(n.b,r.b&&r.a.$===4){var a=r.a,o=a.a,s=r.b;return O(i(M,w(ui,o,t,_),s))}else return y}),ad=i(x,K,W("^ {0,3}(=+|-+)[ \\t]*$")),ru=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(fe,i(td,r,n),i(fe,nd,ie(w(Ee,1,ad,r)))))},id={$:1},od=i(x,K,W("^ {0,3}(?:(?:\\*[ \\t]*){3,}|(?:_[ \\t]*){3,}|(?:-[ \\t]*){3,})[ \\t]*$")),nu=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,function(t){return i(M,id,n)},ie(w(Ee,1,od,r))))},sd=function(e){var r=e.d3;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$&&r.b.b.b&&r.b.b.b.b&&!r.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a.a,o=t.b,s=o.a,u=o.b,l=u.a;return O(Te({aJ:a,A:J(n)+1,ae:!1,aT:eu},i(x,"",s),i(x,"",l)))}else return y},ud=i(x,K,W("^( *([\\*\\-\\+])( {0,4}))(?:[ \\t](.*))?$")),ld=function(e){return i(He,e,i(fe,sd,ie(w(Ee,1,ud,e))))},cd=i(x,K,W("^ {0,3}(`{3,}|~{3,})\\s*$")),md=d(function(e,r){var n=r.d3;if(n.b&&!n.a.$){var t=n.a.a;return ae(J(t),e.bm)>-1&&re(i(qr,1,t),e.bl)}else return!1}),pd=function(e){return i(F,i(Ee,1,cd),i(F,ie,i(F,I(md(e)),x(!1))))},fd=P(function(e,r,n){return i(pd,e,n)?i(cr,i(wt,!1,e),r):i(cr,i(wt,!0,e),r+(i(yt,e.A,n)+`
`))}),pe=d(function(e,r){if(r.$){var n=r.a;return e(n)}else return r}),dd=i(x,K,W("^ +")),tu=i(F,i(gr,Ws,function(e){return"    "}),i(F,i(Ee,1,dd),i(F,ie,i(F,I(i(F,function(e){return e.cq},J)),x(0))))),au=function(e){e:for(;;)if(e.b){var r=e.a;e.b;r:for(;;)if(r.b)switch(r.a.$){case 0:return!!r.b.b;case 6:var n=r.a,t=n.b,a=t;e=a;continue e;default:break r}else break r;return!1}else return!1},Lr=d(function(e,r){if(r.$){var t=r.a;return we(t)}else{var n=r.a;return $e(e(n))}}),pa=d(function(e,r){if(r.$){var t=r.a;return we(e(t))}else{var n=r.a;return $e(n)}}),iu=d(function(e,r){return i(x,i(M,i(Tt,Bs(e),_),r),i(_t,e,r))}),ou=d(function(e,r){if(r.$)return e;var n=r.a;return n}),su=function(e){var r=e.a,n=e.b;return i(He,c(r,n),i(I,$d(n),i(I,i(F,function(t){return t.d3},i(F,ie,i(F,x(y),x("")))),ie(w(Ee,1,yf,r)))))},uu=function(e){var r=e.a,n=e.b;return i(pa,function(t){return c(t,n)},i(Lr,i(bd,r,n),i(Lr,xf,i(pe,ld,rd(r)))))},Kr=d(function(e,r){e:for(;;)if(r.b)switch(r.a.$){case 3:if(r.a.a.$===1&&r.a.a.a){var n=r.a,t=n.a,a=t.b,o=n.b,f=r.b;return function(m){return i(M,m,f)}(w(fd,a,o,e))}else break e;case 6:var s=r.a,u=s.a,l=s.b,f=r.b;return ae(tu(e),u.A)>-1?S(vd,e,u,l,r,f):i(ou,i(iu,e,r),i(pe,su,i(pe,Us,i(pe,ru,i(pe,Xs,i(pe,Ks,i(pe,Js,i(pe,uu,nu(c(e,r))))))))));default:break e}else break e;return i(lu,e,r)}),$d=d(function(e,r){if(e.b&&e.a.$===5){var n=e.a.a,t=e.b;return function(a){return i(M,a,t)}(Mn(i(Kr,r,n)))}else return function(a){return i(M,a,e)}(Mn(i(Kr,r,_)))}),vd=Qe(function(e,r,n,t,a){if(n.b){var o=n.a,s=n.b,u=i(yt,r.A,e),l=function(v){return function(g){return i(M,g,a)}(i(pr,v,function(g){return i(M,g,s)}(i(Kr,u,o))))};e:for(;;)if(o.b)switch(o.a.$){case 0:if(o.b.b){var $=o.b;return i(wf,function(g){return!g.$},$)?i(lu,e,t):l(T(r,{ae:!0}))}else return l(r);case 6:var f=o.a,p=f.a,m=f.b,$=o.b;return ae(tu(u),p.A)>-1?l(r):au(m)?l(T(r,{ae:!0})):l(r);default:break e}else break e;return l(r)}else return function(v){return i(M,v,a)}(i(pr,r,function(v){return i(M,v,_)}(function(v){return i(Kr,v,_)}(i(yt,r.A,e)))))}),bd=P(function(e,r,n){var t=n.a,a=n.b,o=i(Kr,a,_),s=i(M,i(pr,t,b([o])),r);e:for(;;)if(r.b)switch(r.a.$){case 6:var u=r.a,l=u.a,f=u.b,$=r.b;return re(t.aJ,l.aJ)?function(g){return i(M,g,$)}(i(pr,T(l,{A:t.A,ae:l.ae||au(f)}),i(M,o,f))):s;case 4:var p=r.a,m=p.a;p.b;var $=r.b;if(o.b&&!o.a.$&&!o.b.b)return i(M,i(ca,m,e),$);var v=t.aT;return v.$===1?v.a===1?s:(v.a,i(M,i(ca,m,e),$)):s;default:break e}else break e;return s}),lu=d(function(e,r){return i(ou,i(iu,e,r),i(pe,uu,i(pe,nu,i(pe,su,i(pe,Us,i(pe,ru,i(pe,Xs,i(pe,Ks,Js(c(e,r))))))))))}),cu=d(function(e,r){if(e.b){var n=e.a,t=e.b;return i(cu,t,i(Kr,n,r))}else return r}),hd=Xl,mu=d(function(e,r){return{$:8,a:e,b:r}}),Ji=function(e){return{$:7,a:e}},gd=function(e){return{$:1,a:e}},kd=b(["name","class"]),wd=b(["address","article","aside","b","blockquote","br","caption","center","cite","code","col","colgroup","dd","details","div","dl","dt","figcaption","figure","footer","h1","h2","h3","h4","h5","h6","hr","i","legend","li","menu","menuitem","nav","ol","optgroup","option","p","pre","section","strike","summary","small","table","tbody","td","tfoot","th","thead","tr","ul"]),_d={b_:kd,b$:wd},yd={cI:gd(_d),cQ:!1},xd=P(function(e,r,n){return{d:_,az:e,I:n,bJ:r,i:_}}),Ed=function(e){return{$:2,a:e}},pu=d(function(e,r){return{$:6,a:e,b:r}}),jd={$:1},Cd=P(function(e,r,n){return{$:5,a:e,b:r,c:n}}),Md=P(function(e,r,n){return{$:4,a:e,b:r,c:n}}),Wi=P(function(e,r,n){return{$:3,a:e,b:r,c:n}}),Ki=function(e){return{$:0,a:e}},Ad=function(e){var r=e,n=r.aT;switch(n.$){case 0:return Ki(r.z);case 1:return jd;case 2:return Ed(r.z);case 3:var t=n.a,a=t.a,u=t.b;return w(Wi,u,y,b([Ki(a)]));case 4:var o=n.a,u=o.a,l=o.b;return w(Wi,u,l,$n(r.d));case 5:var s=n.a,u=s.a,l=s.b;return w(Md,u,l,$n(r.d));case 6:var f=n.a;return w(Cd,f.aQ,f.b0,$n(r.d));default:var p=n.a;return i(pu,p,$n(r.d))}},$n=function(e){return i(ne,Ad,e)},fu=d(function(e,r){return T(r,{b7:r.b7-e._,bT:r.bT-e._,aC:r.aC-e._,_:r._-e._})}),Pd=d(function(e,r){return T(e,{d:i(M,i(fu,e,r),e.d)})}),Od=d(function(e,r){var n=e;if(r.b){var t=r.a,a=r.b;return ae(t.b7,n.bT)<1?i(M,n,r):ae(t.bT,n.bT)<0&&ae(t.b7,n.b7)>0?i(M,i(Pd,t,n),a):r}else return b([n])}),ci=Al;function mi(){return i(F,ci(function(e){var r=e;return r.bT}),i(F,i(Ae,Od,_),ne(function(e){var r=e;return T(r,{d:mi()(r.d)})})))}var du=mi();mi=function(){return du};var Vd=function(e){return T(e,{d:du(e.d)})},$u={$:0},jt=function(e){return{b7:0,d:_,bT:0,z:Et(e),aC:0,_:0,aT:$u}},Sd=P(function(e,r,n){var t=r,a=T(t,{d:w(vu,t.z,_,t.d)});if(n.b){var s=n.a;return n.b,re(s.aT,$u)||re(t.b7,s.bT)?i(M,a,n):ae(t.b7,s.bT)<0?i(M,a,i(M,jt(w(Be,t.b7,s.bT,e)),n)):n}else{var o=i(br,t.b7,e);return hr(o)?b([a]):b([a,jt(o)])}}),vu=P(function(e,r,n){e:for(;;)if(n.b){var a=n.a,o=n.b,s=e,u=w(Sd,e,a,r),l=o;e=s,r=u,n=l;continue e}else if(r.b){var t=r.a;return t.bT>0?i(M,jt(i(qr,t.bT,e)),r):r}else return hr(e)?_:b([jt(e)])}),qd=function(e){return T(e,{d:w(vu,e.I,_,e.d)})},Id=i(x,K,W("(\\\\*)(\\<)")),Ke=os(us),Ct=function(e){return{$:3,a:e}},kr=function(e){return!i(Pn,2,e)},Nd=function(e){var r=e.d3;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b;t.a.a;var a=i(x,0,i(I,J,n));return kr(a)?O({dC:e.dC+a,e:1,g:Ct("<")}):y}else return y},Rd=function(e){return i(Me,Nd,i(Ke,Id,e))},Td=i(x,K,W("(\\\\*)(\\>)")),Dd=function(e){return{$:4,a:e}},Bd=function(e){var r=e.d3;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a;r.b;var t=i(x,0,i(I,J,n));return O({dC:e.dC+t,e:1,g:Dd(!kr(t))})}else return y},Ld=function(e){return i(Me,Bd,i(Ke,Td,e))},Fd=i(x,K,W("(\\\\*)([^*])?(\\*+)([^*])?")),Ud=d(function(e,r){return{$:6,a:e,b:r}}),Hd=i(x,K,W("[!-#%-\\*,-/:;\\?@\\[-\\]_\\{\\}]")),zd=tn(Hd),Jd=i(x,K,W("\\s")),Wd=tn(Jd),Kd=function(e){var r=Jr(e);return Wd(r)?0:zd(r)?1:2},Qd=function(e){return i(x,0,i(I,Kd,e))},Qi=i(F,I(i(F,rn,i(F,I(Qm),Qd))),x(0)),Gd=El,bu=P(function(e,r,n){var t=n.d3;if(t.b&&t.b.b&&t.b.b.b&&!t.b.b.a.$&&t.b.b.b.b){var a=t.a,o=t.b,s=o.a,u=o.b,l=u.a.a,f=u.b,p=f.a,m=i(x,0,i(I,J,s)),$=n.dC&&!m?O(w(Be,n.dC-1,n.dC,r)):s,v=i(x,0,i(I,J,a)),g=!kr(v)&&!m||re($,O("\\")),k=g?J(l)-1:J(l),E=c(g?1:Qi($),Qi(p)),C=n.dC+v+m+(g?1:0);return k<=0||e==="_"&&re(E,c(2,2))?y:O({dC:C,e:k,g:i(Ud,e,E)})}else return y}),Zd=function(e){return i(Me,i(bu,"*",e),i(Ke,Fd,e))},Yd=i(x,K,W("(\\\\*)(\\`+)")),hu=function(e){return{$:0,a:e}},Xd=function(e){var r=e.d3;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b,a=t.a.a,o=i(x,0,i(I,J,n));return O({dC:e.dC+o,e:J(a),g:hu(!kr(o))})}else return y},e$=function(e){return i(Me,Xd,i(Ke,Yd,e))},r$=i(x,K,W("(?:(\\\\+)|( {2,}))\\n")),Fr={$:8},n$=function(e){var r=e.d3;e:for(;;)if(r.b)if(r.a.$){if(r.b.b&&!r.b.a.$)return r.b,O({dC:e.dC,e:J(e.cq),g:Fr});break e}else{var n=r.a.a,t=J(n);return kr(t)?y:O({dC:e.dC+t-1,e:2,g:Fr})}else break e;return y},t$=function(e){var r=e.d3;e:for(;;)if(r.b)if(r.a.$)if(r.b.b){var a=r.b;return a.a,O({dC:e.dC,e:J(e.cq),g:Fr})}else break e;else{var n=r.a.a,t=J(n);return kr(t)?O({dC:e.dC+t,e:1,g:Fr}):O({dC:e.dC+t-1,e:2,g:Fr})}else break e;return y},a$=i(x,K,W("(?:(\\\\+)|( *))\\n")),i$=d(function(e,r){return e?i(Me,t$,i(Ke,a$,r)):i(Me,n$,i(Ke,r$,r))}),o$=i(x,K,W("(\\\\*)(\\])")),s$=function(e){var r=e.d3;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b;t.a.a;var a=i(x,0,i(I,J,n));return kr(a)?O({dC:e.dC+a,e:1,g:Ct("]")}):y}else return y},u$=function(e){return i(Me,s$,i(Ke,o$,e))},l$=i(x,K,W("(\\\\*)(\\!)?(\\[)")),Gi={$:2},fa=function(e){return{$:1,a:e}},c$=function(e){var r=e.d3;if(r.b&&r.b.b&&r.b.b.b&&!r.b.b.a.$){var n=r.a,t=r.b,a=t.a,o=t.b;o.a.a;var s=i(x,0,i(I,J,n)),u=!kr(s),l=e.dC+s+(u&&re(a,O("!"))?1:0),f=u?i(I,function($){return fa(!0)},a):O(i(x,fa(!0),i(I,function($){return Gi},a))),p=re(f,O(Gi))?2:1,m=function($){return{dC:l,e:p,g:$}};return i(I,m,f)}else return y},m$=function(e){return i(Me,c$,i(Ke,l$,e))},p$=i(x,K,W("(\\\\*)([^_])?(\\_+)([^_])?")),f$=function(e){return i(Me,i(bu,"_",e),i(Ke,p$,e))},d$=function(e){return T(e,{i:i(ci,function(r){return r.dC},Z(Ld(e.I),Z(Rd(e.I),Z(i(i$,e.az.cQ,e.I),Z(u$(e.I),Z(m$(e.I),Z(f$(e.I),Z(Zd(e.I),e$(e.I)))))))))})},gu={$:2},$$=function(e){return{$:7,a:e}},da=function(e){return{$:6,a:e}},pi=function(e){return{$:5,a:e}},fi=function(e){return{$:4,a:e}},Mt=d(function(e,r){return T(e,{d:i(M,r,e.d)})}),Xe=d(function(e,r){return T(e,{i:i(M,r,e.i)})}),Zi=d(function(e,r){if(r.$){var t=r.a;return we(t)}else{var n=r.a;return e(n)}}),un=d(function(e,r){return e(c(r.i,T(r,{i:_})))}),ku=function(e){return{$:3,a:e}},v$=i(x,K,W("%(?:3B|2C|2F|3F|3A|40|26|3D|2B|24|23|25)")),b$=Pm,h$=Am,di=i(F,h$,i(gr,v$,function(e){return i(x,e.cq,b$(e.cq))})),g$=i(x,K,W("^([A-Za-z][A-Za-z0-9.+\\-]{1,31}:[^<>\\x00-\\x20]*)$")),k$=function(e){var r=e;return i(tn,g$,r.z)?$e(T(r,{aT:ku(c(r.z,di(r.z)))})):we(r)},yn=" \\t\\f\\v\\r\\n",w$="(?:<([^<>"+(yn+("]*)>|([^"+(yn+("\\(\\)\\\\]*(?:\\\\.[^"+(yn+"\\(\\)\\\\]*)*))"))))),wu="(?:["+(yn+`]+(?:'([^'\\\\]*(?:\\\\.[^'\\\\]*)*)'|"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"|\\(([^\\)\\\\]*(?:\\\\.[^\\)\\\\]*)*)\\)))?`),_$=i(x,K,W("^\\(\\s*"+(w$+(wu+"\\s*\\)")))),_u=function(e){var r=e.a,n=e.b;return c(di(Et(r)),i(I,Et,n))},On=function(e){var r=d(function(n,t){if(t.$)return n;var a=t.a;return O(a)});return w(Ae,r,y,e)},y$=P(function(e,r,n){var t=n.d3;if(t.b&&t.b.b&&t.b.b.b&&t.b.b.b.b&&t.b.b.b.b.b){var a=t.a,o=t.b,s=o.a,u=o.b,l=u.a,f=u.b,p=f.a,m=f.b,$=m.a,v=On(b([l,p,$])),g=function(E){return T(e,{b7:e.b7+J(n.cq),aT:function(){var C=e.aT;return C.$===5?pi:fi}()(_u(c(E,v)))})},k=On(b([a,s]));return O(g(i(x,"",k)))}else return y}),Yi=function(e){var r=e.a,n=e.b,t=e.c;return i(He,Te(r,n,t),i(I,Mt(t),i(fe,i(y$,n,t),ie(w(Ee,1,_$,r)))))},yu="[^\\[\\]\\\\]*(?:\\\\.[^\\[\\]\\\\]*)*",x$=i(x,K,W("^\\[\\s*("+(yu+")\\s*\\]"))),E$=i(x,K,W("["+(yn+"]+"))),xu=i(F,kt,i(gr,E$,function(e){return" "})),Eu=i(F,xu,Ys),j$=P(function(e,r,n){var t=i(x,0,i(I,i(F,function(u){return u.cq},J),n)),a=function(u){return T(e,{b7:e.b7+t,aT:function(){var l=e.aT;return l.$===5?pi:fi}()(_u(u))})},o=function(u){return hr(u)?e.z:u}(i(x,e.z,i(x,y,i(x,y,i(I,i(F,function(u){return u.d3},ie),n))))),s=i(xe,Eu(o),r.bJ);return i(I,a,s)}),Xi=function(e){var r=e.a,n=e.b,t=e.c;return i(He,Te(r,n,t),i(I,Mt(t),w(j$,n,t,ie(w(Ee,1,x$,r)))))},Dt=d(function(e,r){return w(Ir,d(function(n,t){return e(n)?i(M,n,t):t}),_,r)}),eo=function(e){return!e.b},ro=function(e){var r=e.d;if(r.b){var n=r.a,t=r.b,a=i(Dt,function(o){var s=o;return ae(n.b7,s.bT)>0&&ae(n.b7,s.b7)<0},t);return eo(t)||eo(a)?$e(e):we(0)}else return we(0)},C$=i(x,K,W("^([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?)*)$")),M$=function(e){var r=e;return i(tn,C$,r.z)?$e(T(r,{aT:ku(c(r.z,"mailto:"+di(r.z)))})):we(r)},A$=d(function(e,r){return T(r,{i:i(Dt,e,r.i)})}),Qr=d(function(e,r){var n=d(function(a,o){var s=o.a,u=o.b,l=o.c;return s.$===1?e(a)?Te(O(a),u,_):Te(y,i(M,a,u),_):Te(s,u,i(M,a,l))}),t=function(a){var o=a.a,s=a.b,u=a.c;return i(I,function(l){return Te(l,_e(s),_e(u))},o)};return t(w(Ae,n,Te(y,_,_),r))}),P$=d(function(e,r){return{b0:r,aQ:e}}),O$=d(function(e,r){return{$:5,a:e,b:r}}),V$=function(e){var r=e.d3;e:for(;;)if(r.b&&!r.a.$){if(r.a.a==="")return y;if(r.b.b&&r.b.b.b&&r.b.b.b.b){var n=r.a.a,t=r.b,a=t.a,o=t.b,s=o.a,u=o.b,l=u.a,f=On(b([a,s,l]));return O(c(n,f))}else break e}else break e;return y},S$=i(x,K,W(`([a-zA-Z:_][a-zA-Z0-9\\-_.:]*)(?: ?= ?(?:"([^"]*)"|'([^']*)'|([^\\s"'=<>\`]*)))?`)),q$=i(F,Ke(S$),Me(V$)),I$=P(function(e,r,n){var t=n.d3;if(t.b&&t.b.b&&!t.b.a.$&&t.b.b.b&&t.b.b.b.b){var a=t.a,o=t.b,s=o.a.a,u=o.b,l=u.a,f=u.b,p=f.a,m=function(A){return i(Xe,e,{dC:r.bT,e:r.b7-r.bT,g:i(O$,re(a,y)&&re(p,y),i(P$,s,A))})},$=d(function(A,D){return i(Dt,function(G){return i(vt,G.a,D)},A)}),v=i(x,_,i(I,q$,l)),g=re(a,y)||!re(a,y)&&re(v,_),k=e.az.cI;switch(k.$){case 0:return g?O(m(v)):y;case 1:var E=k.a.b$,C=k.a.b_;return i(vt,s,E)&&g?O(m(i($,v,C))):y;default:return y}}else return y}),N$=i(x,K,W("^(\\/)?([a-zA-Z][a-zA-Z0-9\\-]*)(?:\\s+([^<>]*?))?(\\/)?$")),R$=d(function(e,r){var n=r,t=e.az.cI;return t.$===2?y:i(fe,i(I$,e,n),ie(w(Ee,1,N$,n.z)))}),T$=d(function(e,r){var n=r.g;if(n.$===5&&!n.a){var t=n.b;return re(e.aQ,t.aQ)}else return!1}),D$=d(function(e,r){var n=r.g;if(n.$)return!1;var t=n.a;return re(t?r.e-1:r.e,e.e)}),B$=function(e){var r=e.g;switch(r.$){case 1:return!0;case 2:return!0;default:return!1}},no=d(function(e,r){var n=r.g;if(n.$===6){var t=n.a,a=n.b,o=a.a,s=a.b,u=e.g;if(u.$===6){var l=u.a,f=u.b,p=f.a,m=f.b;return re(t,l)?re(o,s)||re(p,m)?!!i(Pn,3,e.e+r.e):!0:!1}else return!1}else return!1}),L$=b(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),F$=function(e){return i(vt,e.aQ,L$)},U$={$:1},H$={$:7},Dn=function(e){return T(e,{i:_e(e.i)})},$a=d(function(e,r){return{b7:e.dC+e.e,d:_,bT:e.dC,z:"",aC:0,_:0,aT:r}}),ju=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b;if(re(t.g,Fr)||re(t.g,H$)&&n.az.cQ)return ju(function(s){return c(a,s)}(T(n,{d:i(M,i($a,t,U$),n.d)})));var o=c(a,i(Xe,n,t));e=o;continue e}else return Dn(n)}},to=d(function(e,r){var n=r.d;if(n.b){var t=n.a;return c(i(Dt,function(a){return ae(a.dC,t.b7)>-1},e),r)}else return c(e,r)}),At=function(e){if(e.$)return y;var r=e.a;return O(r)},z$=ve(function(e,r,n,t){var a=t.a,o=t.c;return function(s){if(s.$===1){var u=s.a;return r?At(s):i(R$,T(n,{i:o}),u)}else return At(s)}(i(Lr,function(s){return T(n,{d:i(M,s,n.d),i:o})},i(pe,M$,k$(mr(Bn,n,function(s){return s},gu,a,e,_)))))}),va=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;switch(o.$){case 0:var s=o.a;return va(function(l){return c(a,l)}(i(x,i(Xe,n,t),i(I,i(J$,t,n),i(Qr,D$(t),n.i)))));case 4:var s=o.a;return va(function(l){return c(a,l)}(i(A$,i(F,function(l){return l.g},Gd(Ct("<"))),i(x,n,i(fe,w(z$,t,s,n),i(Qr,i(F,function(l){return l.g},zm(Ct("<"))),n.i))))));default:var u=c(a,i(Xe,n,t));e=u;continue e}}else return Dn(n)}},J$=P(function(e,r,n){var t=n.a,a=n.c,o=re(t.g,hu(!0))?T(t,{dC:t.dC+1,e:t.e-1}):t;return T(r,{d:i(M,mr(Bn,r,xu,gu,o,e,_),r.d),i:a})}),ba=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===6){var s=o.a,u=o.b,l=u.a,f=u.b;if(re(l,f)){if(f&&(s!=="_"||f===1))return ba(i(x,c(a,i(Xe,n,t)),i(I,w(ao,t,a,n),i(Qr,no(t),n.i))));var p=c(a,n);e=p;continue e}else if(ae(l,f)<0){var p=c(a,i(Xe,n,t));e=p;continue e}else return ba(i(x,c(a,n),i(I,w(ao,t,a,n),i(Qr,no(t),n.i))))}else{var p=c(a,i(Xe,n,t));e=p;continue e}}else return Dn(n)}},ao=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c,u=a.e-e.e,l=u?u>0?{a_:e,aN:T(a,{dC:a.dC+u,e:e.e}),a9:i(M,T(a,{e:u}),s),be:r}:{a_:T(e,{e:a.e}),aN:a,a9:s,be:i(M,T(e,{dC:e.dC+a.e,e:-u}),r)}:{a_:e,aN:a,a9:s,be:r},f=mr(Bn,n,function(p){return p},$$(l.aN.e),l.aN,l.a_,_e(o));return c(l.be,T(n,{d:i(M,f,n.d),i:l.a9}))}),ha=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===5){var s=o.a,u=o.b;return F$(u)||!s?ha(function(f){return c(a,f)}(i(Mt,n,i($a,t,da(u))))):ha(i(x,function(f){return c(a,f)}(i(Mt,n,i($a,t,da(u)))),i(I,w(W$,t,n,u),i(Qr,T$(u),a))))}else{var l=c(a,i(Xe,n,t));e=l;continue e}}else return Dn(n)}},W$=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c;return c(s,T(r,{d:i(M,mr(Bn,r,function(u){return u},da(n),e,a,o),r.d)}))}),Cu=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===3&&o.a==="]")return Cu(i(x,c(a,n),i(fe,w(K$,t,a,n),i(Qr,B$,n.i))));var s=c(a,i(Xe,n,t));e=s;continue e}else return Dn(n)}},K$=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c,u=function(v){return mr(Bn,n,function(g){return g},v?fi(c("",y)):pi(c("",y)),a,e,_e(o))},l=c(r,T(n,{i:Z(o,s)})),f=i(br,e.dC+1,n.I),p=function(v){var g=function(k){var E=k.g;return E.$===1?T(k,{g:fa(!1)}):k};return T(v,{i:i(ne,g,v.i)})},m=function(v){return Te(f,u(v),T(n,{i:s}))},$=a.g;switch($.$){case 2:return At(i(pe,function(v){return $e(l)},i(Lr,to(r),i(Zi,ro,i(pa,function(v){return 0},i(pe,Xi,Yi(m(!1))))))));case 1:return $.a?At(i(pe,function(v){return $e(l)},i(Lr,to(r),i(Lr,p,i(Zi,ro,i(pa,function(v){return 0},i(pe,Xi,Yi(m(!0))))))))):O(l);default:return y}}),Bn=Nn(function(e,r,n,t,a,o){var s=t.dC+t.e,u=a.dC,l=t.dC,f=a.dC+a.e,p={b7:f,d:_,bT:l,z:r(w(Be,s,u,e.I)),aC:u,_:s,aT:n},m=i(ne,function($){var v=$;return i(fu,p,v)},$i()(T(e,{d:_,i:o})).d);return T(p,{d:m})});function $i(){return i(F,un(va),i(F,un(ha),i(F,un(Cu),i(F,un(ba),un(ju)))))}var Mu=$i();$i=function(){return Mu};var io=P(function(e,r,n){return $n(qd(Vd(Mu(d$(w(xd,e,r,kt(n)))))).d)}),Q$=ve(function(e,r,n,t){var a=i(x,yd,e);switch(t.$){case 2:var s=t.a,o=t.b;return w(ui,s,o,w(io,a,n,s));case 4:var s=t.a,u=w(io,a,n,s);return u.b&&u.a.$===5&&!u.b.b?(u.a,Ji(u)):r?i(Tt,s,u):Ji(u);case 5:var m=t.a;return Mn(w(it,e,!0,c(n,m)));case 6:var l=t.a,f=t.b;return i(pr,l,function($){return i(ne,$,f)}(i(Ls,i(it,e,l.ae),function($){return c(n,$)})));case 8:var p=t.a,m=t.b;return i(mu,p,w(it,e,!0,c(n,m)));default:return t}}),it=P(function(e,r,n){var t=n.a,a=n.b;return i(ne,w(Q$,e,r,t),a)}),ln=d(function(e,r){var n=r.a,t=r.b;return c(n,e(t))}),G$=d(function(e,r){var n=i(br,r.bw,e);return i(tn,si,n)?y:O(n)}),Z$=d(function(e,r){var n=i(xe,e,r);return!n.$}),Y$=d(function(e,r){return i(Z$,r.an,e)?e:w(nn,r.an,c(r.bg,r.bx),e)}),X$=function(e){var r=e.d3;if(r.b&&!r.a.$&&r.b.b&&r.b.b.b&&r.b.b.b.b&&r.b.b.b.b.b&&r.b.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a,o=t.b,s=o.a,u=o.b,l=u.a,f=u.b,p=f.a,m=f.b,$=m.a,v=function(k){return{an:n,bw:J(e.cq),bx:On(b([l,p,$])),bg:k}},g=On(b([a,s]));return i(I,v,g)}else return y},ev="\\s*(?:<([^<>\\s]*)>|([^\\s]*))",rv=i(x,K,W("^\\s*\\[("+(yu+(")\\]:"+(ev+(wu+"\\s*(?![^\\n])")))))),nv=function(e){return i(fe,function(r){return r.bg===""||r.an===""?y:O(r)},i(I,function(r){return T(r,{an:Eu(r.an)})},i(fe,X$,ie(w(Ee,1,rv,e)))))},tv=d(function(e,r){e:for(;;){var n=nv(r);if(n.$)return c(e,O(r));var t=n.a,a=i(Y$,e,t),o=i(G$,r,t);if(o.$)return c(a,y);var s=o.a,u=a,l=s;e=u,r=l;continue e}}),av=d(function(e,r){return w(ii,nn,r,e)}),ot=function(e){return i(Ae,iv,c(e,_))},iv=d(function(e,r){var n=r.a,t=r.b;switch(e.$){case 4:var a=e.a,o=i(tv,ur,a),s=o.a,u=o.b,$=i(av,s,n);if(u.$)return c($,t);var l=u.a;return c($,i(M,i(Tt,l,_),t));case 6:var f=e.a,p=e.b,m=w(Ae,d(function(E,C){var A=C.a,D=C.b;return i(ln,function(G){return i(M,G,D)},i(ot,A,E))}),c(n,_),p),$=m.a,v=m.b;return c($,i(M,i(pr,f,v),t));case 5:var k=e.a;return i(ln,function(E){return i(M,E,t)},i(ln,Mn,i(ot,n,k)));case 8:var g=e.a,k=e.b;return i(ln,function(E){return i(M,E,t)},i(ln,mu(g),i(ot,n,k)));default:return c(n,i(M,e,t))}}),ov=function(e){return i(F,hd,i(F,function(r){return i(cu,r,_)},i(F,ot(ur),i(it,e,!0))))},sv=te("blockquote"),ga=te("code"),uv=te("h1"),lv=te("h2"),cv=te("h3"),mv=te("h4"),pv=te("h5"),fv=te("h6"),dv=te("hr"),oo=te("ol"),$v=te("p"),so=te("pre"),vv=function(e){return i(Ue,"start",jn(e))},uo=Ue("alt"),bv=d(function(e,r){return i(nr,tm(e),Yo(r))}),hv=bv,gv=function(e){var r=e.a,n=e.b;return i(hv,r,i(x,r,n))},kv=ne(gv),wv=te("br"),lo=te("em"),Cr=function(e){return w(Ae,_v,"",e)},_v=d(function(e,r){switch(e.$){case 0:var n=e.a;return Z(r,n);case 1:return r+" ";case 2:var n=e.a;return Z(r,n);case 3:var t=e.c;return Z(r,Cr(t));case 4:var t=e.c;return Z(r,Cr(t));case 5:var t=e.c;return Z(r,Cr(t));case 6:var t=e.b;return Z(r,Cr(t));default:var t=e.b;return Z(r,Cr(t))}}),ka=function(e){return i(Ue,"href",am(e))},co=te("img"),yv=function(e){return te(nm(e))},xv=yv,mo=function(e){return i(Ue,"src",Yo(e))},po=te("strong"),fo=Ue("title"),Au=d(function(e,r){var n=i(x,Au(y),e);switch(r.$){case 0:var t=r.a;return oe(t);case 1:return i(wv,_,_);case 2:var a=r.a;return i(ga,_,b([oe(a)]));case 3:var s=r.a,u=r.b,m=r.c;if(u.$)return i(gt,b([ka(s)]),i(ne,n,m));var o=u.a;return i(gt,b([ka(s),fo(o)]),i(ne,n,m));case 4:var s=r.a,u=r.b,m=r.c;if(u.$)return i(co,b([uo(Cr(m)),mo(s)]),_);var o=u.a;return i(co,b([uo(Cr(m)),mo(s),fo(o)]),_);case 5:var l=r.a,f=r.b,m=r.c;return w(xv,l,kv(f),i(ne,n,m));case 6:var p=r.a,m=r.b;switch(p){case 1:return i(lo,_,i(ne,n,m));case 2:return i(po,_,i(ne,n,m));default:return p-2>0?i(po,_,function($){return i(M,$,_)}(n(i(pu,p-2,m)))):i(lo,_,i(ne,n,m))}default:var m=r.b;return oe("")}}),Ev=Au(y),Pu=P(function(e,r,n){var t=i(x,Ev,r),a=i(x,i(Pu,y,r),e);switch(n.$){case 0:return _;case 2:var o=n.b,g=n.c,s=function(){switch(o){case 1:return uv(_);case 2:return lv(_);case 3:return cv(_);case 4:return mv(_);case 5:return pv(_);default:return fv(_)}}();return b([s(i(ne,t,g))]);case 1:return b([i(dv,_,_)]);case 4:var g=n.b;return b([i($v,_,i(ne,t,g))]);case 3:if(n.a.$===1){var u=n.a,$=u.b,l=n.b,f=function(C){return b([i(so,_,b([i(ga,C,b([oe(l)]))]))])},p=$.bv;if(p.$)return f(_);var m=p.a;return f(b([q("language-"+m)]))}else{n.a;var l=n.b;return b([i(so,_,b([i(ga,_,b([oe(l)]))]))])}case 5:var k=n.a;return function(E){return i(M,E,_)}(i(sv,_,tt(i(ne,a,k))));case 6:var $=n.a,v=n.b;return function(E){return i(M,E,_)}(function(){var E=$.aT;if(E.$===1){var C=E.a;return oo(C===1?_:b([vv(C)]))}else return Ts(_)}()(i(ne,i(F,ne(a),i(F,tt,Is(_))),v)));case 7:var g=n.a;return i(ne,t,g);default:n.a;var k=n.b;return function(E){return i(M,E,_)}(i(Y,_,i(M,oe("Unhandled custom block."),tt(i(ne,a,k)))))}}),jv=i(Pu,y,y),Cv=d(function(e,r){return tt(i(ne,jv,i(ov,e,r)))}),Mv=d(function(e,r){var n=i(fe,function(a){return a.$7},i(xe,r,e.Q));if(n.$===1)return oe("");var t=n.a;return i(Y,b([q("px-6 py-3 mb-4 border-b bg-orange-50")]),b([i(Y,b([q("prose max-w-full")]),i(Cv,y,t))]))}),wa=te("label"),Gr=te("span"),Vn=function(e){return{$:0,a:e}},Av={$:5},Pv=Da,vi=d(function(e,r){return i(Zo,e,Pv(r))}),Ne=vi("disabled"),Ov=function(e){return{$:1,a:e}},Vv=Qe(function(e,r,n,t,a){return{dl:n,cl:r,cw:e,a7:t,bc:a}}),Sv=function(e){return b([e])},qv=function(e){var r=i(fs,function(n){return n==="0"},li(i(Ds,e.cl,Sv(e.dl))));return r?1:e.cw<0?2:0},_a=zl,Sn=function(e){return e<0?-e:e},Iv=d(function(e,r){var n=J(r),t=ae(n,e)<0?Sn(e-n):0;return Z(r,i(Wr,t,"0"))}),Pt=d(function(e,r){return e<1?r:w(Be,0,-e,r)}),Ou=function(e){return i(An,1,e)!=="0"?e:Ou(i(Pt,1,e))},Nv=d(function(e,r){var n=e.dl;switch(n.$){case 1:return Ou(r);case 2:return r;default:var t=n.a;return i(Iv,t,r)}}),qn=Uo,Rv=d(function(e,r){var n=i(ri,function(t){return t!=="0"&&t!=="."},Zs(r));return Z(e&&n?"-":"",r)}),Vu=function(e){var r=e.a,n=e.b;if(r==="9"){var t=rn(n);if(t.$===1)return"01";var a=t.a;return i(ma,"0",Vu(a))}else{var o=en(r);return o>=48&&o<57?i(ma,xt(o+1),n):"0"}},Tv=Rl,Dv=Bl,ya=P(function(e,r,n){return Z(n,i(Wr,e-J(n),Jr(r)))}),$o=Jl,Su=function(e){var r=i(Rn,".",e);if(r.b)if(r.b.b){var n=r.a,t=r.b,a=t.a;return c(n,a)}else{var n=r.a;return c(n,"0")}else return c("0","0")},Bv=d(function(e,r){var n=r.a,t=r.b;return c(e(n),t)}),Lv=function(e){var r=i(Rn,"e",qn(Sn(e)));if(r.b)if(r.b.b){var n=r.a,t=r.b,a=t.a,o=i(x,0,It(i(Es,"+",a)?i(br,1,a):a)),s=Su(n),u=s.a,l=s.b,f=Z(u,l),p=o<0?i(x,"0",i(I,function(m){var $=m.a,v=m.b;return $+("."+v)},i(I,Bv(Jr),rn(Z(i(Wr,Sn(o),"0"),f))))):w(ya,o+1,"0",f);return Z(e<0?"-":"",p)}else{var n=r.a;return Z(e<0?"-":"",n)}else return""},Fv=P(function(e,r,n){if(Tv(n)||Dv(n))return qn(n);var t=n<0,a=Su(Lv(Sn(n))),o=a.a,s=a.b,u=J(o)+r,l=Z(i(Wr,-u+1,"0"),w(ya,u,"0",Z(o,s))),f=J(l),p=i(_s,1,u),m=i(e,t,w(Be,p,f,l)),$=w(Be,0,p,l),v=m?$o(i(x,"1",i(I,Vu,rn($o($))))):$,g=J(v),k=v==="0"?v:r<=0?Z(v,i(Wr,Sn(r),"0")):ae(r,J(s))<0?w(Be,0,g-r,v)+("."+w(Be,g-r,g,v)):Z(o+".",w(ya,r,"0",s));return i(Rv,t,k)}),vo=Fv(d(function(e,r){var n=rn(r);if(n.$===1)return!1;if(n.a.a==="5")return n.a.b===""?(n.a,!e):(n.a,!0);var t=n.a,a=t.a;return function(o){return o>53&&e||o>=53&&!e}(en(a))})),Uv=function(e){if(e.b){e.a;var r=e.b;return O(r)}else return y},Hv=d(function(e,r){var n=function(){var s=e.dl;switch(s.$){case 1:var u=s.a;return vo(u);case 0:return qn;default:var l=s.a;return vo(l)}}(),t=i(Rn,".",n(r)),a=function(){var s=Uv(t);if(s.$)return"";var u=s.a;return i(x,"",ie(u))}(),o=i(x,"",ie(t));return c(o,a)}),zv=function(e){var r=J(e)>3?i(An,3,e):e,n=function(t){return J(t)>2?i(M,i(An,2,t),n(i(Pt,2,t))):J(t)?b([t]):_};return _e(i(M,r,n(i(Pt,3,e))))},Jv=function(e){var r=function(n){return J(n)>3?i(M,i(An,3,n),r(i(Pt,3,n))):b([n])};return _e(r(e))},Wv=d(function(e,r){return e?zv(i(_a,ft,r)):Jv(i(_a,ft,r))}),Kv=d(function(e,r){var n=i(Hv,e,r),t=i(Wv,e.bd,i(_a,ft,n.a)),a=i(Nv,e,n.b),o=S(Vv,r,t,a,"",""),s=qv(o);switch(s){case 2:return T(o,{a7:e.bC,bc:e.bD});case 0:return T(o,{a7:e.cA,bc:e.cB});default:return T(o,{a7:e.c3,bc:e.c4})}}),Qv=d(function(e,r){return r===""?"":Z(e.al,r)}),Gv=d(function(e,r){var n=Qv(e),t=i(Mr,e.ah,r.cl),a=n(r.dl);return li(b([r.a7,t,a,r.bc]))}),bi=d(function(e,r){return i(Gv,e,i(Kv,e,r))}),hi=function(e){return{$:2,a:e}},Zv=function(e){return{$:0,a:e}},Yv={al:".",dl:Zv(0),bC:"â",bD:"",cA:"",cB:"",bd:0,ah:"",c3:"",c4:""},gi=T(Yv,{al:",",dl:hi(3),ah:"â¯"}),qu=function(e){return bi(T(gi,{dl:Ov(e)}))},ze=te("input"),Xv=function(e){return c(e,!0)},eb=function(e){return{$:1,a:e}},rb=d(function(e,r){return i(Ns,e,eb(r))}),nb=i(bt,b(["target","value"]),ke),jr=function(e){return i(rb,"input",i(he,Xv,i(he,e,nb)))},Qn=Ue("placeholder"),tb=sc,ir=Ue("type"),xa=Ue("value"),bo=vi("checked"),ab=i(bt,b(["target","checked"]),ti),ho=function(e){return i(Rs,"change",i(he,e,ab))},Qt=P(function(e,r,n){return i(Y,b([q("form-control")]),b([i(wa,b([q("label cursor-pointer")]),b([i(Gr,b([q("label-text")]),b([oe("Oui")])),i(ze,b([q("radio"),ir("radio"),bo(r),Ne(n),ho(function(t){return Vn(c(e,kn(t)))})]),_)])),i(wa,b([q("label cursor-pointer")]),b([i(Gr,b([q("label-text")]),b([oe("Non")])),i(ze,b([q("radio"),ir("radio"),bo(!r),Ne(n),ho(function(t){return Vn(c(e,kn(!t)))})]),_)]))]))}),ib=P(function(e,r,n){return i(x,n,i(fe,function(t){return t.cU},i(xe,r+(" . "+n),e)))}),Iu=function(e){switch(e.$){case 0:var r=e.a;return r;case 1:var n=e.a;return i(bi,T(gi,{dl:hi(1)}),n);case 2:var t=e.a;return t?"oui":"non";default:return""}},ob=te("option"),sb=te("select"),ub=vi("selected"),go=Qe(function(e,r,n,t,a){return i(sb,b([jr(function(o){return Vn(c(r,ni(o)))}),q("select select-bordered"),Ne(a)]),i(ne,function(o){return i(ob,b([xa(o),ub(re(Iu(t),o))]),b([oe(w(ib,e,r,o))]))},n))}),lb=P(function(e,r,n){var t=r.a,a=r.b,o=function(g){var k=tb(g);if(k.$)return hr(g)?Av:Vn(c(t,ni(g)));var E=k.a;return Vn(c(t,Ss(E)))},s=i(I,function(g){var k=g.aM;return k},i(xe,t,e.U)),u=Te(a.dv,i(xe,t,e.aP),s);e:for(;;){r:for(;;){n:for(;;){t:for(;;)if(u.b.$===1){if(u.c.$)break t;switch(u.c.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break r;u.b;var l=u.c.a.a;return i(ze,b([ir("number"),Ne(n),q("input input-bordered"),Qn(i(qu,1,l)),jr(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break r;u.b;var f=u.c.a.a;return i(ze,b([ir("text"),Ne(n),q("input input-bordered"),Qn(f),jr(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break r;u.b;var p=u.c.a.a;return w(Qt,t,p,n);default:if(!u.a.$&&u.a.a.$===4)break r;break t}}else switch(u.b.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break e;var l=u.b.a.a;return i(ze,b([ir("number"),Ne(n),q("input input-bordered"),xa(qn(l)),jr(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break e;var f=u.b.a.a;return i(ze,b([ir("text"),Ne(n),q("input input-bordered"),xa(f),jr(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break e;var p=u.b.a.a;return w(Qt,t,p,n);default:if(u.c.$){if(!u.a.$&&u.a.a.$===4)break e;break n}else switch(u.c.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var l=u.c.a.a;return i(ze,b([ir("number"),Ne(n),q("input input-bordered"),Qn(qn(l)),jr(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var f=u.c.a.a;return i(ze,b([ir("text"),Ne(n),q("input input-bordered"),Qn(f),jr(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var p=u.c.a.a;return w(Qt,t,p,n);default:if(!u.a.$&&u.a.a.$===4)break e;break n}}return i(ze,b([q("input"),Ne(!0)]),_)}return u.b.a,i(ze,b([q("input"),Ne(!0)]),_)}var $=u.a.a.a.cC;u.b;var m=u.c.a;return S(go,e.Q,t,$,m,n)}var $=u.a.a.a.cC,v=u.b.a;return S(go,e.Q,t,$,v,n)}),Nu=function(e){return oe(" "+i(x,"",e.ej))},cb=P(function(e,r,n){var t=r.a,a=r.b;return i(x,oe(""),i(I,function(o){return i(Y,_,b([i(wa,b([q("form-control")]),b([i(Y,b([q("label")]),b([i(Gr,b([q("label-text text-md font-semibold")]),b([oe(o)])),i(Gr,b([q("label-text-alt text-md")]),b([Nu(a)]))])),w(lb,e,c(t,a),n)]))]))},a.cU))}),mb=d(function(e,r){return i(Y,b([q("grid grid-cols-1 lg:grid-cols-2 gap-6 px-6")]),i(Me,function(n){var t=c(i(xe,n,e.Q),i(xe,n,e.U));if(!t.a.$&&!t.b.$){var a=t.a.a,o=t.b.a;return O(w(cb,e,c(n,a),o.cm))}else return y},r))}),pb=function(e){return i(Y,b([q("bg-neutral border-x border-b border-base-200 rounded-md")]),b([function(){var r=i(x,"",e.aw),n=i(x,_,i(xe,r,e.a8));return i(Y,b([q("mb-8")]),b([i(Y,b([q("pl-6 bg-base-200 font-semibold p-2 border border-base-300 rounded-t-md"),gf(r)]),b([oe(oi(r))])),i(Mv,e,r),i(mb,e,n)]))}()]))},fb=nr("class"),db=nr("d"),$b=nr("fill"),Ru=Qo("http://www.w3.org/2000/svg"),vb=Ru("path"),bb=nr("stroke-linecap"),hb=nr("stroke-linejoin"),gb=nr("stroke-width"),kb=Ru("svg"),wb=nr("viewBox"),_b=i(kb,b([$b("none"),wb("0 0 24 24"),fb("stroke-current shrink-0 h-6 w-6")]),b([i(vb,b([bb("round"),hb("round"),gb("2"),db("M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z")]),_)])),ko=function(e){if(e.$)return oe("");var r=e.a;return i(Y,b([q("alert alert-error")]),b([_b,i(Gr,_,b([oe(hs(r))]))]))},yb=function(e){if(e.$===1){var r=e.a;return O(r)}else return y},xb=Zc,Eb=xb,jb="resultats . bilan total",Cb=function(e){var r=i(x,0,i(fe,function(t){var a=t.aM;return yb(a)},i(xe,jb,e.U))),n=i(Me,function(t){return i(fe,function(a){var o=a.aM;if(o.$===1){var s=o.a;return O({b2:t,bG:s/r*100})}else return y},i(xe,t,e.U))},e.aI);return i(Y,b([q("stats stats-vertical border border-base-200 w-full rounded-md bg-neutral mt-4")]),i(ne,function(t){var a=t.b2,o=t.bG,s=i(bi,T(gi,{dl:hi(0)}),o)+"%";return i(Y,b([q("stat py-2")]),b([i(Y,b([q("stat-title")]),b([oe(oi(a))])),i(Y,b([q("h-8 flex items-center")]),b([i(Y,b([q("stat-value text-primary w-20 text-2xl")]),b([oe(i(qu,1,o)+" %")])),i(Y,b([q("bg-secondary rounded-lg h-2"),i(Eb,"width",s)]),_)]))]))},_e(i(ci,function(t){return t.bG},n))))},Mb=te("header"),Ab=Ue("target"),Pb=i(Mb,_,b([i(Y,b([q("flex items-center justify-between w-full px-8 mb-4 border-b border-base-200 text-primary bg-neutral")]),b([i(Y,b([q("flex items-center")]),b([i(Y,b([q("text-3xl font-bold text-dark m-2")]),b([oe("EkoFest")])),i(Gr,b([q("badge badge-accent badge-outline")]),b([oe("alpha")]))])),i(gt,b([q("hover:text-primary cursor-pointer"),ka("https://ekofest.github.io/publicodes-evenements"),Ab("_blank")]),b([oe("Consulter le modÃ¨le de calcul â§")]))]))])),Ob=d(function(e,r){var n=i(xe,r,e);if(n.$)return r;var t=n.a;return i(x,r,t.cU)}),Vb="resultats",Sb=function(e){if(e.$)return oe("");var r=e.a.aM;return oe(Iu(r))},qb=function(e){var r=i(Me,function(n){var t=n.a,a=n.b,o=Ms(t);if(o.b&&o.b.b&&!o.b.b.b){var s=o.a;return o.b,re(s,Vb)?O(c(t,a)):y}else return y},Ur(e.Q));return i(Y,b([q("stats stats-vertical border w-full rounded-md bg-neutral border-base-200")]),i(ne,function(n){var t=n.a,a=n.b;return i(Y,b([q("stat")]),b([i(Y,b([q("stat-title")]),b([oe(i(Ob,e.Q,t))])),i(Y,b([q("flex items-baseline")]),b([i(Y,b([q("stat-value text-primary")]),b([Sb(i(xe,t,e.U))])),i(Y,b([q("stat-desc text-primary ml-2 text-base")]),b([Nu(a)]))]))]))},r))},Ib=function(e){return i(Y,_,b([Pb,zi(e.Q)||zi(e.U)?i(Y,b([q("flex w-full justify-center")]),b([ko(e.av),i(Y,b([q("loading loading-lg text-primary")]),_)])):i(Y,b([q("flex flex-col-reverse lg:grid lg:grid-cols-3")]),b([i(Y,b([q("p-4 lg:pl-8 lg:pr-4 lg:col-span-2")]),b([w(ff,hf,e.aI,e.aw),i(Kn,pb,e)])),i(Kn,ko,e.av),i(Y,b([q("flex flex-col p-4 lg:pl-4 lg:col-span-1 lg:pr-8")]),b([i(Kn,qb,e),i(Kn,Cb,e)]))]))]))},Nb=mp({dD:zp,d4:Xp,ek:cf,em:Ib});const Rb={Main:{init:Nb(Cn)(0)}};var Tb=Object.create,ki=Object.defineProperty,Db=Object.getOwnPropertyDescriptor,Tu=Object.getOwnPropertyNames,Bb=Object.getPrototypeOf,Lb=Object.prototype.hasOwnProperty,Du=(e,r)=>function(){return r||(0,e[Tu(e)[0]])((r={exports:{}}).exports,r),r.exports},Fb=(e,r)=>{for(var n in r)ki(e,n,{get:r[n],enumerable:!0})},Ub=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Tu(r))!Lb.call(e,a)&&a!==n&&ki(e,a,{get:()=>r[a],enumerable:!(t=Db(r,a))||t.enumerable});return e},Bu=(e,r,n)=>(n=e!=null?Tb(Bb(e)):{},Ub(r||!e||!e.__esModule?ki(n,"default",{value:e,enumerable:!0}):n,e)),Hb=Du({"../../node_modules/nearley/lib/nearley.js"(e,r){(function(n,t){typeof r=="object"&&r.exports?r.exports=t():n.nearley=t()})(e,function(){function n(p,m,$){return this.id=++n.highestId,this.name=p,this.symbols=m,this.postprocess=$,this}n.highestId=0,n.prototype.toString=function(p){var m=typeof p>"u"?this.symbols.map(f).join(" "):this.symbols.slice(0,p).map(f).join(" ")+" â "+this.symbols.slice(p).map(f).join(" ");return this.name+" â "+m};function t(p,m,$,v){this.rule=p,this.dot=m,this.reference=$,this.data=[],this.wantedBy=v,this.isComplete=this.dot===p.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(p){var m=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=p,m.isComplete&&(m.data=m.build(),m.right=void 0),m},t.prototype.build=function(){var p=[],m=this;do p.push(m.right.data),m=m.left;while(m.left);return p.reverse(),p},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,u.fail))};function a(p,m){this.grammar=p,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}a.prototype.process=function(p){for(var m=this.states,$=this.wants,v=this.completed,g=0;g<m.length;g++){var k=m[g];if(k.isComplete){if(k.finish(),k.data!==u.fail){for(var E=k.wantedBy,C=E.length;C--;){var A=E[C];this.complete(A,k)}if(k.reference===this.index){var D=k.rule.name;(this.completed[D]=this.completed[D]||[]).push(k)}}}else{var D=k.rule.symbols[k.dot];if(typeof D!="string"){this.scannable.push(k);continue}if($[D]){if($[D].push(k),v.hasOwnProperty(D))for(var G=v[D],C=0;C<G.length;C++){var je=G[C];this.complete(k,je)}}else $[D]=[k],this.predict(D)}}},a.prototype.predict=function(p){for(var m=this.grammar.byName[p]||[],$=0;$<m.length;$++){var v=m[$],g=this.wants[p],k=new t(v,0,this.index,g);this.states.push(k)}},a.prototype.complete=function(p,m){var $=p.nextState(m);this.states.push($)};function o(p,m){this.rules=p,this.start=m||this.rules[0].name;var $=this.byName={};this.rules.forEach(function(v){$.hasOwnProperty(v.name)||($[v.name]=[]),$[v.name].push(v)})}o.fromCompiled=function(v,m){var $=v.Lexer;v.ParserStart&&(m=v.ParserStart,v=v.ParserRules);var v=v.map(function(k){return new n(k.name,k.symbols,k.postprocess)}),g=new o(v,m);return g.lexer=$,g};function s(){this.reset("")}s.prototype.reset=function(p,m){this.buffer=p,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(p,m){var $=this.buffer;if(typeof $=="string"){var v=$.split(`
`).slice(Math.max(0,this.line-5),this.line),g=$.indexOf(`
`,this.index);g===-1&&(g=$.length);var k=this.index-this.lastLineBreak,E=String(this.line).length;return m+=" at line "+this.line+" col "+k+`:

`,m+=v.map(function(A,D){return C(this.line-v.length+D+1,E)+" "+A},this).join(`
`),m+=`
`+C("",E+k)+`^
`,m}else return m+" at index "+(this.index-1);function C(A,D){var G=String(A);return Array(D-G.length+1).join(" ")+G}};function u(p,m,$){if(p instanceof o)var v=p,$=m;else var v=o.fromCompiled(p,m);this.grammar=v,this.options={keepHistory:!1,lexer:v.lexer||new s};for(var g in $||{})this.options[g]=$[g];this.lexer=this.options.lexer,this.lexerState=void 0;var k=new a(v,0);this.table=[k],k.wants[v.start]=[],k.predict(v.start),k.process(),this.current=0}u.fail={},u.prototype.feed=function(p){var m=this.lexer;m.reset(p,this.lexerState);for(var $;;){try{if($=m.next(),!$)break}catch(me){var E=new a(this.grammar,this.current+1);this.table.push(E);var v=new Error(this.reportLexerError(me));throw v.offset=this.current,v.token=me.token,v}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var k=this.current+1,E=new a(this.grammar,k);this.table.push(E);for(var C=$.text!==void 0?$.text:$.value,A=m.constructor===s?$.value:$,D=g.scannable,G=D.length;G--;){var je=D[G],ge=je.rule.symbols[je.dot];if(ge.test?ge.test(A):ge.type?ge.type===$.type:ge.literal===C){var tr=je.nextState({data:A,token:$,isToken:!0,reference:k-1});E.states.push(tr)}}if(E.process(),E.states.length===0){var v=new Error(this.reportError($));throw v.offset=this.current,v.token=$,v}this.options.keepHistory&&(g.lexerState=m.save()),this.current++}return g&&(this.lexerState=m.save()),this.results=this.finish(),this},u.prototype.reportLexerError=function(p){var m,$,v=p.token;return v?(m="input "+JSON.stringify(v.text[0])+" (lexer error)",$=this.lexer.formatError(v,"Syntax error")):(m="input (lexer error)",$=p.message),this.reportErrorCommon($,m)},u.prototype.reportError=function(p){var m=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),$=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon($,m)},u.prototype.reportErrorCommon=function(p,m){var $=[];$.push(p);var v=this.table.length-2,g=this.table[v],k=g.states.filter(function(C){var A=C.rule.symbols[C.dot];return A&&typeof A!="string"});if(k.length===0)$.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,$);else{$.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var E=k.map(function(C){return this.buildFirstStateStack(C,[])||[C]},this);E.forEach(function(C){var A=C[0],D=A.rule.symbols[A.dot],G=this.getSymbolDisplay(D);$.push("A "+G+" based on:"),this.displayStateStack(C,$)},this)}return $.push(""),$.join(`
`)},u.prototype.displayStateStack=function(p,m){for(var $,v=0,g=0;g<p.length;g++){var k=p[g],E=k.rule.toString(k.dot);E===$?v++:(v>0&&m.push("    ^ "+v+" more lines identical to this"),v=0,m.push("    "+E)),$=E}},u.prototype.getSymbolDisplay=function(p){return l(p)},u.prototype.buildFirstStateStack=function(p,m){if(m.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var $=p.wantedBy[0],v=[p].concat(m),g=this.buildFirstStateStack($,v);return g===null?null:[p].concat(g)},u.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},u.prototype.restore=function(p){var m=p.index;this.current=m,this.table[m]=p,this.table.splice(m+1),this.lexerState=p.lexerState,this.results=this.finish()},u.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},u.prototype.finish=function(){var p=[],m=this.grammar.start,$=this.table[this.table.length-1];return $.states.forEach(function(v){v.rule.name===m&&v.dot===v.rule.symbols.length&&v.reference===0&&v.data!==u.fail&&p.push(v)}),p.map(function(v){return v.data})};function l(p){var m=typeof p;if(m==="string")return p;if(m==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function f(p){var m=typeof p;if(m==="string")return p;if(m==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:u,Grammar:o,Rule:n}})}}),zb=Du({"../../node_modules/moo/moo.js"(e,r){(function(n,t){typeof define=="function"&&define.amd?define([],t):typeof r=="object"&&r.exports?r.exports=t():n.moo=t()})(e,function(){var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString,a=typeof new RegExp().sticky=="boolean";function o(h){return h&&t.call(h)==="[object RegExp]"}function s(h){return h&&typeof h=="object"&&!o(h)&&!Array.isArray(h)}function u(h){return h.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function l(h){var j=new RegExp("|"+h);return j.exec("").length-1}function f(h){return"("+h+")"}function p(h){if(!h.length)return"(?!)";var j=h.map(function(V){return"(?:"+V+")"}).join("|");return"(?:"+j+")"}function m(h){if(typeof h=="string")return"(?:"+u(h)+")";if(o(h)){if(h.ignoreCase)throw new Error("RegExp /i flag not allowed");if(h.global)throw new Error("RegExp /g flag is implied");if(h.sticky)throw new Error("RegExp /y flag is implied");if(h.multiline)throw new Error("RegExp /m flag is implied");return h.source}else throw new Error("Not a pattern: "+h)}function $(h,j){return h.length>j?h:Array(j-h.length+1).join(" ")+h}function v(h,j){for(var V=h.length,R=0;;){var H=h.lastIndexOf(`
`,V-1);if(H===-1||(R++,V=H,R===j)||V===0)break}var B=R<j?0:V+1;return h.substring(B).split(`
`)}function g(h){for(var j=Object.getOwnPropertyNames(h),V=[],R=0;R<j.length;R++){var H=j[R],B=h[H],Q=[].concat(B);if(H==="include"){for(var se=0;se<Q.length;se++)V.push({include:Q[se]});continue}var X=[];Q.forEach(function(L){s(L)?(X.length&&V.push(E(H,X)),V.push(E(H,L)),X=[]):X.push(L)}),X.length&&V.push(E(H,X))}return V}function k(h){for(var j=[],V=0;V<h.length;V++){var R=h[V];if(R.include){for(var H=[].concat(R.include),B=0;B<H.length;B++)j.push({include:H[B]});continue}if(!R.type)throw new Error("Rule has no type: "+JSON.stringify(R));j.push(E(R.type,R))}return j}function E(h,j){if(s(j)||(j={match:j}),j.include)throw new Error("Matching rules cannot also include states");var V={defaultType:h,lineBreaks:!!j.error||!!j.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var R in j)n.call(j,R)&&(V[R]=j[R]);if(typeof V.type=="string"&&h!==V.type)throw new Error("Type transform cannot be a string (type '"+V.type+"' for token '"+h+"')");var H=V.match;return V.match=Array.isArray(H)?H:H?[H]:[],V.match.sort(function(B,Q){return o(B)&&o(Q)?0:o(Q)?-1:o(B)?1:Q.length-B.length}),V}function C(h){return Array.isArray(h)?k(h):g(h)}var A=E("error",{lineBreaks:!0,shouldThrow:!0});function D(h,j){for(var V=null,R=Object.create(null),H=!0,B=null,Q=[],se=[],X=0;X<h.length;X++)h[X].fallback&&(H=!1);for(var X=0;X<h.length;X++){var L=h[X];if(L.include)throw new Error("Inheritance is not allowed in stateless lexers");if(L.error||L.fallback){if(V)throw!L.fallback==!V.fallback?new Error("Multiple "+(L.fallback?"fallback":"error")+" rules not allowed (for token '"+L.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+L.defaultType+"')");V=L}var be=L.match.slice();if(H)for(;be.length&&typeof be[0]=="string"&&be[0].length===1;){var yr=be.shift();R[yr.charCodeAt(0)]=L}if(L.pop||L.push||L.next){if(!j)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+L.defaultType+"')");if(L.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+L.defaultType+"')")}if(be.length!==0){H=!1,Q.push(L);for(var xr=0;xr<be.length;xr++){var Er=be[xr];if(o(Er)){if(B===null)B=Er.unicode;else if(B!==Er.unicode&&L.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Nr=p(be.map(m)),Ie=new RegExp(Nr);if(Ie.test(""))throw new Error("RegExp matches empty string: "+Ie);var on=l(Nr);if(on>0)throw new Error("RegExp has capture groups: "+Ie+`
Use (?: â¦ ) instead`);if(!L.lineBreaks&&Ie.test(`
`))throw new Error("Rule should declare lineBreaks: "+Ie);se.push(f(Nr))}}var Rr=V&&V.fallback,sn=a&&!Rr?"ym":"gm",zn=a||Rr?"":"|";B===!0&&(sn+="u");var kl=new RegExp(p(se)+zn,sn);return{regexp:kl,groups:Q,fast:R,error:V||A}}function G(h){var j=D(C(h));return new me({start:j},"start")}function je(h,j,V){var R=h&&(h.push||h.next);if(R&&!V[R])throw new Error("Missing state '"+R+"' (in token '"+h.defaultType+"' of state '"+j+"')");if(h&&h.pop&&+h.pop!=1)throw new Error("pop must be 1 (in token '"+h.defaultType+"' of state '"+j+"')")}function ge(h,j){var V=h.$all?C(h.$all):[];delete h.$all;var R=Object.getOwnPropertyNames(h);j||(j=R[0]);for(var H=Object.create(null),B=0;B<R.length;B++){var Q=R[B];H[Q]=C(h[Q]).concat(V)}for(var B=0;B<R.length;B++)for(var Q=R[B],se=H[Q],X=Object.create(null),L=0;L<se.length;L++){var be=se[L];if(be.include){var yr=[L,1];if(be.include!==Q&&!X[be.include]){X[be.include]=!0;var xr=H[be.include];if(!xr)throw new Error("Cannot include nonexistent state '"+be.include+"' (in state '"+Q+"')");for(var Er=0;Er<xr.length;Er++){var Nr=xr[Er];se.indexOf(Nr)===-1&&yr.push(Nr)}}se.splice.apply(se,yr),L--}}for(var Ie=Object.create(null),B=0;B<R.length;B++){var Q=R[B];Ie[Q]=D(H[Q],!0)}for(var B=0;B<R.length;B++){for(var on=R[B],Rr=Ie[on],sn=Rr.groups,L=0;L<sn.length;L++)je(sn[L],on,Ie);for(var zn=Object.getOwnPropertyNames(Rr.fast),L=0;L<zn.length;L++)je(Rr.fast[zn[L]],on,Ie)}return new me(Ie,j)}function tr(h){for(var j=typeof Map<"u",V=j?new Map:Object.create(null),R=Object.getOwnPropertyNames(h),H=0;H<R.length;H++){var B=R[H],Q=h[B],se=Array.isArray(Q)?Q:[Q];se.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+B+"')");j?V.set(X,B):V[X]=B})}return function(X){return j?V.get(X):V[X]}}var me=function(h,j){this.startState=j,this.states=h,this.buffer="",this.stack=[],this.reset()};me.prototype.reset=function(h,j){return this.buffer=h||"",this.index=0,this.line=j?j.line:1,this.col=j?j.col:1,this.queuedToken=j?j.queuedToken:null,this.queuedText=j?j.queuedText:"",this.queuedThrow=j?j.queuedThrow:null,this.setState(j?j.state:this.startState),this.stack=j&&j.stack?j.stack.slice():[],this},me.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},me.prototype.setState=function(h){if(!(!h||this.state===h)){this.state=h;var j=this.states[h];this.groups=j.groups,this.error=j.error,this.re=j.regexp,this.fast=j.fast}},me.prototype.popState=function(){this.setState(this.stack.pop())},me.prototype.pushState=function(h){this.stack.push(this.state),this.setState(h)};var ar=a?function(h,j){return h.exec(j)}:function(h,j){var V=h.exec(j);return V[0].length===0?null:V};me.prototype._getGroup=function(h){for(var j=this.groups.length,V=0;V<j;V++)if(h[V+1]!==void 0)return this.groups[V];throw new Error("Cannot find token type for matched text")};function Hn(){return this.value}if(me.prototype.next=function(){var h=this.index;if(this.queuedGroup){var j=this._token(this.queuedGroup,this.queuedText,h);return this.queuedGroup=null,this.queuedText="",j}var V=this.buffer;if(h!==V.length){var Q=this.fast[V.charCodeAt(h)];if(Q)return this._token(Q,V.charAt(h),h);var R=this.re;R.lastIndex=h;var H=ar(R,V),B=this.error;if(H==null)return this._token(B,V.slice(h,V.length),h);var Q=this._getGroup(H),se=H[0];return B.fallback&&H.index!==h?(this.queuedGroup=Q,this.queuedText=se,this._token(B,V.slice(h,H.index),h)):this._token(Q,se,h)}},me.prototype._token=function(h,j,V){var R=0;if(h.lineBreaks){var H=/\n/g,B=1;if(j===`
`)R=1;else for(;H.exec(j);)R++,B=H.lastIndex}var Q={type:typeof h.type=="function"&&h.type(j)||h.defaultType,value:typeof h.value=="function"?h.value(j):j,text:j,toString:Hn,offset:V,lineBreaks:R,line:this.line,col:this.col},se=j.length;if(this.index+=se,this.line+=R,R!==0?this.col=se-B+1:this.col+=se,h.shouldThrow){var X=new Error(this.formatError(Q,"invalid syntax"));throw X}return h.pop?this.popState():h.push?this.pushState(h.push):h.next&&this.setState(h.next),Q},typeof Symbol<"u"&&Symbol.iterator){var _r=function(h){this.lexer=h};_r.prototype.next=function(){var h=this.lexer.next();return{value:h,done:!h}},_r.prototype[Symbol.iterator]=function(){return this},me.prototype[Symbol.iterator]=function(){return new _r(this)}}return me.prototype.formatError=function(h,j){if(h==null)var V=this.buffer.slice(this.index),h={text:V,offset:this.index,lineBreaks:V.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var R=2,H=Math.max(h.line-R,1),B=h.line+R,Q=String(B).length,se=v(this.buffer,this.line-h.line+R+1).slice(0,5),X=[];X.push(j+" at line "+h.line+" col "+h.col+":"),X.push("");for(var L=0;L<se.length;L++){var be=se[L],yr=H+L;X.push($(String(yr),Q)+"  "+be),yr===h.line&&X.push($("",Q+h.col+1)+"^")}return X.join(`
`)},me.prototype.clone=function(){return new me(this.states,this.state)},me.prototype.has=function(h){return!0},{compile:G,states:ge,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:tr}})}}),U=class extends Error{constructor(r,n,t,a){super(wi(r,n,t,a));ue(this,"name");ue(this,"info");this.name=r,this.info=t}},wi=(e,r,n,t)=>{const a={SyntaxError:"Erreur syntaxique",EvaluationError:"Erreur d'Ã©valuation",UnknownRule:"RÃ¨gle inconnue",PrivateRule:"RÃ¨gle privÃ©e"},o=/error/i.test(e);return`
[ ${a[e]??e} ]`+(n&&"dottedName"in n&&n.dottedName?.length?`
â¡ï¸  Dans la rÃ¨gle "${n.dottedName}"`:"")+`
${o?"âï¸":"â ï¸"}  ${r}`+(t?`
`+(o?"    ":"â¹ï¸  ")+t.message:"")},Ln=class extends U{constructor(e){super("InternalError",`
Erreur interne du moteur.

Cette erreur est le signe d'un bug dans publicodes. Pour nous aider Ã  le rÃ©soudre, vous pouvez copier ce texte dans un nouveau ticket : https://github.com/betagouv/mon-entreprise/issues/new.

payload:
${JSON.stringify(e,null,2)}
`,e)}},Jb=class extends Ln{constructor(e){super(e)}};function Bt(e,r,n,t){e.warn(wi("Avertissement",r,n,t))}function wo(e,r){e.warn(wi("Avertissement",`Cette rÃ¨gle est tagguÃ©e comme experimentale. 

Cela veut dire qu'elle peut Ãªtre modifiÃ©e, renommÃ©e, ou supprimÃ©e sans qu'il n'y ait de changement de version majeure dans l'API.
`,{dottedName:r}))}function _o(e,r,n){if(e.has(r)){e.get(r).add(n);return}e.set(r,new Set([n]))}function Wb(e,r){return Object.entries(r).reduce((n,[t,a])=>({...n,[t]:[...n[t]??[],...a]}),e)}var Zr=e=>{const r={};for(const n in e)r[n]=e[n];return r};function Ot(e,r=!0){function n(t){const a=e(t,n);return a===!1?t:a===void 0?Ea(n,t):r?a:Ea(n,a)}return n}function Lu(e){function r(t){switch(e(t,r)){case"continue":Ea(n,t);return;case"stop":return}}const n=t=>(r(t),t);return r}function Kb(e,r){const n={};for(const t in r)n[t]=e(r[t]);return n}var Ea=(e,r)=>{switch(r=Qb(e,r),r.nodeKind){case"rule":return Gb(e,r);case"reference":case"constant":return r;case"arrondi":return ih(e,r);case"simplifier unitÃ©":case"variable manquante":case"est non applicable":case"est non dÃ©fini":return Yb(e,r);case"barÃ¨me":case"taux progressif":case"grille":return eh(e,r);case"une possibilitÃ©":return rh(e,r);case"durÃ©e":return th(e,r);case"rÃ©soudre rÃ©fÃ©rence circulaire":return oh(e,r);case"inversion":return ah(e,r);case"operation":return nh(e,r);case"recalcul":return uh(e,r);case"unitÃ©":return lh(e,r);case"variations":return ch(e,r);case"replacementRule":return Zb(e,r);case"texte":return sh(e,r);case"condition":return mh(e,r);default:throw new Jb(r)}},Qb=(e,r)=>{if(!("sourceMap"in r)||!r.sourceMap||!r.sourceMap.args)return r;const n=r.sourceMap,t={};for(const a in n.args){const o=n.args[a];t[a]=Array.isArray(o)?o.map(s=>e(s)):e(o)}return{...r,sourceMap:{...n,args:t}}},Gb=(e,r)=>{const n=Zr(r);n.suggestions={};for(const t in r.suggestions)n.suggestions[t]=e(r.suggestions[t]);return n.replacements=r.replacements.map(e),n.explanation={ruleDisabledByItsParent:r.explanation.ruleDisabledByItsParent,nullableParent:r.explanation.nullableParent?e(r.explanation.nullableParent):void 0,parents:r.explanation.parents.map(e),valeur:e(r.explanation.valeur)},n},Zb=(e,r)=>({...r,definitionRule:e(r.definitionRule),replacedReference:e(r.replacedReference),replacementNode:e(r.replacementNode),whiteListedNames:r.whiteListedNames.map(e),blackListedNames:r.blackListedNames.map(e)}),Yb=(e,r)=>({...r,explanation:e(r.explanation)});function Xb(e,r){return r.map(n=>({...n,...n.plafond&&{plafond:e(n.plafond)},..."montant"in n&&{montant:e(n.montant)},..."taux"in n&&{taux:e(n.taux)}}))}var eh=(e,r)=>({...r,explanation:{assiette:e(r.explanation.assiette),multiplicateur:e(r.explanation.multiplicateur),tranches:Xb(e,r.explanation.tranches)}}),rh=(e,r)=>({...r,explanation:r.explanation.map(e)}),nh=(e,r)=>{const n=Zr(r);return n.explanation=[e(r.explanation[0]),e(r.explanation[1])],n},th=(e,r)=>({...r,explanation:{depuis:e(r.explanation.depuis),"jusqu'Ã ":e(r.explanation["jusqu'Ã "])}}),ah=(e,r)=>({...r,explanation:{...r.explanation,inversionCandidates:r.explanation.inversionCandidates.map(e)}}),ih=(e,r)=>({...r,explanation:{valeur:e(r.explanation.valeur),arrondi:e(r.explanation.arrondi)}}),oh=(e,r)=>({...r,explanation:{...r.explanation,valeur:e(r.explanation.valeur)}}),sh=(e,r)=>({...r,explanation:r.explanation.map(n=>typeof n=="string"?n:e(n))}),uh=(e,r)=>({...r,explanation:{...r.explanation,amendedSituation:r.explanation.amendedSituation.map(([n,t])=>[e(n),e(t)]),recalcul:r.explanation.recalculNode&&e(r.explanation.recalculNode)}}),lh=(e,r)=>{const n=Zr(r);return n.explanation=e(r.explanation),n},ch=(e,r)=>({...r,explanation:r.explanation.map(({condition:n,consequence:t})=>({condition:e(n),consequence:t&&e(t)}))}),mh=(e,r)=>{const n=Zr(r);return n.explanation={si:e(r.explanation.si),alors:e(r.explanation.alors),sinon:e(r.explanation.sinon)},n},xn={constant:e=>e};function de(e,r){if(xn??(xn={}),xn[e])throw new U("EvaluationError",`Multiple evaluation functions registered for the nodeKind \x1B[4m${e}`,{dottedName:""});xn[e]=r}var yo={isNullable:void 0,type:void 0};function ph(e,r,n){function t(o){if(!o||typeof o!="object")return yo;if(n.has(o))return n.get(o);n.set(o,yo);const s=a(o);return n.set(o,s),s}function a(o){switch(o.nodeKind){case"barÃ¨me":case"durÃ©e":case"grille":case"taux progressif":return{isNullable:!1,type:"number"};case"est non dÃ©fini":case"est non applicable":return{isNullable:!1,type:"boolean"};case"constant":return{isNullable:o.isNullable??o.nodeValue===null,type:o.type};case"operation":return{isNullable:["<","<=",">",">=","/","*"].includes(o.operationKind)?t(o.explanation[0]).isNullable||t(o.explanation[1]).isNullable:o.operationKind==="-"?t(o.explanation[0]).isNullable:!1,type:["<","<=",">",">=","=","!=","et","ou"].includes(o.operationKind)?"boolean":"number"};case"inversion":case"recalcul":case"replacementRule":case"rÃ©soudre rÃ©fÃ©rence circulaire":return{isNullable:!1,type:"number"};case"texte":case"une possibilitÃ©":return{isNullable:!1,type:"string"};case"rule":case"arrondi":return t(o.explanation.valeur);case"unitÃ©":case"simplifier unitÃ©":case"variable manquante":return t(o.explanation);case"condition":return{isNullable:[o.explanation.si,o.explanation.alors,o.explanation.sinon].some(u=>t(u).isNullable),type:t(o.explanation.alors).type??t(o.explanation.sinon).type};case"variations":const s=o.explanation.map(({consequence:u})=>t(u));return{isNullable:s.some(u=>u.isNullable),type:s.map(u=>u.type).find(u=>u!==void 0)};case"reference":return t(r[o.dottedName])}}return e.forEach(o=>{const s=r[o];t(s),s.explanation.parents.forEach(t)}),n}function Ze(e,r,n){let t,a;function o(s,u){t??(t=N(n,In({dottedName:"INLINE_MECANISM"}))),a??(a={});for(const p in r)"par dÃ©faut"in r[p]&&(a[p]=N(r[p]["par dÃ©faut"],In({})));Object.keys(r).length===1&&"valeur"in r&&(s={valeur:s});const l={};for(const p in s)l[p]=N(s[p],u);const f=Ot(p=>{if(p.nodeKind!=="reference"||!(p.name in r))return;const m=p.name;if(m in l)return l[m];if(m in a)return a[m];throw new U("SyntaxError",`Il manque la clÃ© '${m} dans le mÃ©canisme ${e}`,{dottedName:m})})(t);return f.sourceMap={mecanismName:e,args:l},f}return o.nom=e,Object.assign(o,"name",{value:`parse${Fu(e)}Inline`})}function an(e,r,n){function t(a,o){Object.keys(r).length===1&&"valeur"in r&&(a={valeur:a});const s={};for(const l in a){const f=a[l];s[l]=Array.isArray(f)?f.map(p=>N(p,o)):N(f,o)}const u=N(n(s),o);return u.sourceMap={mecanismName:e,args:s},u}return t.nom=e,Object.assign(t,"name",{value:`parse${Fu(e)}Inline`})}function Fu(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,r=>r.toUpperCase()).replace(/\s+/g,"")}var wr={nodeKind:"constant",nodeValue:null,missingVariables:{},type:void 0,isNullable:!0},Uu={nodeKind:"constant",nodeValue:void 0,missingVariables:{},type:void 0,isNullable:!1},Vt={...Uu,type:"number"},fh=Ze("abattement",{abattement:{},valeur:{}},{"-":["valeur","abattement"],plancher:0}),dh=Ze("applicable si",{"applicable si":{},valeur:{}},{condition:{si:"applicable si != non",alors:"valeur",sinon:wr}}),$h=e=>"missingVariables"in e?e.missingVariables:{},Hu=(e={})=>Object.fromEntries(Object.entries(e).map(([r,n])=>[r,n+1])),Vr=(e={},r={})=>Object.fromEntries([...Object.keys(e),...Object.keys(r)].map(n=>[n,(e[n]??0)+(r[n]??0)])),qe=e=>e.map($h).reduce(Vr,{}),rr=e=>({nodeValue:e,type:typeof e,isDefault:!0,nodeKind:"constant"}),vh=(e,r,n)=>{const t={};for(const a in e){const o=e[a];if(r[a]==null&&!o)throw new U("EngineError",`Il manque une clÃ© '${a}' dans ${JSON.stringify(r)} `,{});const s=r[a]!=null?N(r[a],n):o;t[a]=s}return t},Ar=(e,r=n=>n)=>{const[n,...t]=e.split("/").map(s=>s.trim()),a=s=>hh(s.split(".").filter(Boolean).map(u=>r(u)));return{numerators:a(n),denominators:t.flatMap(s=>a(s))}},bh=/(\d+)(?!.*[A-Za-z])/g;function zu(e){let r={};return e.forEach(n=>{const t=n.match(bh);if(t!=null){const a=t[0],o=n.split(a)[0];r[o]=(r[o]??0)+ +a}else r[n]=(r[n]??0)+1}),r}function hh(e){let r=zu(e);return Object.entries(r).flatMap(([n,t])=>Array(t).fill(n))}function gh(e){let r=zu(e);return Object.entries(r).map(([n,t])=>t>1?`${n}${t}`:n)}var Gn=(e,r,n=t=>t)=>gh(e.map(t=>n(t,r))).join("."),xo=2;function Le(e,r=xo,n=t=>t){if(e===null||typeof e!="object")return typeof e=="string"?n(e,r):e;const t=Lt(e),{numerators:a=[],denominators:o=[]}=t,s=a.length>0,u=o.length>0;return!s&&!u?"":s&&!u?Gn(a,r,n):!s&&u?`/${Gn(o,1,n)}`:`${Gn(a,xo,n)} / ${Gn(o,1,n)}`}var En={numerators:[],denominators:[]},or=(e,r)=>{if(e==="/"){if(r.length!==2)throw new U("InternalError","Infer units of a division with units.length !== 2)",{});return or("*",[r[0]||En,{numerators:(r[1]||En).denominators,denominators:(r[1]||En).numerators}])}const n=r.filter(Boolean);if(n.length<=1)return n[0];if(e==="*")return Lt({numerators:n.flatMap(t=>t?.numerators??[]),denominators:n.flatMap(t=>t?.denominators??[])});if(e==="-"||e==="+")return r.find(t=>t)},Ju=(e,r)=>Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every((n,t)=>e[t]===r[t]):e===r,Eo=(e,r=Ju)=>n=>{const t=n.findIndex(a=>r(a,e));return n.filter((a,o)=>o!==t)},Lt=(e,r=Ju)=>[...e.numerators,...e.denominators].reduce(({numerators:t,denominators:a},o)=>t.find(s=>r(o,s))&&a.find(s=>r(o,s))?{numerators:Eo(o,r)(t),denominators:Eo(o,r)(a)}:{numerators:t,denominators:a},e),st={"mois/an":12,"jour/an":365,"jour/mois":365/12,"trimestre/an":4,"mois/trimestre":3,"jour/trimestre":365/12*3,"â¬/kâ¬":10**3,"g/kg":10**3,"mg/g":10**3,"mg/kg":10**6,"m/km":10**3,"cm/m":10**2,"mm/cm":10**1,"mm/m":10**3,"cm/km":10**5,"mm/km":10**6};function jo(e,r){return st[`${r}/${e}`]||st[`${e}/${r}`]&&1/st[`${e}/${r}`]}function ja(e,r){let n=100**(r.filter(t=>t==="%").length-e.filter(t=>t==="%").length);return[n]=e.reduce(([t,a],o)=>{const s=a.findIndex(l=>!!jo(o,l)),u=jo(o,a[s])||1;return[t*u,[...a.slice(0,s+1),...a.slice(s+1)]]},[n,r]),n}var Co={"kW.h":"kWh","mn / h":"noeud"};function kh(e,r){return!e||!r?!1:e===r||e===Co[r]||r===Co[e]}function Fn(e,r,n){const t=Le(e),a=Le(r);if(!kh(t,a)&&!_h(e,r))throw new U("EngineError",`Impossible de convertir l'unitÃ© '${t}' en '${a}'`,{});if(!n||e===void 0)return n;const[o,s]=Mo(e||En),[u,l]=Mo(r||En);return Qu(n*s/l*ja(o.numerators,u.numerators)*ja(u.denominators,o.denominators))}var Wu=wh(st);function wh(e){return Object.keys(e).reduce((r,n)=>{const[t,a]=n.split("/"),o=r.findIndex(u=>u.has(t)),s=r.findIndex(u=>u.has(a));if(o>-1&&s>-1&&o!==s)throw new U("EngineError",`Invalid ratio ${n}`,{});return o===-1&&s===-1?r.push(new Set([t,a])):o>-1?r[o].add(a):s>-1&&r[s].add(t),r},[])}function Ku(e,r){return e===r||Wu.some(n=>n.has(e)&&n.has(r))}function Qu(e){return+e.toFixed(16)}function Gu(e){const{numerators:r,denominators:n}=Lt(e,Ku);return r.length&&r.every(t=>t==="%")?{numerators:["%"],denominators:n}:Zu({numerators:r,denominators:n})}function Mo(e,r=1){const n=ja(e.numerators,e.denominators);return[Lt(Zu(e),Ku),r&&Qu(r*n)]}var Zu=e=>({numerators:e.numerators.filter(r=>r!=="%"),denominators:e.denominators.filter(r=>r!=="%")});function _h(e,r){if(e==null||r==null)return!0;const n=f=>f.reduce((p,m)=>{const $=Wu.findIndex(g=>g.has(m)),v=$===-1?m:""+$;return{...p,[v]:1+(p[v]??0)}},{}),[t,a,o,s]=[e.numerators,e.denominators,r.numerators,r.denominators].map(n),u=f=>[...new Set(f)],l=[t,a,o,s].map(Object.keys).flat();return u(l).every(f=>(t[f]||0)-(a[f]||0)===(o[f]||0)-(s[f]||0)||f==="%")}function Ao(e,r){return+e.toFixed(r)}var yh=function(e){const r=tl(this.evaluateNode(e.explanation.valeur)),n=r.nodeValue;let t=e.explanation.arrondi;if(n!==!1&&(t=this.evaluateNode(t),typeof t.nodeValue=="number"&&!Le(t.unit)?.match(/dÃ©cimales?/)))throw new U("EvaluationError",`L'unitÃ© ${Le(t.unit)} de l'arrondi est inconnu. Vous devez utiliser l'unitÃ© âdÃ©cimalesâ`,{dottedName:this.cache._meta.evaluationRuleStack[0]});return{...e,nodeValue:typeof r.nodeValue!="number"||!("nodeValue"in t)?r.nodeValue:typeof t.nodeValue=="number"?Ao(r.nodeValue,t.nodeValue):t.nodeValue===!0?Ao(r.nodeValue,0):t.nodeValue===void 0?void 0:r.nodeValue,explanation:{valeur:r,arrondi:t},missingVariables:qe([r,t]),unit:r.unit}};function Ft(e,r){return{explanation:{valeur:N(e.valeur,r),arrondi:N(e.arrondi,r)},nodeKind:Ft.nom}}Ft.nom="arrondi";de(Ft.nom,yh);function Yu(e,r){return Object.entries(e.avec).forEach(([t,a])=>{N({nom:t,...a==null?{}:typeof a!="object"||"nodeKind"in a?{valeur:a}:a},r)}),N(e.valeur,r)}Yu.nom="avec";var _i=(e,r)=>e.map((n,t)=>{if(!n.plafond&&t>e.length)throw new U("SyntaxError",`La tranche nÂ°${t} du barÃ¨me n'a pas de plafond prÃ©cisÃ©. Seule la derniÃ¨re tranche peut ne pas Ãªtre plafonnÃ©e`,{dottedName:""});return{...n,...n.taux!==void 0?{taux:N(n.taux,r)}:{},...n.montant!==void 0?{montant:N(n.montant,r)}:{},plafond:"plafond"in n?N(n.plafond,r):{nodeValue:1/0,nodeKind:"constant",type:"number",isNullable:!1}}});function yi({multiplicateur:e,assiette:r,parsedTranches:n}){return n.reduce(([t,a],o,s)=>{if(a)return[[...t,{...o,isAfterActive:!0}],a];const u=this.evaluateNode(o.plafond),l=t[s-1]?t[s-1].plafond:{nodeValue:0};let f=u.nodeValue===void 0||e.nodeValue===void 0?void 0:u.nodeValue*e.nodeValue;try{f=f===1/0||f===0?f:Fn(or("*",[u.unit,e.unit]),r.unit,f)}catch(g){Bt(this.context.logger,`L'unitÃ© du plafond de la tranche nÂ°${s+1}  n'est pas compatible avec celle l'assiette`,{dottedName:this.cache._meta.evaluationRuleStack[0]},g)}const p=t[s-1]?t[s-1].plafondValue:0,m=p===void 0||r.nodeValue===void 0?void 0:p>r.nodeValue,$=[u,r,e,l];if($.some(g=>g.nodeValue===void 0))return[[...t,{...o,plafond:u,plafondValue:f,plancherValue:p,nodeValue:void 0,isActive:void 0,isAfterActive:m,missingVariables:qe($)}],!1];if(t[s-1]&&p&&f<=p)throw new U("EvaluationError",`Le plafond de la tranche nÂ°${s+1} a une valeur infÃ©rieure Ã  celui de la tranche prÃ©cÃ©dente`,{dottedName:this.cache._meta.evaluationRuleStack[0]});const v={...o,plafond:u,plancherValue:p,plafondValue:f,isAfterActive:m,isActive:r.nodeValue>=p&&r.nodeValue<f};return[[...t,v],v.isActive]},[[],!1])[0]}function xh(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):rr(1),tranches:_i(e.tranches,r)},nodeKind:"barÃ¨me"}}function Eh(e,r,n){return e.map(t=>{if(t.isAfterActive)return{...t,nodeValue:0};const a=n(t.taux),o=qe([a,t]);return[r.nodeValue,a.nodeValue,t.plafondValue,t.plancherValue].some(s=>s===void 0)?{...t,taux:a,nodeValue:void 0,missingVariables:o}:{...t,taux:a,..."unit"in r&&{unit:r.unit},nodeValue:(Math.min(r.nodeValue,t.plafondValue)-t.plancherValue)*Fn(a.unit,Ar(""),a.nodeValue),missingVariables:o}})}var jh=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new U("EvaluationError","Le multiplicateur ne peut pas Ãªtre nul",{dottedName:this.cache._meta.evaluationRuleStack[0]});const a=Eh(yi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}),n,r),o=a.reduce((s,{nodeValue:u})=>u==null?void 0:s+u,0);return{...e,nodeValue:o,missingVariables:qe([n,t,...a]),explanation:{assiette:n,multiplicateur:t,tranches:a},unit:n.unit}};de("barÃ¨me",jh);var Ch=(e,r,n)=>{const{composantes:t,...a}=r,o=N({somme:t.map(s=>{const{attributs:u,...l}=s;return{...u,valeur:{[e]:{...a,...l}}}})},n);return{...o,sourceMap:{args:{},...o.sourceMap,mecanismName:"composantes"}}},Mh=function(e){let r;const n=this.evaluateNode(e.explanation.si);let t=e.explanation.alors,a=e.explanation.sinon;if("unit"in n)throw new U("EvaluationError","La condition doit Ãªtre de type boolÃ©en",{dottedName:this.cache._meta.evaluationRuleStack[0]});if(n.nodeValue===!0)t=this.evaluateNode(e.explanation.alors),t.isActive=!0,r=t;else if(n.nodeValue===!1)a=this.evaluateNode(e.explanation.sinon),r=a;else if(n.nodeValue===null)r=n;else if(n.nodeValue===void 0)a=this.evaluateNode(e.explanation.sinon),t=this.evaluateNode(e.explanation.alors),r={...n,missingVariables:qe([a,t])};else throw new U("EvaluationError","La condition doit Ãªtre de type boolÃ©en",{dottedName:this.cache._meta.evaluationRuleStack[0]});const o=r.unit??t.unit;return{...r,missingVariables:Vr(Hu(n.missingVariables),r.missingVariables),...o!=null?{unit:o}:{},...e,explanation:{si:n,alors:t,sinon:a}}};function Xu(e,r){return{explanation:{si:N(e.si,r),alors:N(e.alors,r),sinon:N(e.sinon,r)},nodeKind:"condition"}}Xu.nom="condition";de("condition",Mh);function el(e){let[r,n,t]=e.split("/");return t||([r,n,t]=["01",r,n]),rl(+t,+n,+r)}var Gt=e=>+e<10?`0${e}`:""+e;function rl(e,r,n){const t=new Date(+e,+r-1,+n);if(!+t||t.getDate()!==+n)throw new U("SyntaxError",`La date ${n}/${r}/${e} n'est pas valide`,{dottedName:""});return`${Gt(n)}/${Gt(r)}/${Gt(e)}`}function Ca(e){const[r,n,t]=el(e).split("/"),a=new Date(+t,+n-1,+r);return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a}function Ah(e){return rl(e.getFullYear(),e.getMonth()+1,e.getDate())}var Po=Ah(new Date),Ph={depuis:rr(Po),"jusqu'Ã ":rr(Po)},Oh=function(e){const r=this.evaluateNode(e.explanation.depuis),n=this.evaluateNode(e.explanation["jusqu'Ã "]);let t;if([r,n].some(({nodeValue:a})=>a===void 0))t=void 0;else{const[a,o]=[r.nodeValue,n.nodeValue].map(Ca);t=Math.max(0,Math.round((o.getTime()-a.getTime())/(1e3*60*60*24)))}return{...e,missingVariables:qe([r,n]),nodeValue:t,explanation:{depuis:r,"jusqu'Ã ":n}}},Vh=(e,r)=>({explanation:vh(Ph,e,r),unit:Ar("jour"),nodeKind:"durÃ©e"});de("durÃ©e",Oh);function nl(e,r){return{explanation:N(e,r),nodeKind:"est non dÃ©fini"}}nl.nom="est non dÃ©fini";var Sh=Ze("est dÃ©fini",{valeur:{}},{"=":[{"est non dÃ©fini":"valeur"},"non"]}),qh=Ze("est applicable",{valeur:{}},{"=":[{"est non applicable":"valeur"},"non"]}),Ih=function(e){const r=this.evaluateNode(e.explanation);let n=!1;return r.nodeValue===void 0&&(n=!0),{...e,nodeValue:n,missingVariables:r.missingVariables,explanation:r}};de("est non dÃ©fini",Ih);function tl(e){if(!e.unit)return e;const r=Gu(e.unit);return Or(r,e)}function Or(e,r){return{...r,nodeValue:r.unit&&typeof r.nodeValue=="number"?Fn(r.unit,e,r.nodeValue):r.nodeValue,unit:e}}var Zt=({style:e,maximumFractionDigits:r=2,minimumFractionDigits:n=0,language:t})=>a=>{const o=e==="currency"&&r>=2&&n===0&&!Number.isInteger(a)?2:n;return Intl.NumberFormat(t,{style:e,currency:"EUR",maximumFractionDigits:r,minimumFractionDigits:o}).format(a)};function Nh({maximumFractionDigits:e,minimumFractionDigits:r,language:n,formatUnit:t,unit:a,nodeValue:o}){if(typeof o!="number")return o;const s=a?Le(a,o,t):void 0;switch(s){case"â¬":return Zt({style:"currency",maximumFractionDigits:e,minimumFractionDigits:r,language:n})(o);case"%":return Zt({style:"percent",maximumFractionDigits:e,language:n})(o/100);default:return Zt({style:"decimal",minimumFractionDigits:r,maximumFractionDigits:e,language:n})(o)+(typeof s=="string"?`Â ${s}`:"")}}function Rh(e){return e&&e[0].toUpperCase()+e.slice(1)}var Th={fr:{true:"oui",false:"non"},en:{true:"yes",false:"no"}};function Dh(e,{language:r="fr",displayedUnit:n,formatUnit:t,precision:a=2}={}){let o=typeof e=="number"||typeof e>"u"||e===null?e:e.nodeValue;if(typeof o=="number"&&Number.isNaN(o))return"Erreur dans le calcul du nombre";if(o===void 0)return"Pas encore dÃ©fini";if(o===null)return"Non applicable";if(typeof o=="string")return o.replace("\\n",`
`);if(typeof o=="object")return o.nom;if(typeof o=="boolean")return Th[r][o];if(typeof o=="number"){let s=typeof e=="number"||typeof e>"u"||!("unit"in e)?void 0:e.unit;if(s){const u=tl({unit:s,nodeValue:o});s=u.unit,o=u.nodeValue}return Nh({minimumFractionDigits:0,maximumFractionDigits:a,language:r,formatUnit:t,nodeValue:o,unit:n??s}).trim()}}var Bh={};Fb(Bh,{contextNameToDottedName:()=>Ma,cyclicDependencies:()=>Kh,decodeRuleName:()=>Yh,disambiguateReference:()=>sl,disambiguateReferenceNode:()=>Pa,encodeRuleName:()=>Zh,findCommonAncestor:()=>ol,getChildrenRules:()=>Xh,isAccessible:()=>Ut,isExperimental:()=>Aa,nameLeaf:()=>al,ruleParent:()=>il,ruleParents:()=>Un,ruleWithDedicatedDocumentationPage:()=>eg,updateReferencesMapsFromReferenceNode:()=>Ei});function cn(e,r){return e!=null&&Object.prototype.hasOwnProperty.call(e,r)}function Oo(e){return function(...r){return e}}var Lh="\0",Vo="",So=(e,r)=>{e[r]?e[r]++:e[r]=1},qo=(e,r)=>{--e[r]||delete e[r]},vn=(e,r,n,t)=>{let a=""+r,o=""+n;if(!e&&a>o){const s=a;a=o,o=s}return a+Vo+o+Vo+(t===void 0?Lh:t)},Fh=(e,r,n,t)=>{let a=""+r,o=""+n;if(!e&&a>o){const u=a;a=o,o=u}const s={v:a,w:o};return t&&(s.name=t),s},Yt=(e,r)=>vn(e,r.v,r.w,r.name),Uh=class{constructor(e={}){ue(this,"_nodeCount",0);ue(this,"_edgeCount",0);ue(this,"_isDirected");ue(this,"_label");ue(this,"_defaultNodeLabelFn");ue(this,"_defaultEdgeLabelFn");ue(this,"_nodes");ue(this,"_in");ue(this,"_preds");ue(this,"_out");ue(this,"_sucs");ue(this,"_edgeObjs");ue(this,"_edgeLabels");this._isDirected=cn(e,"directed")?e.directed:!0,this._label=void 0,this._defaultNodeLabelFn=Oo(void 0),this._defaultEdgeLabelFn=Oo(void 0),this._nodes={},this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}setGraph(e){return this._label=e,this}graph(){return this._label}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}setNode(e,r=void 0){return cn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}setNodes(e,r){return e.forEach(n=>{r!==void 0?this.setNode(n,r):this.setNode(n)}),this}node(e){return this._nodes[e]}hasNode(e){return cn(this._nodes,e)}successors(e){const r=this._sucs[e];if(r)return Object.keys(r)}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setEdge(e,r,n=void 0,t=void 0){e=""+e,r=""+r;const a=vn(this._isDirected,e,r,t);if(cn(this._edgeLabels,a))return n!==void 0&&(this._edgeLabels[a]=n),this;this.setNode(e),this.setNode(r),this._edgeLabels[a]=n!==void 0?n:this._defaultEdgeLabelFn(e,r,t);const o=Fh(this._isDirected,e,r,t);return e=o.v,r=o.w,Object.freeze(o),this._edgeObjs[a]=o,So(this._preds[r],e),So(this._sucs[e],r),this._in[r][a]=o,this._out[e][a]=o,this._edgeCount++,this}edge(e,r,n){const t=arguments.length===1?Yt(this._isDirected,arguments[0]):vn(this._isDirected,e,r,n);return this._edgeLabels[t]}hasEdge(e,r,n){const t=arguments.length===1?Yt(this._isDirected,arguments[0]):vn(this._isDirected,e,r,n);return cn(this._edgeLabels,t)}removeEdge(e,r,n){const t=arguments.length===1?Yt(this._isDirected,arguments[0]):vn(this._isDirected,e,r,n),a=this._edgeObjs[t];return a&&(e=a.v,r=a.w,delete this._edgeLabels[t],delete this._edgeObjs[t],qo(this._preds[r],e),qo(this._sucs[e],r),delete this._in[r][t],delete this._out[e][t],this._edgeCount--),this}outEdges(e,r=void 0){const n=this._out[e];if(n){const t=Object.values(n);return r===void 0?t:t.filter(function(a){return a.w===r})}}};function Hh(e){let r=0;const n=[],t={},a=[];function o(s){const u=t[s]={onStack:!0,lowlink:r,index:r++};if(n.push(s),e.successors(s).forEach(function(l){Object.prototype.hasOwnProperty.call(t,l)?t[l].onStack&&(u.lowlink=Math.min(u.lowlink,t[l].index)):(o(l),u.lowlink=Math.min(u.lowlink,t[l].lowlink))}),u.lowlink===u.index){const l=[];let f;do f=n.pop(),t[f].onStack=!1,l.push(f);while(s!==f);a.push(l)}}return e.nodes().forEach(function(s){Object.prototype.hasOwnProperty.call(t,s)||o(s)}),a}function zh(e){return Hh(e).filter(function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})}function Jh(e){const r=new Uh;return[...e.entries()].forEach(([n,t])=>{t.forEach(a=>{r.setEdge(n,a)})}),r}function Wh(e,r){function*n(o){let s=o;for(;;)yield r[s++%r.length]}const t=[];for(let o=0;o<r.length;o++){const s=[];let u;for(const l of n(o))if(u===void 0)s.push(l),u=l;else if(e.get(u)?.has(l)){if(s.includes(l)){s.splice(0,s.lastIndexOf(l));break}s.push(l),u=l}t.push(s)}return t.reduce((o,s)=>s.length>o.length?o:s)}function Kh(e){const{referencesMaps:r}=ut(e),n=Jh(r.referencesIn),a=zh(n).map(u=>u.reverse()),o=a.map(u=>Wh(r.referencesIn,u)),s=a.map((u,l)=>Gh(n,u,o[l]));return[o,s]}var Qh=(e,r,n)=>{for(let t=0;t<e.length+1;t++)if(r===e[t]&&n===e[(t+1)%e.length])return!0;return!1};function Gh(e,r,n){const t=new Set;return r.forEach(a=>{e.outEdges(a).filter(({w:o})=>r.includes(o)).forEach(({v:o,w:s})=>{t.add(`"${o}" -> "${s}"`+(Qh(n,o,s)?" [color=red]":""))})}),`digraph Cycle {
	${[...t].join(`;
	`)};
}`}var Sr=e=>e.split(" . "),xi=e=>e.join(" . "),al=e=>Sr(e).slice(-1)?.[0],Zh=e=>e?.replace(/\s\.\s/g,"/").replace(/-/g,"â").replace(/\s/g,"-"),Yh=e=>e.replace(/\//g," . ").replace(/-/g," ").replace(/\u2011/g,"-"),Ma=e=>e.endsWith("$SITUATION")?il(e):e,il=e=>xi(Sr(e).slice(0,-1));function Un(e){return Sr(e).slice(0,-1).map((r,n,t)=>xi(t.slice(0,n+1))).reverse()}var Xh=(e,r)=>Object.keys(e).filter(t=>t.startsWith(r)&&Sr(t).length===Sr(r).length+1);function ol(e,r){const n=Sr(e),t=Sr(r),a=n.findIndex((o,s)=>t[s]!==o);return a===-1?e:xi(n.slice(0,a))}function Ut(e,r,n){if(!(n in e))throw new U("InternalError",`La rÃ¨gle "${n}" n'existe pas`,{dottedName:n});const t=ol(r,n),a=[n,...Un(n),""];return a.slice(0,Math.max(a.indexOf(t)-1,0)).every(s=>!(s in e)||e[s].private===!1)}function Aa(e,r){if(!(r in e))throw new U("InternalError",`La rÃ¨gle "${r}" n'existe pas`,{dottedName:r});return[r,...Un(r)].some(t=>t in e&&e[t].rawNode?.experimental==="oui")}function sl(e,r="",n){const a=[r,...Un(r),""].map(s=>s?s+" . "+n:n).sort((s,u)=>s===r?1:u===r?-1:0).filter(s=>s in e),o=a.find(s=>Ut(e,r,s));if(!a.length)throw new U("SyntaxError",`La rÃ©fÃ©rence "${n}" est introuvable.
VÃ©rifiez que l'orthographe et l'espace de nom sont corrects`,{dottedName:Ma(r)});if(!o)throw new U("SyntaxError",`La rÃ¨gle "${a[0]}" n'est pas accessible depuis "${r}".
Cela vient du fait qu'elle est privÃ©e ou qu'un de ses parent est privÃ©`,{dottedName:Ma(r)});return o}function eg(e){return e.virtualRule!==!0&&e.type!=="groupe"&&e.type!=="texte"&&e.type!=="paragraphe"&&e.type!=="notification"}function Ei(e,r,n){e.nodeKind==="reference"&&(_o(r.referencesIn,n??e.contextDottedName,e.dottedName),_o(r.rulesThatUse,e.dottedName,n??e.contextDottedName))}function Pa(e,r){if(e.nodeKind==="reference")return e.dottedName||(e.dottedName=sl(r,e.contextDottedName,e.name),e.title=r[e.dottedName].title,e.acronym=r[e.dottedName].rawNode.acronyme),e}var rg=0,Zn={};function ul(e,r){return e?(Array.isArray(e)?e:[e]).map(n=>{typeof n=="string"&&(n={rÃ¨gle:n});const t=N(n.rÃ¨gle,r),a=N(n.par??r.dottedName,r),[o,s]=[n.dans??[],n["sauf dans"]??[]].map(u=>Array.isArray(u)?u:[u]).map(u=>u.map(l=>N(l,r)));return{nodeKind:"replacementRule",rawNode:n,definitionRule:N(r.dottedName,r),replacedReference:t,replacementNode:a,whiteListedNames:o,blackListedNames:s,remplacementRuleId:rg++}}):[]}function ng(e,r){return ul(e,r).map(n=>({...n,replacementNode:wr}))}function tg(e){const r={};for(const n in e){const t=e[n];for(const a of t.replacements){if(!a.replacedReference.dottedName)throw new Ln(a);const o=a.replacedReference.dottedName;r[o]=[...r[o]??[],a]}}return r}function ag({newRules:e,previousReplacements:r,parsedRules:n,referencesMaps:t,logger:a}){const o=tg(e),s=new Set([]);for(const m in o){const $=t.rulesThatUse.get(m)??[];for(const v of $)s.add(v)}const u=new Set(Object.keys(e).filter(m=>[...t.referencesIn.get(m)??new Set].some($=>(r[$]??[]).length))),l=Wb(r,o);if(!u.size&&!s.size)return[n,l];const f=Io(r,t),p=Io(o,t);return u.forEach(m=>{n[m]=f(n[m])}),s.forEach(m=>{n[m]=p(n[m])}),[n,l]}function Io(e,r,n){return Ot((t,a)=>{if(t.nodeKind==="replacementRule"||t.nodeKind==="inversion"||t.nodeKind==="une possibilitÃ©")return!1;if(t.nodeKind==="recalcul")return{...t,explanation:{...t.explanation,recalculNode:a(t.explanation.recalculNode),amendedSituation:t.explanation.amendedSituation.map(([o,s])=>[o,a(s)])}};if(t.nodeKind==="reference"){if(!t.dottedName)throw new Ln(t);const o=ig(t,e[t.dottedName]??[]);return Lu(s=>(Ei(s,r,t.contextDottedName),"continue"))(o),o}})}function ig(e,r,n){const t=r.filter(({definitionRule:o})=>o.dottedName!==e.contextDottedName).filter(({whiteListedNames:o})=>!o.length||o.some(s=>e.contextDottedName.startsWith(s.dottedName))).filter(({blackListedNames:o})=>!o.length||o.every(s=>!e.contextDottedName.startsWith(s.dottedName))).sort((o,s)=>{const u=+!!s.whiteListedNames.length-+!!o.whiteListedNames.length,l=+!!s.blackListedNames.length-+!!o.blackListedNames.length;return u||l});if(!t.length)return e;t.length>1;const a=t.map(o=>o.remplacementRuleId).join("-");return Zn[a]??(Zn[a]={nodeKind:"variations",sourceMap:{mecanismName:"replacement"},rawNode:e.rawNode,explanation:[...t.map(o=>({condition:o.definitionRule,consequence:o.replacementNode})),{condition:rr(!0),consequence:e}]}),Zn[a]}function og(e,r){const n=!!(e.privÃ©==="oui"||e.nom.startsWith("[privÃ©] ")),t=e.nom.replace(/^\[privÃ©\] /,""),a=[r.dottedName,t].filter(Boolean).join(" . "),o=al(a),s=Rh(e.titre??o);if(r.parsedRules[a])throw new U("EvaluationError",`La rÃ©fÃ©rence '${a}' a dÃ©jÃ  Ã©tÃ© dÃ©finie`,{dottedName:a});const u={};for(const m in e)a0.includes(m)&&(u[m]=e[m]);"formule"in e&&(u.valeur=e.formule),!n&&!a.endsWith("$SITUATION")&&(u["dans la situation"]=`${a} . $SITUATION`,u.avec={...u.avec??{},"[privÃ©] $SITUATION":{...Uu,isNullable:e["possiblement non applicable"]==="oui"}},u["par dÃ©faut"]!=null&&(u["par dÃ©faut"]={valeur:u["par dÃ©faut"],"variable manquante":a}));const l={...r,dottedName:a};r.parsedRules[a]=void 0;const f={valeur:N(u,l),parents:Un(a).map(m=>N(m,l)).map(m=>(m.dottedName=m.name,m))},p={};if(e.suggestions)for(const m in e.suggestions)p[m]=N(e.suggestions[m],l);return r.parsedRules[a]={dottedName:a,replacements:[...ng(e["rend non applicable"],l),...ul(e.remplace,l)],title:s,private:n,suggestions:p,nodeKind:"rule",explanation:f,rawNode:e,virtualRule:!!r.dottedName},r.dottedName?N(t,r):r.parsedRules[a]}de("rule",function(r){const{ruleDisabledByItsParent:n,nullableParent:t,parentMissingVariables:a}=ll(this,r);let o={...r.explanation.valeur,nodeValue:null,missingVariables:{}};return n||(this.cache._meta.evaluationRuleStack.filter(u=>u===r.dottedName).length>1?o={nodeValue:void 0}:(this.cache._meta.evaluationRuleStack.unshift(r.dottedName),o=this.evaluateNode(r.explanation.valeur),this.cache._meta.evaluationRuleStack.shift())),o.missingVariables??(o.missingVariables={}),sg(this,r,o),{...o,missingVariables:Vr(o.missingVariables,a),...r,explanation:{parents:r.explanation.parents,valeur:o,nullableParent:t,ruleDisabledByItsParent:n}}});function sg(e,r,n){r.private===!0||!Ut(e.context.parsedRules,"",r.dottedName)||n.nodeValue===void 0&&!Object.keys(n.missingVariables).length&&(n.missingVariables[r.dottedName]=1)}function ll(e,r){if(r.private)return{ruleDisabledByItsParent:!1,parentMissingVariables:{}};const n=e.context.nodesTypes,t=r.explanation.parents.find(o=>n.get(o)?.isNullable||n.get(o)?.type==="boolean");if(!t)return{ruleDisabledByItsParent:!1,parentMissingVariables:{}};if(!e.cache._meta.parentRuleStack.includes(r.dottedName)){e.cache._meta.parentRuleStack.unshift(r.dottedName);let o=rr(!1);if(n.get(t)?.isNullable&&(o=e.evaluateNode({nodeKind:"est non applicable",explanation:t})),o.nodeValue!==!0&&n.get(t)?.type==="boolean"&&(o=e.evaluateNode({nodeKind:"operation",operator:"=",operationKind:"=",explanation:[t,rr(!1)]})),e.cache._meta.parentRuleStack.shift(),o.nodeValue===!0)return{ruleDisabledByItsParent:!0,parentMissingVariables:o.missingVariables??{},nullableParent:t}}let a={};if(n.get(t)?.type==="boolean"){const o=e.evaluateNode(t);return a=o.missingVariables??{},{ruleDisabledByItsParent:o.nodeValue===!1,parentMissingVariables:a,nullableParent:t}}return{ruleDisabledByItsParent:!1,parentMissingVariables:a,nullableParent:t}}function cl(e,r){return{explanation:N(e,r),nodeKind:"est non applicable"}}cl.nom="est non applicable";var Yn=e=>({nodeKind:"est non applicable",explanation:e}),ug=function(e){const r=e.explanation;if(this.context.nodesTypes.get(r)?.isNullable===!1&&r.nodeKind!=="rule")return{...e,nodeValue:!1,missingVariables:{}};if(this.cache.nodes.has(r)&&this.cache.nodes.get(r)!==void 0)return{...e,nodeValue:this.cache.nodes.get(r)?.nodeValue===null,missingVariables:this.cache.nodes.get(r)?.missingVariables??{}};switch(r.nodeKind){case"rule":const{ruleDisabledByItsParent:t,parentMissingVariables:a}=ll(this,r);if(t)return{...e,nodeValue:!0,missingVariables:a};const o=this.evaluateNode(Yn(r.explanation.valeur)),s=Vr(a,o.missingVariables);return o.nodeValue===!1&&this.context.nodesTypes.get(this.context.parsedRules[`${r.dottedName} . $SITUATION`])?.isNullable&&!Object.keys(o.missingVariables).length&&(s[r.dottedName]=1),{...e,nodeValue:o.nodeValue,missingVariables:s};case"reference":if(!r.dottedName)throw new U("InternalError","Missing dottedName",{});return{...this.evaluateNode(Yn(this.context.parsedRules[r.dottedName])),...e};case"condition":return{...this.evaluateNode({...r,explanation:{si:r.explanation.si,alors:Yn(r.explanation.alors),sinon:Yn(r.explanation.sinon)}}),...e}}const n=this.evaluateNode(r);return{...e,nodeValue:n.nodeValue===void 0?void 0:n.nodeValue===null,missingVariables:n.missingVariables}};de("est non applicable",ug);function lg(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):rr(1),tranches:_i(e.tranches,r)},nodeKind:"grille"}}var cg=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new U("EvaluationError","Le multiplicateur ne peut pas Ãªtre nul",{dottedName:this.cache._meta.evaluationRuleStack[0]});const a=yi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}).map(l=>{if(l.isActive===!1)return l;const f=r(l.montant);return{...l,montant:f,nodeValue:f.nodeValue,unit:f.unit,missingVariables:qe([f,l])}});let o;const s=a.find(l=>l.isActive);s?o=[s]:a[a.length-1].isAfterActive===!1?o=[{nodeValue:!1}]:o=a.filter(l=>l.isActive===void 0);const u=o[0]?o[0].isActive===void 0?void 0:o[0].nodeValue:!1;return{...e,nodeValue:u,missingVariables:qe([n,t,...o]),explanation:{...e.explanation,assiette:n,multiplicateur:t,tranches:a},unit:o[0]?.unit??void 0}};de("grille",cg);function ml(e,r,n,t=0,a=100,o=0){let s=r,u=n,l=s,f=e(s),p=e(u),m=f,$,v,g,k,E,C;for(;a-- >0;){if(g=u-s,Math.abs(m)<Math.abs(p)&&(s=u,u=l,l=s,f=p,p=m,m=f),$=1e-15*Math.abs(u)+t/2,v=(l-u)/2,Math.abs(v)<=$||p===0)return u;if(Math.abs(g)>=$&&Math.abs(f)>Math.abs(p)){let A,D;const G=l-u;s===l?(A=p/f,k=G*A,E=1-A):(E=f/m,A=p/m,D=p/f,k=D*(G*E*(E-A)-(u-s)*(A-1)),E=(E-1)*(A-1)*(D-1)),k>0?E=-E:k=-k,k<.75*G*E-Math.abs($*E)/2&&k<Math.abs(g*E/2)&&(v=k/E)}if(Math.abs(v)<$&&(v=v>0?$:-$),s=u,f=p,u+=v,p=e(u),(p>0&&m>0||p<0&&m<0)&&(l=s,m=f),Math.abs(p)<t)return u;Math.abs(p)<o&&(C=u)}return C}var mg=function(e){const r=this.shallowCopy();if(this.cache._meta.evaluationRuleStack.slice(1).includes(e.explanation.ruleToInverse))return{...Vt,...e};r.cache._meta.parentRuleStack=[...this.cache._meta.parentRuleStack],r.cache._meta.evaluationRuleStack=[...this.cache._meta.evaluationRuleStack];const n=e.explanation.inversionCandidates.find(C=>{if(this.cache._meta.evaluationRuleStack.includes(C.dottedName))return!1;const A=r.evaluateNode(r.context.parsedRules[`${C.dottedName} . $SITUATION`]);return typeof A.nodeValue=="number"&&!(C.dottedName in A.missingVariables)});if(n===void 0)return{...e,nodeValue:void 0,missingVariables:{...Object.fromEntries(e.explanation.inversionCandidates.map(C=>[C.dottedName,1])),[e.explanation.ruleToInverse]:1}};const t=r.evaluateNode(n);let a=0;r.setSituation({[n.dottedName]:Vt},{keepPreviousSituation:!0});let o;const s=C=>(a++,r.setSituation({[e.explanation.ruleToInverse]:{nodeValue:C,nodeKind:"constant",type:"number",unit:t.unit}},{keepPreviousSituation:!0}),o=r.evaluateNode(n),o),u=t.nodeValue;let l;const f=u,m=s(f).nodeValue,$=m>u?.9:1.2,v=m!==void 0?f*u*$/m:2e3,k=s(v).nodeValue,E=this.context.inversionMaxIterations??10;if(m!==void 0||k!==void 0){const C=ge=>(ge===f?m:ge===v?k:s(ge).nodeValue)-u,G=k!==void 0&&k<u&&(k>m||m>u)?v:m!==void 0&&m<u&&(m>k||k>u)?f:-1e6,je=k!==void 0&&k>u&&(k<m||m<u)?v:m!==void 0&&m>u&&(m<k||k<u)?f:1e8;l=ml(C,G,je,.1,E,1)}return l==null&&(this.cache.inversionFail=!0),(o.traversedVariables??[]).forEach(C=>this.cache._meta.traversedVariablesStack[0].add(C)),{...e,nodeValue:l,unit:t.unit,explanation:{...e.explanation,inversionGoal:n,numberOfIteration:a},missingVariables:o.missingVariables}},pg=(e,r)=>{if(!e.avec)throw new U("SyntaxError","Une formule d'inversion doit prÃ©ciser _avec_ quoi on peut inverser la variable",{dottedName:r.dottedName});return{explanation:{ruleToInverse:r.dottedName,inversionCandidates:e.avec.map(n=>({...N(n,r)}))},nodeKind:"inversion"}};de("inversion",mg);var fg=an("le maximum de",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({condition:{si:{"est non applicable":"$INTERNAL valeur"},alors:"$INTERNAL acc",sinon:{condition:{si:{ou:[{"est non applicable":"$INTERNAL acc"},{">":["$INTERNAL valeur","$INTERNAL acc"]}]},alors:"$INTERNAL valeur",sinon:"$INTERNAL acc"}}},avec:{"[privÃ©] $INTERNAL valeur":n,"[privÃ©] $INTERNAL acc":r}}),wr)),dg=an("le minimum de",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({condition:{si:{"est non applicable":"$INTERNAL valeur"},alors:"$INTERNAL acc",sinon:{condition:{si:{ou:[{"est non applicable":"$INTERNAL acc"},{"<":["$INTERNAL valeur","$INTERNAL acc"]}]},alors:"$INTERNAL valeur",sinon:"$INTERNAL acc"}}},avec:{"[privÃ©] $INTERNAL valeur":n,"[privÃ©] $INTERNAL acc":r}}),wr));function Oa(e){return e.reverse().reduce((r,n)=>({"+":[n,r]}),wr)}var $g=an("somme",{valeur:{type:"liste"}},({valeur:e})=>Oa([...e])),vg=an("moyenne",{valeur:{type:"liste"}},({valeur:e})=>{const r=[...e];return{"/":[Oa(r),Oa(r.map(bg))]}});function bg(e){return{"applicable si":{"est applicable":e},valeur:1}}var hg=Ze("non applicable si",{"non applicable si":{},valeur:{}},{condition:{si:"non applicable si = non",alors:"valeur",sinon:wr}}),gg=(e,r)=>(Array.isArray(e)&&(e={possibilitÃ©s:e}),{...e,explanation:e.possibilitÃ©s.map(n=>N(n,r)),context:r.dottedName,nodeKind:"une possibilitÃ©"});de("une possibilitÃ©",e=>({...e,missingVariables:{[e.context]:1},nodeValue:void 0}));var pl={"*":[(e,r)=>e*r,"Ã"],"/":[(e,r)=>e/r,"â"],"+":[(e,r)=>e+r],"-":[(e,r)=>e-r,"â"],"<":[(e,r)=>e<r],"<=":[(e,r)=>e<=r,"â¤"],">":[(e,r)=>e>r],">=":[(e,r)=>e>=r,"â¥"],"=":[(e,r)=>(e??!1)===(r??!1)],"!=":[(e,r)=>(e??!1)!==(r??!1),"â "],et:[(e,r)=>(e??!1)&&(r??!1)],ou:[(e,r)=>(e??!1)||(r??!1)]},kg=(e,r)=>(n,t)=>{const a=n.map(o=>N(o,t));return{...n,nodeKind:"operation",operationKind:e,operator:r||e,explanation:a}},wg=function(e){let r=this.evaluateNode(e.explanation[0]),n={...e,missingVariables:{}};if(r.nodeValue===null&&["<",">","<=",">=","/","*","-","et"].includes(e.operationKind)||r.nodeValue===0&&["/","*"].includes(e.operationKind)||r.nodeValue===!1&&e.operationKind==="et"||r.nodeValue===!0&&e.operationKind==="ou")return{...n,nodeValue:e.operationKind==="et"?!1:r.nodeValue,missingVariables:r.missingVariables};let t=this.evaluateNode(e.explanation[1]);if(n.explanation=[r,t],e.operationKind==="/"&&t.nodeValue===0)throw new U("EvaluationError","Division by zero",{dottedName:this.cache._meta.evaluationRuleStack[0]});if(t.nodeValue===null&&["<",">","<=",">=","/","*","et"].includes(e.operationKind)||t.nodeValue===0&&["*"].includes(e.operationKind)||t.nodeValue===!1&&e.operationKind==="et"||t.nodeValue===!0&&e.operationKind==="ou")return{...n,nodeValue:e.operationKind==="et"?!1:t.nodeValue,missingVariables:t.missingVariables};n.missingVariables=qe([r,t]),(r.nodeValue===void 0||t.nodeValue===void 0)&&(n={...n,nodeValue:void 0});const a=["+","-"].includes(e.operationKind)&&Le(t.unit)==="%"&&Le(r.unit)!=="%";if(!("nodeValue"in n)&&!["/","*"].includes(e.operationKind)&&!a)try{r.unit&&"unit"in t?t=Or(r.unit,t):t.unit&&(r=Or(t.unit,r))}catch(l){Bt(this.context.logger,`Dans l'expression '${e.operationKind}', la partie gauche (unitÃ©: ${Le(r.unit)}) n'est pas compatible avec la partie droite (unitÃ©: ${Le(t.unit)})`,{dottedName:this.cache._meta.evaluationRuleStack[0]},l)}const o=pl[e.operationKind][0],s=r.nodeValue,u=t.nodeValue;if(n.nodeValue="nodeValue"in n?n.nodeValue:["<",">","<=",">=","*","/"].includes(e.operationKind)&&t.nodeValue===null?null:[s,u].every(l=>typeof l=="string"&&l.match?.(/^[\d]{2}\/[\d]{2}\/[\d]{4}$/))?o(Ca(s),Ca(u)):o(s,u),e.operationKind==="*"&&or("*",[r.unit,t.unit])?.numerators.includes("%")){let l=or("*",[r.unit,t.unit]);const f=n.nodeValue;return{...n,nodeValue:typeof f=="number"?f/100:f,unit:or("*",[l,{numerators:[],denominators:["%"]}])}}if(a){let l=or("*",[r.unit,t.unit]);return{...n,nodeValue:typeof r.nodeValue=="number"&&typeof t.nodeValue=="number"?r.nodeValue*(1+t.nodeValue/100*(e.operationKind==="-"?-1:1)):n.nodeValue,unit:or("*",[l,{numerators:[],denominators:["%"]}])}}return e.operationKind==="*"||e.operationKind==="/"||e.operationKind==="-"||e.operationKind==="+"?{...n,unit:or(e.operationKind,[r.unit,t.unit])}:n};de("operation",wg);var _g=Object.fromEntries(Object.entries(pl).map(([e,[r,n]])=>[e,kg(e,n)])),yg=_g,xg=Ze("par dÃ©faut",{"par dÃ©faut":{},valeur:{}},{condition:{si:{"est non dÃ©fini":"valeur"},alors:"par dÃ©faut",sinon:"valeur"}}),Eg=Ze("plafond",{plafond:{},valeur:{}},{condition:{si:{et:["plafond != non","valeur > plafond"]},alors:"plafond",sinon:"valeur"}}),jg=Ze("plancher",{plancher:{},valeur:{}},{condition:{si:{et:["plancher != non","valeur < plancher"]},alors:"plancher",sinon:"valeur"}}),No=Ze("produit",{assiette:{},taux:{"par dÃ©faut":"100%"},facteur:{"par dÃ©faut":1},plafond:{"par dÃ©faut":wr}},{"*":[{"*":["taux","facteur"]},{valeur:"assiette",plafond:"plafond"}],"simplifier l'unitÃ©":"oui"}),Cg=function(e){if(this.cache._meta.currentRecalcul===e.explanation.recalculNode)return{...wr,...e};const r=Object.fromEntries(e.explanation.amendedSituation.filter(([a,o])=>{const s=this.evaluateNode(a),u=this.evaluateNode(o);return s.nodeValue!==u.nodeValue||Le(s.unit)!==Le(u.unit)}).map(([a,o])=>[a.dottedName,o]));let n=this;Object.keys(r).length&&(n=this.shallowCopy().setSituation(r,{keepPreviousSituation:!0}),n.subEngineId=this.subEngines.length,Object.values(r).forEach(a=>n.cache.nodes.set(a,this.evaluate(a))),this.subEngines.push(n)),n.cache._meta.currentRecalcul=e.explanation.recalculNode;const t=n.evaluateNode(e.explanation.recalculNode);return delete n.cache._meta.currentRecalcul,{...e,nodeValue:t.nodeValue,explanation:{...e.explanation,recalcul:t,subEngineId:n.subEngineId},missingVariables:t.missingVariables,..."unit"in t&&{unit:t.unit}}},Mg=(e,r)=>{const n=Object.keys(e.avec).map(a=>[N(a,r),N(e.avec[a],r)]);return{explanation:{recalculNode:N(e.rÃ¨gle??r.dottedName,r),amendedSituation:n},nodeKind:"recalcul"}};de("recalcul",Cg);var Ag=function(e){if(this.cache._meta.evaluationRuleStack.slice(1).includes(e.explanation.ruleToSolve))return{...Vt,...e};let r=0;const n=this.shallowCopy();n.cache._meta.parentRuleStack=[...this.cache._meta.parentRuleStack],n.cache._meta.evaluationRuleStack=[...this.cache._meta.evaluationRuleStack];const t=this.context.inversionMaxIterations??25,a=m=>(r++,n.setSituation({[e.explanation.ruleToSolve]:{...Vt,nodeValue:m}},{keepPreviousSituation:!0}),n.evaluateNode(e.explanation.valeur)),o=Symbol("inversion failed");let s=o;const u=1;let l=a(u);const f=l.nodeValue,p=l.unit;return f!==void 0&&(s=ml(g=>g===u?f-u:(l=a(g),l.nodeValue-g),-1e6,1e8,.5,t,2)),s===o&&(s=void 0,this.cache.inversionFail=!0),s!==void 0&&(l=a(s)),{...e,unit:p,nodeValue:s,explanation:{...e.explanation,valeur:l,numberOfIterations:r},missingVariables:l.missingVariables}};function fl(e,r){return{explanation:{ruleToSolve:r.dottedName,valeur:N(e.valeur,r)},nodeKind:"rÃ©soudre rÃ©fÃ©rence circulaire"}}fl.nom="rÃ©soudre la rÃ©fÃ©rence circulaire";de("rÃ©soudre rÃ©fÃ©rence circulaire",Ag);function dl(e,r){return{explanation:N(e.valeur,r),nodeKind:"simplifier unitÃ©"}}dl.nom="simplifier l'unitÃ©";de("simplifier unitÃ©",function(r){const n=this.evaluateNode(r.explanation),t=n.nodeValue,a={...n,...r,explanation:n};if(t==null)return a;if(!n.unit)return{...a,unit:n.unit};const o=Gu(n.unit);return{...a,nodeValue:typeof t=="number"?Fn(n.unit,o,t):t,unit:o}});var Pg=Ze("dans la situation",{valeur:{},"dans la situation":{}},{condition:{si:{"est non dÃ©fini":"dans la situation"},alors:"valeur",sinon:"dans la situation"}});function Og(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):rr(1),tranches:_i(e.tranches,r)},nodeKind:"taux progressif"}}var Vg=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new U("EvaluationError","Division by zero",{dottedName:""});const a=yi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}),o={...e,explanation:{tranches:a,assiette:n,multiplicateur:t},unit:Ar("%")},s=a[a.length-1];if(a.every(({isActive:A})=>A===!1)||s.isActive&&s.plafond.nodeValue===1/0){const A=Or(Ar("%"),r(s.taux)),{nodeValue:D,missingVariables:G}=A;return s.taux=A,s.nodeValue=D,s.missingVariables=G,{...o,nodeValue:D,missingVariables:G}}if(a.every(({isActive:A})=>A!==!0)||typeof n.nodeValue!="number")return{...o,nodeValue:void 0,missingVariables:qe(a)};const u=a.findIndex(({isActive:A})=>A===!0),l=a[u];l.taux=Or(Ar("%"),r(l.taux));const f=a[u-1];f&&(f.taux=Or(Ar("%"),r(f.taux)),f.isActive=!0);const p=f?f.taux:l.taux,m=[p,l.taux];if(m.some(A=>A.nodeValue===void 0))return l.nodeValue=void 0,{...o,nodeValue:void 0,missingVariables:qe(m)};const $=p.nodeValue,v=l.taux.nodeValue,g=l.plancherValue,k=l.plafondValue,E=(v-$)/(k-g),C=$+(n.nodeValue-g)*E;return l.nodeValue=C,{...o,nodeValue:C,missingVariables:{}}};de("taux progressif",Vg);var ji="texte";function Va(e,r){const n=[];let t=0;for(const{0:a,index:o}of e.matchAll(/{{(.|\n)*?}}/g)){const s=a.slice(2,-2).trim(),u=N(s,r);n.push(e.substring(t,o),u),t=(o??0)+a.length}return n.push(e.slice(t)),{nodeKind:ji,explanation:n}}Va.nom=ji;de(ji,function(r){const n=r.explanation.map(t=>typeof t=="string"?t:this.evaluateNode(t));return{...r,explanation:n,missingVariables:qe(r.explanation.filter(t=>typeof t!="string")),nodeValue:n.map(t=>typeof t=="string"?t:Dh(t)).join("")}});var Sg=an("toutes ces conditions",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({et:[r,n]}),"oui")),qg=an("une de ces conditions",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({ou:[r,n]}),"non"));function Ht(e,r){const n=N(e.valeur,r),t=Ar(e.unitÃ©,r.getUnitKey);return{explanation:n,unit:t,nodeKind:Ht.nom}}Ht.nom="unitÃ©";de(Ht.nom,function(r){const n=this.evaluateNode(r.explanation);let t=n.nodeValue;if(t!==null&&"unit"in r)try{t=Fn(n.unit,r.unit,n.nodeValue)}catch(a){Bt(this.context.logger,"Erreur lors de la conversion d'unitÃ© explicite",{dottedName:this.cache._meta.evaluationRuleStack[0]},a)}return{...r,nodeValue:t,explanation:n,missingVariables:n.missingVariables}});function zt(e,r){return{missingVariable:e["variable manquante"],nodeKind:zt.nom,explanation:N(e.valeur,r)}}zt.nom="variable manquante";de(zt.nom,function(r){const n=this.evaluateNode(r.explanation),t=Object.values(n.missingVariables).reduce((a,o)=>a>o?a:o,0);return{...r,nodeValue:n.nodeValue,unit:n.unit,explanation:n,missingVariables:Vr(n.missingVariables,{[r.missingVariable]:t+1})}});var Ig=(e,r,n)=>{if(e==="valeur")return N(r,n);const{variations:t,...a}=r;return N({variations:t.map(({alors:s,sinon:u,si:l})=>{const{attributs:f,...p}=s??u;return{[s!==void 0?"alors":"sinon"]:{...f,[e]:{...a,...p}},...l!==void 0&&{si:l}}})},n)};function Ng(e,r){return{explanation:e.map(({si:t,alors:a,sinon:o})=>o!==void 0?{consequence:N(o,r),condition:rr(!0)}:{consequence:N(a,r),condition:N(t,r)}),nodeKind:"variations"}}var Rg=function(e){const[r,n,t]=e.explanation.reduce(([a,o,s,u],{condition:l,consequence:f},p)=>{if(u===!0)return[a,[...o,{condition:l,consequence:f}],s,u];const m=this.evaluateNode(l),$=u===void 0?u:!u&&(m.nodeValue===void 0?void 0:m.nodeValue!==!1&&m.nodeValue!==null);if($===!1||$===null)return[a,[...o,{condition:m,consequence:f}],s,u];let v;if(m.nodeValue!==!1&&m.nodeValue!==null&&(v=this.evaluateNode(f),s))try{v=Or(s,v)}catch(g){Bt(this.context.logger,`L'unitÃ© de la branche nÂ° ${p+1} du mÃ©canisme 'variations' n'est pas compatible avec celle d'une branche prÃ©cÃ©dente`,{dottedName:this.cache._meta.evaluationRuleStack[0]},g)}return[$&&v?.nodeValue,[...o,{condition:m,consequence:v??f}],s||v?.unit,u||$]},[null,[],void 0,!1]);return{...e,nodeValue:r,...t!==void 0&&{unit:t},explanation:n,missingVariables:n.reduce((a,{condition:o,consequence:s})=>Vr(a,Vr(Hu(o.missingVariables),"nodeValue"in o&&o.nodeValue!==!1&&o.nodeValue!==null?s.missingVariables:{})),{})}};de("variations",Rg);var Tg=Bu(Hb(),1),Xn=([e,,r,,n])=>({[r.value.toLowerCase()]:[e,n]}),Dg=([e,,r])=>({[e]:[Dr([{value:"0"}]),r]}),Bg=({value:e})=>({variable:e}),Ro=([{value:e}])=>{console.log(e)},Dr=([{value:e}])=>({constant:{type:"number",nodeValue:parseFloat(e)}}),Lg=e=>({...Dr(e),unitÃ©:e[2].value}),To=([{value:e}])=>({constant:{type:"date",nodeValue:el(e)}}),Xt=([{value:e}])=>({constant:{type:"boolean",nodeValue:e==="oui"}}),Do=([{value:e}])=>({constant:{type:"string",nodeValue:e.slice(1,-1)}}),Fg=Bu(zb(),1);function le(e){return e[0]}var Ug="(?:(?:0?[1-9]|[12][0-9]|3[01])\\/)?(?:0?[1-9]|1[012])\\/\\d{4}",Hg="[a-zA-ZÃ-Å¿â¬$%]",zg="[a-zA-ZÃ-Å¿0-9',Â°]",Sa=`${Hg}(?:[-']?${zg}+)*`,Jg="-?(?:[1-9][0-9]+|[0-9])(?:\\.[0-9]+)?",ee=Fg.default.compile({"(":"(",")":")","[":"[","]":"]",comparison:[">","<",">=","<=","=","!="],date:new RegExp(Ug),boolean:["oui","non"],number:new RegExp(Jg),word:new RegExp(Sa),string:[/'.*'/,/".*"/],JSONObject:/{.*}/,additionSubstraction:/[\+-]/,multiplicationDivision:["*","/"],dot:" . ",".":".",space:{match:/[\s]+/,lineBreaks:!0}}),bn=e=>({value:e.map(r=>r&&r.value).join("")}),et=([e,r])=>Array.isArray(r)?bn([e,...r]):e,Wg=ee,Kg=[{name:"main",symbols:["Comparison"],postprocess:le},{name:"main",symbols:["NumericValue"],postprocess:le},{name:"main",symbols:["Date"],postprocess:le},{name:"main",symbols:["NonNumericTerminal"],postprocess:le},{name:"main",symbols:["JSONObject"],postprocess:le},{name:"NumericValue",symbols:["AdditionSubstraction"],postprocess:le},{name:"NumericValue",symbols:["Negation"],postprocess:le},{name:"NumericTerminal",symbols:["Variable"],postprocess:le},{name:"NumericTerminal",symbols:["number"],postprocess:le},{name:"Negation",symbols:[{literal:"-"},ee.has("space")?{type:"space"}:space,"Parentheses"],postprocess:Dg},{name:"Parentheses",symbols:[{literal:"("},ee.has("space")?{type:"space"}:space,"NumericValue",ee.has("space")?{type:"space"}:space,{literal:")"}],postprocess:([,,e])=>e},{name:"Parentheses",symbols:[{literal:"("},"NumericValue",{literal:")"}],postprocess:([,e])=>e},{name:"Parentheses",symbols:["NumericTerminal"],postprocess:le},{name:"Date",symbols:["Variable"],postprocess:le},{name:"Date",symbols:[ee.has("date")?{type:"date"}:To],postprocess:To},{name:"Comparison",symbols:["Comparable",ee.has("space")?{type:"space"}:space,ee.has("comparison")?{type:"comparison"}:comparison,ee.has("space")?{type:"space"}:space,"Comparable"],postprocess:Xn},{name:"Comparison",symbols:["Date",ee.has("space")?{type:"space"}:space,ee.has("comparison")?{type:"comparison"}:comparison,ee.has("space")?{type:"space"}:space,"Date"],postprocess:Xn},{name:"Comparable$subexpression$1",symbols:["AdditionSubstraction"]},{name:"Comparable$subexpression$1",symbols:["NonNumericTerminal"]},{name:"Comparable",symbols:["Comparable$subexpression$1"],postprocess:([[e]])=>e},{name:"NonNumericTerminal",symbols:[ee.has("boolean")?{type:"boolean"}:Xt],postprocess:Xt},{name:"NonNumericTerminal",symbols:[ee.has("string")?{type:"string"}:Do],postprocess:Do},{name:"Variable$ebnf$1",symbols:[]},{name:"Variable$ebnf$1$subexpression$1",symbols:[ee.has("dot")?{type:"dot"}:dot,"Words"],postprocess:bn},{name:"Variable$ebnf$1",symbols:["Variable$ebnf$1","Variable$ebnf$1$subexpression$1"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Variable",symbols:["Words","Variable$ebnf$1"],postprocess:e=>Bg(et(e))},{name:"Words$ebnf$1$subexpression$1$ebnf$1",symbols:[ee.has("space")?{type:"space"}:space],postprocess:le},{name:"Words$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Words$ebnf$1$subexpression$1",symbols:["Words$ebnf$1$subexpression$1$ebnf$1","WordOrNumber"],postprocess:bn},{name:"Words$ebnf$1",symbols:["Words$ebnf$1$subexpression$1"]},{name:"Words$ebnf$1$subexpression$2$ebnf$1",symbols:[ee.has("space")?{type:"space"}:space],postprocess:le},{name:"Words$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Words$ebnf$1$subexpression$2",symbols:["Words$ebnf$1$subexpression$2$ebnf$1","WordOrNumber"],postprocess:bn},{name:"Words$ebnf$1",symbols:["Words$ebnf$1","Words$ebnf$1$subexpression$2"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Words",symbols:["WordOrKeyword","Words$ebnf$1"],postprocess:et},{name:"Words",symbols:[ee.has("word")?{type:"word"}:Sa],postprocess:le},{name:"WordOrKeyword",symbols:[ee.has("word")?{type:"word"}:Sa],postprocess:le},{name:"WordOrKeyword",symbols:[ee.has("boolean")?{type:"boolean"}:Xt],postprocess:le},{name:"WordOrNumber",symbols:["WordOrKeyword"],postprocess:le},{name:"WordOrNumber",symbols:[ee.has("number")?{type:"number"}:Dr],postprocess:le},{name:"UnitDenominator$ebnf$1$subexpression$1",symbols:[ee.has("space")?{type:"space"}:space]},{name:"UnitDenominator$ebnf$1",symbols:["UnitDenominator$ebnf$1$subexpression$1"],postprocess:le},{name:"UnitDenominator$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"UnitDenominator",symbols:["UnitDenominator$ebnf$1",{literal:"/"},"Words"],postprocess:bn},{name:"UnitNumerator$ebnf$1$subexpression$1",symbols:[{literal:"."},"Words"]},{name:"UnitNumerator$ebnf$1",symbols:["UnitNumerator$ebnf$1$subexpression$1"],postprocess:le},{name:"UnitNumerator$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"UnitNumerator",symbols:["Words","UnitNumerator$ebnf$1"],postprocess:et},{name:"Unit$ebnf$1",symbols:["UnitNumerator"],postprocess:le},{name:"Unit$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Unit$ebnf$2",symbols:[]},{name:"Unit$ebnf$2",symbols:["Unit$ebnf$2","UnitDenominator"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Unit",symbols:["Unit$ebnf$1","Unit$ebnf$2"],postprocess:et},{name:"AdditionSubstraction",symbols:["AdditionSubstraction",ee.has("space")?{type:"space"}:space,ee.has("additionSubstraction")?{type:"additionSubstraction"}:additionSubstraction,ee.has("space")?{type:"space"}:space,"MultiplicationDivision"],postprocess:Xn},{name:"AdditionSubstraction",symbols:["MultiplicationDivision"],postprocess:le},{name:"MultiplicationDivision",symbols:["MultiplicationDivision",ee.has("space")?{type:"space"}:space,ee.has("multiplicationDivision")?{type:"multiplicationDivision"}:multiplicationDivision,ee.has("space")?{type:"space"}:space,"Parentheses"],postprocess:Xn},{name:"MultiplicationDivision",symbols:["Parentheses"],postprocess:le},{name:"number",symbols:[ee.has("number")?{type:"number"}:Dr],postprocess:Dr},{name:"number$ebnf$1$subexpression$1",symbols:[ee.has("space")?{type:"space"}:space]},{name:"number$ebnf$1",symbols:["number$ebnf$1$subexpression$1"],postprocess:le},{name:"number$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"number",symbols:[ee.has("number")?{type:"number"}:Dr,"number$ebnf$1","Unit"],postprocess:Lg},{name:"JSONObject",symbols:[ee.has("JSONObject")?{type:"JSONObject"}:Ro],postprocess:Ro}],Qg="main",Gg={Lexer:Wg,ParserRules:Kg,ParserStart:Qg},{Grammar:Zg,Parser:Yg}=Tg.default,Xg=Zg.fromCompiled(Gg),qa=new Yg(Xg),e0=qa.save();function r0(e,r){const n=(e+"").replace(/\s*\n\s*/g," ").trim();try{qa.restore(e0);const[t]=qa.feed(n).results;if(t==null)throw new U("InternalError",`
Un problÃ¨me est survenu lors du parsing de l'expression \`${n}\` :

	le parseur Nearley n'a pas rÃ©ussi Ã  parser l'expression.
`,{dottedName:r});return t}catch(t){throw t instanceof U?t:new U("SyntaxError",`\`${n}\` n'est pas une expression valide`,{dottedName:r},t)}}function n0(e,r){if(!r.dottedName)throw new Ln({message:"Une rÃ©fÃ©rence ne peut pas exister en dehors d'une rÃ¨gle (`context.dottedName` est vide)",context:r});return{nodeKind:"reference",name:e,contextDottedName:r.dottedName}}de("reference",function(r){if(!r.dottedName)throw new Ln(r);const n=this.evaluateNode(this.context.parsedRules[r.dottedName]);return delete n.sourceMap,{...n,...r}});function N(e,r){if(e==null)throw new U("SyntaxError",`
	Une des valeurs de la formule est vide.
	VÃ©rifiez que tous les champs Ã  droite des deux points sont remplis`,{dottedName:r.dottedName});if(typeof e=="boolean")throw new U("SyntaxError",`
Les valeurs boolÃ©ennes true / false ne sont acceptÃ©es.
Utilisez leur contrepartie franÃ§aise : 'oui' / 'non'`,{dottedName:r.dottedName});const n=typeof e=="object"?e:r0(e,r.dottedName);return"nodeKind"in n?n:"nom"in n?og(n,r):{...t0(n,r),rawNode:e}}function Bo(e,r){if(Array.isArray(e))throw new U("SyntaxError",`
Il manque le nom du mÃ©canisme pour le tableau : [${e.map(s=>`'${s}'`).join(", ")}]
Les mÃ©canisme possibles sont : 'somme', 'le maximum de', 'le minimum de', 'toutes ces conditions', 'une de ces conditions'.
		`,{dottedName:r.dottedName});const n=Object.keys(e);if(n.length>1)throw new U("SyntaxError",`
Les mÃ©canismes suivants se situent au mÃªme niveau : ${n.map(s=>`'${s}'`).join(", ")}
Cela vient probablement d'une erreur dans l'indentation
	`,{dottedName:r.dottedName});if(n.length===0)return{nodeKind:"constant",nodeValue:void 0};const t=n[0],a=e[t],o=vl[t];if(!o)throw new U("SyntaxError",`Le mÃ©canisme "${t}" est inconnu.

VÃ©rifiez qu'il n'y ait pas d'erreur dans l'orthographe du nom.`,{dottedName:r.dottedName});try{return a?.composantes?Ch(t,a,r):a?.variations&&Object.values(a).length>1?Ig(t,a,r):o(a,r)}catch(s){throw s instanceof U?s:new U("SyntaxError",t?`â¡ï¸ Dans le mÃ©canisme ${t}
${s.message}`:s.message,{dottedName:r.dottedName})}}var $l=[zt,Yu,dh,hg,Ft,Ht,dl,jg,Eg,xg,Pg,fl,fh];function t0(e,r){const n=$l.find(o=>o.nom in e);if(!n)return Bo(e,r);const{[n.nom]:t,...a}=e;return Bo({[n.nom]:{valeur:a,[n.nom]:t}},r)}var vl={...yg,...$l.reduce((e,r)=>({[r.nom]:r,...e}),{}),"inversion numÃ©rique":pg,"le maximum de":fg,"le minimum de":dg,"taux progressif":Og,"toutes ces conditions":Sg,"est non dÃ©fini":nl,"est non applicable":cl,"est applicable":qh,"est dÃ©fini":Sh,"une de ces conditions":qg,"une possibilitÃ©":gg,condition:Xu,barÃ¨me:xh,durÃ©e:Vh,grille:lg,multiplication:No,produit:No,recalcul:Mg,somme:$g,moyenne:vg,[Va.nom]:Va,valeur:N,variable:n0,variations:Ng,constant:e=>({type:e.type,fullPrecision:!0,isNullable:e.nodeValue==null,missingVariables:{},nodeValue:e.nodeValue,nodeKind:"constant"})},a0=Object.keys(vl);function In(e){return{dottedName:"",logger:console,getUnitKey:r=>r,parsedRules:{},referencesMaps:{referencesIn:new Map,rulesThatUse:new Map},nodesTypes:new WeakMap,rulesReplacements:{},...e}}function ea(e){return{...e,parsedRules:{...e.parsedRules},referencesMaps:{referencesIn:new Map(e.referencesMaps.referencesIn),rulesThatUse:new Map(e.referencesMaps.rulesThatUse)}}}function ut(e,r=In({})){if(typeof e=="string")throw new U("EngineError","Publicodes does not parse yaml rule sets itself anymore. Please provide a parsed js object. E.g. the `eemeli/yaml` package.",{});let n=Zr(e);const t=In(r);let a=t.parsedRules;t.parsedRules={};for(const p in n){let m=n[p];if((typeof m=="string"||typeof m=="number")&&(m={valeur:`${m}`}),typeof m!="object")throw new U("SyntaxError",`Rule ${p} is incorrectly written. Please give it a proper value.`,{dottedName:p});const $=Zr(m);$.nom=p,N($,t)}let o={};for(const p in a)o[p]=a[p];for(const p in t.parsedRules)o[p]=t.parsedRules[p];let[s,u]=i0(o,t.parsedRules,t.referencesMaps),l;[o,l]=ag({parsedRules:o,newRules:s,referencesMaps:u,previousReplacements:t.rulesReplacements,logger:t.logger});const f=ph(Object.keys(s),o,t.nodesTypes);return{parsedRules:o,nodesTypes:f,referencesMaps:u,rulesReplacements:l}}function i0(e,r,n){const t=Ot(s=>Pa(s,e)),a=Ot(s=>{const u=Pa(s,e);return u&&Ei(u,n),u});return[Kb(s=>s.nodeKind==="replacementRule"?t(s):a(s),r),n]}var rt=()=>({_meta:{evaluationRuleStack:[],parentRuleStack:[],traversedVariablesStack:[]},nodes:new Map}),o0=class bl{constructor(r={},n={}){ue(this,"baseContext");ue(this,"context");ue(this,"publicParsedRules");ue(this,"cache",rt());ue(this,"subEngines",[]);ue(this,"subEngineId");ue(this,"checkExperimentalRule",Lu(r=>(r.nodeKind==="reference"&&Aa(this.context.parsedRules,r.dottedName)&&wo(this.baseContext.logger,r.dottedName),"continue")));const t={dottedName:"",...n};this.baseContext=In({...t,...ut(r,t)}),this.context=this.baseContext,this.publicParsedRules={};for(const a in this.baseContext.parsedRules){const o=this.baseContext.parsedRules[a];!o.private&&Ut(this.baseContext.parsedRules,"",a)&&(this.publicParsedRules[a]=o)}}resetCache(){this.cache=rt()}setSituation(r={},n={}){this.resetCache();const t=n.keepPreviousSituation??!1;Object.keys(r).forEach(s=>{if(!(s in this.baseContext.parsedRules))throw new U("EvaluationError",`Erreur lors de la mise Ã  jour de la situation : ${s} n'existe pas dans la base de rÃ¨gle.`,{dottedName:s});if(this.baseContext.parsedRules[s].private)throw new U("EvaluationError",`Erreur lors de la mise Ã  jour de la situation : ${s} est une rÃ¨gle privÃ©e (il n'est pas possible de modifier une rÃ¨gle privÃ©e).`,{dottedName:s})});const a=Object.fromEntries(Object.entries(r).map(([s,u])=>[`[privÃ©] ${s} . $SITUATION`,u&&typeof u=="object"&&"nodeKind"in u?{valeur:u}:u])),o=ea(this.baseContext);try{this.context={...this.baseContext,...ut(a,t?this.context:this.baseContext)}}catch(s){throw this.baseContext=o,s}return this.baseContext=o,Object.keys(r).forEach(s=>{Aa(this.context.parsedRules,s)&&wo(this.baseContext.logger,s),this.checkExperimentalRule(this.context.parsedRules[`${s} . $SITUATION`])}),this}inversionFail(){return!!this.cache.inversionFail}getRule(r){if(!(r in this.baseContext.parsedRules))throw new U("UnknownRule",`La rÃ¨gle '${r}' n'existe pas`,{dottedName:r});if(!(r in this.publicParsedRules))throw new U("PrivateRule",`La rÃ¨gle ${r} est une rÃ¨gle privÃ©e.`,{dottedName:r});return this.publicParsedRules[r]}getParsedRules(){return this.publicParsedRules}evaluate(r){const n=this.cache.nodes.get(r);if(n)return n;this.context={...this.context,...ut({"[privÃ©] $EVALUATION":r&&typeof r=="object"&&"nodeKind"in r?{valeur:r}:r},this.context)},this.checkExperimentalRule(this.context.parsedRules.$EVALUATION),this.cache._meta=rt()._meta;const t=this.evaluateNode(this.context.parsedRules.$EVALUATION.explanation.valeur);return this.cache.nodes.set(r,t),t}evaluateNode(r){const n=this.cache.nodes.get(r);if(n!==void 0)return n.traversedVariables?.forEach(o=>this.cache._meta.traversedVariablesStack[0]?.add(o)),n;if(!xn[r.nodeKind])throw new U("EvaluationError",`Unknown "nodeKind": ${r.nodeKind}`,{dottedName:""});const t=this.cache._meta.traversedVariablesStack.length===0||r.nodeKind==="rule";t&&this.cache._meta.traversedVariablesStack.unshift(new Set),r.nodeKind==="reference"&&r.dottedName&&r.dottedName in this.publicParsedRules&&this.cache._meta.traversedVariablesStack[0].add(r.dottedName);const a=xn[r.nodeKind].call(this,r);return t&&(a.traversedVariables=Array.from(this.cache._meta.traversedVariablesStack.shift()??[]),this.cache._meta.traversedVariablesStack.length>0&&a.traversedVariables.forEach(o=>{this.cache._meta.traversedVariablesStack[0].add(o)})),this.cache.nodes.set(r,a),a}shallowCopy(){const r=new bl;return r.baseContext=ea(this.baseContext),r.context=ea(this.context),r.publicParsedRules=this.publicParsedRules,r.cache={...rt(),nodes:new Map(this.cache.nodes)},r}};class s0 extends o0{constructor(n,t){super(n);ue(this,"elmApp");this.elmApp=t}setSituation(n,t){return this.elmApp.ports.situationUpdated.send(null),super.setSituation(n,t)}evaluateAll(n){const t=n.map(a=>{const o=super.evaluate(a);return[a,{nodeValue:o.nodeValue??null,isNullable:o?.isNullable??o?.explanation?.ruleDisabledByItsParent??!1,missingVariables:Object.keys(o.missingVariables)}]});return this.elmApp.ports.evaluatedRules.send(t),t}}const u0={titre:"Alimentation",icÃ´nes:"ð½ï¸",formule:{somme:["repas","petits dÃ©jeuners","boissons","ecocups","dÃ©chets","artistes"]},unitÃ©:"kgCO2e",description:`C'est l'un des postes d'Ã©missions les plus importants : l'impact des repas carnÃ©s est particuliÃ¨rement important, 
privilÃ©giez une **proposition vÃ©gÃ©tarienne** pour vos repas.
Cette catÃ©gorie inclut Ã©galement l'impact des **dÃ©chets** gÃ©nÃ©rÃ©s par la restauration du festival.
`,note:`A ajouter dans une V2 ?
  - Part de nourriture bio sur l'ensemble des repas
  - Part de nourriture de saison sur l'ensemble des repas
  - Part de nourriture locale sur l'ensemble des repas
  - Prise en compte du gaspillage ?
`},l0={titre:"Communication",icÃ´nes:"ð¢",description:`Ce poste d'Ã©mission inclut l'impact de liÃ©e Ã  la communication du festival, incluant le textile, le merchandising, les supports numÃ©riques et les impressions.
Pour le moment, seuls les impacts du **textile pour les Ã©quipes** et le **merchandising** sont pris en compte.
`,formule:{somme:["merchandising","textile bÃ©nÃ©voles","numÃ©rique","impressions"]},unitÃ©:"kgCO2e"},c0={titre:"Informations",icÃ´nes:"â¹ï¸",description:`Pour calculer l'empreinte carbone de votre festival, nous avons besoin de quelques informations sur celui-ci.
Renseignez la **durÃ©e** de l'Ã©vÃ¨nement, le total des **entrÃ©es** journaliÃ¨res, le nombre d'**organisateurs et bÃ©nÃ©voles**, le nombre de **scÃ¨nes**.

*Essayez Ã©galement d'estimer le nombre d'**artistes (Ã©quipe incluse)** par mode de transport.*
`},m0={titre:"Infrastructures",icÃ´nes:"ðï¸",description:`Ce poste d'Ã©mission inclut l'impact des **bÃ¢timents** et de la **scÃ©nographie** du festival. 
Pour le moment, il est possible de paramÃ©trer seulement les **dÃ©penses** liÃ©es Ã  la location du matÃ©riel.
`,formule:{somme:["bÃ¢timents","scÃ©nographie","toilettes"]},unitÃ©:"kgCO2e"},p0={titre:"RÃ©sultats"},f0={titre:"Transport",icÃ´nes:"ð",formule:{somme:["public","artistes"]},description:`Le transport des festivaliers et des artistes est **LE** poste important du bilan carbone d'un festival. 
Estimez les distances parcourues par les festivaliers et les artistes pour venir au festival et les modes de transport utilisÃ©s.

*L'**avion** est de loin le mode de transport le plus Ã©metteur de CO2e, mais la **voiture** n'est pas en reste. Encouragez le train ou le covoiturage pour vos dÃ©placements.*
`,unitÃ©:"kgCO2e"},d0=null,$0=null,hl={alimentation:u0,"alimentation . artistes":{titre:"Alimentation des artistes",formule:{somme:["repas","petits dÃ©jeuners","eau en bouteille"]},note:`Par dÃ©faut, on considÃ¨re que les artistes consomment un repas sur place, un petit dÃ©jeuner s'ils sont hÃ©bergÃ©s.
`},"alimentation . artistes . repas":{formule:{recalcul:{rÃ¨gle:"alimentation . repas",avec:{"informations . nombre de repas total":"informations . nombre artistes * 1 repas","alimentation . repas . proposition":"alimentation . artistes . repas . type"}}}},"alimentation . artistes . repas . type":{titre:"RÃ©gime alimentaire des artistes",question:"Quelle type de rÃ©gime alimentaire prÃ©voyez-vous pour les artistes ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["vÃ©gÃ©talien","vÃ©gÃ©tarien","mixte vÃ©gÃ© viande","viande uniquement"]}},"par dÃ©faut":"'mixte vÃ©gÃ© viande'"},"alimentation . artistes . repas . type . vÃ©gÃ©talien":{titre:"Uniquement vÃ©gan"},"alimentation . artistes . repas . type . vÃ©gÃ©tarien":{titre:"Uniquement vÃ©gÃ©tarien"},"alimentation . artistes . repas . type . mixte vÃ©gÃ© viande":{titre:"Mixte vÃ©gÃ©tarien / viande"},"alimentation . artistes . repas . type . viande uniquement":{titre:"Uniquement carnÃ©"},"alimentation . artistes . petits dÃ©jeuners":{"applicable si":"hÃ©bergement . artistes prÃ©sent",formule:{recalcul:{rÃ¨gle:"alimentation . petits dÃ©jeuners",avec:{"alimentation . petits dÃ©jeuners . nombre":"informations . nombre artistes * 1 repas"}}}},"alimentation . artistes . eau en bouteille":{"applicable si":"prÃ©sent",formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte",note:`On fait l'hypothÃ¨se que les artistes consomment de l'eau en bouteille.
Si eau en bouteille: 0.27 kgCO2e/l
`},"alimentation . artistes . eau en bouteille . prÃ©sent":{titre:"Eau en bouteille pour les artistes",question:"Allez-vous prÃ©voir de l'eau en bouteille pour les artistes ?","par dÃ©faut":"oui"},"alimentation . artistes . eau en bouteille . quantitÃ©":{formule:"0.5 l * informations . nombre artistes"},"nosgestesclimat . alimentation . boisson . tasse de cafÃ©":{titre:"Empreinte d'une tasse de cafÃ©",formule:"empreinte cafÃ© moulu * quantitÃ© cafÃ© par tasse",unitÃ©:"kgCO2e/tasse",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de cafÃ© . empreinte cafÃ© moulu":{formule:10.09,unitÃ©:"kgCO2e/kg",note:"Facteur d'Ã©mission issu d'[Agibalyse, cafÃ© moulu](https://agribalyse.ademe.fr/app/aliments/18003#Caf%C3%A9,_moulu).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de cafÃ© . quantitÃ© cafÃ© par tasse":{formule:.012,unitÃ©:"kg/tasse",note:"on fait l'hypothÃ¨se qu'une tasse de cafÃ© contient en moyenne 12 grammes de cafÃ© moulu.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ©":{titre:"Empreinte d'une tasse de thÃ©",formule:"empreinte thÃ© infusÃ© sans consommation * quantitÃ© thÃ© par tasse",unitÃ©:"kgCO2e/tasse",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . empreinte thÃ© infusÃ© sans consommation":{formule:"empreinte thÃ© infusÃ© * (1 - part consommation empreinte thÃ© infusÃ©)",unitÃ©:"kgCO2e/kg",note:`Pour l'empreinte d'une tasse de cafÃ© ou chocolat chaud, la part liÃ©e Ã  la consommation (chauffage de l'eau notamment) n'est pas prise en compte dans le facteur d'Ã©mission
ce qui n'est pas le cas du facteur d'Ã©mission du thÃ© issu d'Agribalyse. Si la boisson est bue Ã  domicile, la consommation est dÃ©jÃ  incluse dans la facture Ã©lectrique du logement.
En revanche, si elle est prise dans un cafÃ©, l'empreinte de la consommation doit Ãªtre ajoutÃ©e.
Nous faisons le choix de ne pas inclure la consommation dans les boissons chaudes
(la part liÃ©e Ã  la consommation Ã©tant nÃ©gligeable pour le cafÃ© et chocolat chaud devant les grains de cafÃ© ou le cacao)
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . quantitÃ© thÃ© par tasse":{formule:.25,unitÃ©:"kg/tasse",note:"On fait l'hypothÃ¨se qu'une tasse de thÃ© fait en moyenne 250 grammes.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . empreinte thÃ© infusÃ©":{formule:.04,unitÃ©:"kgCO2e/kg",note:"Facteur d'Ã©mission issu d'[Agibalyse, thÃ© infusÃ© non sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18020#Th%C3%A9_infus%C3%A9,_non_sucr%C3%A9).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . part consommation empreinte thÃ© infusÃ©":{formule:"25%",note:`Selon la dÃ©composition issu d'[Agibalyse, thÃ© infusÃ© non sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18020#Th%C3%A9_infus%C3%A9,_non_sucr%C3%A9),
la part de consommation dans le facteur d'Ã©mission du thÃ© reprÃ©sente 25%.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur":{formule:{moyenne:["facteur sodas","facteur jus de fruits"]},note:"Cette valeur est bien sÃ»r trÃ¨s approximative.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur sodas":{formule:.51,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, Cola, sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18037#Cola,_sucr%C3%A9,_avec_%C3%A9dulcorants), 0.51 kgCO2e/kg. On considÃ¨re que la masse volumique est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur jus de fruits":{formule:.91,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, Jus multifruit, pur jus, standard](https://agribalyse.ademe.fr/app/aliments/2069#Jus_multifruit,_%C3%A0_base_de_concentr%C3%A9,_standard), 0.91 kgCO2e/kg. On considÃ¨re que la masse volumique est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur":{formule:{moyenne:["facteur biÃ¨re","facteur vin","facteur cocktail"]},note:"Le vin n'a pas la mÃªme empreinte que la biÃ¨re au litre, c'est une grosse simplification.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur biÃ¨re":{formule:1.12,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, biÃ¨re coeur de marchÃ©](https://agribalyse.ademe.fr/app/aliments/5001#Bi%C3%A8re_%22coeur_de_march%C3%A9%22_(4-5%C2%B0_alcool)), 1.12 kgCO2e/kg. On considÃ¨re que la masse volumique de la biÃ¨re est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur vin":{formule:1.22,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, vin blanc sec](https://agribalyse.ademe.fr/app/aliments/5215#Vin_blanc_sec), 1.22 kgCO2e/kg. On considÃ¨re que la masse volumique du vin est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur cocktail":{formule:.91,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, cocktail base rhum](https://agribalyse.ademe.fr/app/aliments/1012#Cocktail_%C3%A0_base_de_rhum), 0.91 kgCO2e/kg. On considÃ¨re que la masse volumique d'un cocktail est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte":{formule:.27,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agibalyse, eau embouteillÃ©e de source](https://agribalyse.ademe.fr/app/aliments/18430#Eau_embouteillÃ©e_de_source).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"alimentation . boissons":{titre:"Boissons",formule:{somme:["froide","chaude"]}},"alimentation . boissons . froide":{formule:{somme:["eau","eau en bouteille bÃ©nÃ©voles","soft","alcool"]},note:"On fait l'hypothÃ¨se que les boissons ne sont pas servies en bouteilles individuelles."},"alimentation . boissons . froide . eau":{formule:"quantitÃ© * empreinte",note:"On fait l'hypothÃ¨se de fontaine Ã  eau."},"alimentation . boissons . froide . eau . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . eau . quantitÃ© par jour":{formule:"0.5 l * informations . nombre de personnes par jour"},"alimentation . boissons . froide . eau . empreinte":{formule:62e-5,unitÃ©:"kgCO2e/l",note:`Facteur d'Ã©mission issu de la base empreinte "Eau potable, mix de provenances".
Si eau en bouteille: 0.27 kgCO2e/l
`},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles":{"applicable si":"eau en bouteille bÃ©nÃ©voles prÃ©sent",formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles prÃ©sent":{titre:"Eau en bouteille pour les Ã©quipes",question:"Allez-vous prÃ©voir de l'eau en bouteille pour les Ã©quipes ?","par dÃ©faut":"oui"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles . quantitÃ© par jour":{formule:"0.5 l/jour * informations . nombre de bÃ©nÃ©voles"},"alimentation . boissons . froide . soft":{formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur",note:`A priori, le facteur d'Ã©mission d'agribalyse considÃ¨re bien une part d'emballage qui correspond Ã  la bouteille. 
On suppose que ce sont des grands formats.
`},"alimentation . boissons . froide . soft . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . soft . quantitÃ© par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour"},"alimentation . boissons . froide . soft . quantitÃ© par jour et par personne":{titre:'QuantitÃ© de boissons "soft" par personne et par jour',question:'Quelle quantitÃ© de boissons "soft" est consommÃ©e par personne et par jour ?',plancher:0,"par dÃ©faut":.5,unitÃ©:"l"},"alimentation . boissons . froide . alcool":{formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . alcool . facteur",note:`On considÃ¨re ici une moyenne de plusieurs types d'alcool dont le facteur d'Ã©mission est nÃ©anmoins trÃ¨s proche.
On pourrait imaginer sÃ©parer la biÃ¨re du reste ouo considÃ©rer seulement la biÃ¨re.
`},"alimentation . boissons . froide . alcool . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . alcool . quantitÃ© par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour"},"alimentation . boissons . froide . alcool . quantitÃ© par jour et par personne":{titre:"QuantitÃ© d'alcool par personne et par jour",question:"Quelle quantitÃ© d'alcool est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":.5,unitÃ©:"l"},"alimentation . boissons . chaude":{formule:{somme:["cafÃ©","thÃ©"]}},"alimentation . boissons . chaude . cafÃ©":{formule:"nombre * nosgestesclimat . alimentation . boisson . tasse de cafÃ©"},"alimentation . boissons . chaude . cafÃ© . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . boissons . chaude . cafÃ© . nombre par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour",note:"On fait l'hypothÃ¨se qu'en moyenne, la consommation sera de 1 cafÃ© par personne et par jour."},"alimentation . boissons . chaude . cafÃ© . quantitÃ© par jour et par personne":{titre:"Tasses de cafÃ© par personne et par jour",question:"Quelle quantitÃ© de cafÃ© est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":1,unitÃ©:"tasse"},"alimentation . boissons . chaude . thÃ©":{formule:"nombre * nosgestesclimat . alimentation . boisson . tasse de thÃ©"},"alimentation . boissons . chaude . thÃ© . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . boissons . chaude . thÃ© . nombre par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour",note:"On fait l'hypothÃ¨se qu'en moyenne, la consommation sera de 1 thÃ© pour 10 personnes par jour."},"alimentation . boissons . chaude . thÃ© . quantitÃ© par jour et par personne":{titre:"Tasses de thÃ© par personne et par jour",question:"Quelle quantitÃ© de thÃ© est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":"10% * 1 tasse",unitÃ©:"tasse"},"alimentation . dÃ©chets":{formule:{somme:["gobelets * surplus","couverts * surplus","assiettes * surplus"]},unitÃ©:"kgCO2e",note:`DerriÃ¨re la production des dÃ©chets, se cache ici une production et non seulement la comptabilitÃ© de l'empreinte de la fin de vie des dÃ©chets 
finalement assez dÃ©risoire. On a donc ici ce que contiendront les poubelles et qui sont des Ã©lÃ©ments directement issus du festival
(vaisselle en cartons, papier).
`},"alimentation . dÃ©chets . surplus":{formule:"110%",note:`L'objectif ici est d'avoir une idÃ©e de l'impact du reste des dÃ©chets du festival en aplicant un facteur correctif (dÃ©fini arbitrairement)
qui a l'avantage de tenir compte des pratiques du festival.
`},"alimentation . dÃ©chets . recyclage":{titre:"Mise en place du tri sÃ©lectif",question:"Allez-vous mettre en place un tri sÃ©lectif et un recyclage des dÃ©chets ?","par dÃ©faut":"non"},"alimentation . dÃ©chets . gobelets":{"non applicable si":"ecocups prÃ©sent",formule:"2 gobelet * informations . nombre de jours * informations . nombre de personnes par jour * empreinte",unitÃ©:"kgCO2e",note:"On considÃ¨re 2 gobelets par personne par jour."},"alimentation . dÃ©chets . gobelets . empreinte":{formule:{variations:[{si:'gobelets . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'gobelets . type = "carton"',alors:"type . carton . poids * empreinte carton par kg"}]},unitÃ©:"kgCO2e/gobelet"},"alimentation . dÃ©chets . gobelets . type":{titre:"Type de gobelets",question:"Quel type de gobelets allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","carton"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . gobelets . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . gobelets . type . plastique . poids":{formule:.01,unitÃ©:"kg/gobelet"},"alimentation . dÃ©chets . gobelets . type . carton":null,"alimentation . dÃ©chets . gobelets . type . carton . poids":{formule:.01,unitÃ©:"kg/gobelet",note:"On considÃ¨re 10g par gobelet."},"alimentation . dÃ©chets . couverts":{formule:"2 couvert/repas * informations . nombre de jours * informations . nombre de repas par jour * empreinte",unitÃ©:"kgCO2e"},"alimentation . dÃ©chets . couverts . empreinte":{formule:{variations:[{si:'couverts . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'couverts . type = "bois"',alors:"type . bois . poids * empreinte bois par kg"}]},unitÃ©:"kgCO2e/couvert"},"alimentation . dÃ©chets . couverts . type":{titre:"Type de couverts",question:"Quel type de couverts allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","bois"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . couverts . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . couverts . type . plastique . poids":{formule:.002,unitÃ©:"kg/couvert"},"alimentation . dÃ©chets . couverts . type . bois":null,"alimentation . dÃ©chets . couverts . type . bois . poids":{formule:.002,unitÃ©:"kg/couvert",note:"On considÃ¨re 2g par couvert."},"alimentation . dÃ©chets . assiettes":{formule:"1 assiette/repas * informations . nombre de jours * informations . nombre de repas par jour * empreinte",unitÃ©:"kgCO2e"},"alimentation . dÃ©chets . assiettes . empreinte":{formule:{variations:[{si:'assiettes . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'assiettes . type = "carton"',alors:"type . carton . poids * empreinte carton par kg"}]},unitÃ©:"kgCO2e/assiette"},"alimentation . dÃ©chets . assiettes . type":{titre:"Type d'assiettes",question:"Quel type de gobelets allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","carton"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . assiettes . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . assiettes . type . plastique . poids":{formule:.005,unitÃ©:"kg/assiette"},"alimentation . dÃ©chets . assiettes . type . carton":null,"alimentation . dÃ©chets . assiettes . type . carton . poids":{formule:.005,unitÃ©:"kg/assiette",note:"On considÃ¨re 10g par assiette."},"alimentation . dÃ©chets . empreinte plastique par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re du platisque polypropylÃ¨ne (PP) neuf et l'impact fin de vie.
`},"alimentation . dÃ©chets . empreinte plastique par kg . fabrication":{formule:2,unitÃ©:"kgCO2e/kg",note:`On considÃ¨re du platisque polypropylÃ¨ne (PP) neuf.
FE issus de la base empreinte (PP - polypropylÃ¨ne)
`},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie recyclage":{formule:.434,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Plastique rigide PP bouteilles/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie non recyclÃ©":{formule:2.77,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Plastique pÃ©trosourcÃ© PP/IncinÃ©ration - Impacts)
`},"alimentation . dÃ©chets . empreinte carton par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).
`},"alimentation . dÃ©chets . empreinte carton par kg . fabrication":{formule:.67,unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).

FE issus de la base empreinte (Carton/recyclÃ©)
`},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie recyclage":{formule:.992,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie non recyclÃ©":{formule:.12,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/IncinÃ©ration - Impacts)
`},"alimentation . dÃ©chets . empreinte bois par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).
`},"alimentation . dÃ©chets . empreinte bois par kg . fabrication":{formule:.67,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Carton/recyclÃ©)
`},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie recyclage":{formule:.992,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie non recyclÃ©":{formule:.12,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/IncinÃ©ration - Impacts)
`},"alimentation . ecocups":{"applicable si":"ecocups prÃ©sent",formule:"1 ecocup.jour * informations . nombre de personnes par jour * empreinte / amortissement",unitÃ©:"kgCO2e"},"alimentation . ecocups prÃ©sent":{titre:"Utilisation d'ecocups",question:"Allez-vous utiliser des ecocups pour l'Ã©vÃ©nement ?","par dÃ©faut":"oui"},"alimentation . ecocups . rÃ©utilisation":{titre:"RÃ©utilisation des ecocups",question:"Est-il prÃ©vu de rÃ©utiliser les ecocups pour une autre Ã©dition ?","par dÃ©faut":"non"},"alimentation . ecocups . amortissement":{formule:{variations:[{si:"ecocups . rÃ©utilisation",alors:3},{sinon:1}]},note:"On considÃ¨re que les ecocups servirons sur 3 Ã©ditions."},"alimentation . ecocups . empreinte":{formule:"poids * dÃ©chets . empreinte plastique par kg",unitÃ©:"kgCO2e/ecocup"},"alimentation . ecocups . poids":{formule:.03,unitÃ©:"kg/ecocup"},"nosgestesclimat . alimentation . petit dÃ©jeuner . continental":{titre:"Continental",formule:.289,unitÃ©:"kgCO2e/repas",description:`
> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le \`@incubateur-ademe/nosgestesclimat\`.


Petit dÃ©jeuner avec pain, viennoiserie, beurre, confiture et un fruit.

Voici le menu type utilisÃ© pour notre calcul.

| IngrÃ©dients     | Qte (g) | Kcal  | ProtÃ©ines (g) | Lipides (g) | gCO2e /g | gCO2e |
| --------------- | ------- | ----- | ------------- | ----------- | -------- | ----- |
| Pain            | 50      | 132,5 | 4,5           | 1,6         | 0,67     | 33,5  |
| Vienoiserie     | 50      | 203   | 4             | 10,5        | 1,7      | 85    |
| Beurre demi-sel | 10      | 71,7  | 0,09          | 8,1         | 7,82     | 78,2  |
| Confiture       | 20      | 27,8  | 0,04          | 0,01        | 1,42     | 28,4  |
| Orange          | 100     | 47    | 0,9           | 0,1         | 0,64     | 64    |
| Total           | 230     | 482   | 9,53          | 20,31       |          | 289,1 |
`},"alimentation . petits dÃ©jeuners":{titre:"Petits dÃ©jeuners","applicable si":"petits dÃ©jeuners prÃ©sent",formule:"nombre * nosgestesclimat . alimentation . petit dÃ©jeuner . continental",note:"On considÃ¨re le petits dÃ©jeuner continental de Nos Gestes Climat"},"alimentation . petits dÃ©jeuners prÃ©sent":{titre:"Petits dÃ©jeuners sur l'Ã©vÃ©nement",question:"Proposez-vous des petits dÃ©jeuners sur place ?","par dÃ©faut":"oui"},"alimentation . petits dÃ©jeuners . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . petits dÃ©jeuners . nombre par jour":{formule:"1 repas * informations . nombre de personnes par jour"},"nosgestesclimat . alimentation . plats . vÃ©gÃ©talien . empreinte":{titre:"Empreinte d'un repas vÃ©gÃ©talien",formule:.785,unitÃ©:"kgCO2e/repas",note:`Pour l'instant, en l'absence de repas type vÃ©gÃ©talien dans la [base carbone](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm),
nous prenons l'empreinte du repas vÃ©gÃ©tarien, dans lequel nous substituons les 2 Åufs par du tofu et des noix dans l'entrÃ©e qui devient alors une salade,
en gardant approximativement les mÃªmes quantitÃ©s de calories et de protÃ©ines.

> Note : on peut se demander pourquoi la recette fait mention d'une omelette aux oignons sans inclure les oignons. NÃ©gligeables ? Nous les avons ajoutÃ©s.

Notons finalement que le tofu considÃ©rÃ© ici pourrait Ãªtre remplacÃ© par du soja franÃ§ais et une fabrication du tofu franÃ§aise dÃ©carbonÃ©e, notamment pour Ã©viter la dÃ©forestation et rÃ©duire encore plus les Ã©missions, donnant lieu Ã  un rÃ©gime vÃ©gÃ©talien local. Voir [ce papier](https://www.nature.com/articles/s43016-020-0106-x) Ã  ce propos du soja et de la dÃ©forestation.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien . empreinte":{titre:"Empreinte d'un repas vÃ©gÃ©tarien",formule:1.115,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas vÃ©gÃ©tarien 1" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), [actualisÃ© avec les facteurs d'Ã©mission Agribalyse](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424).

> Note : on peut se demander pourquoi la recette fait mention d'une omelette aux oignons sans inclure les oignons. NÃ©gligeables ? Nous les avons ajoutÃ©.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . viande 1 . empreinte":{titre:"Empreinte d'un repas de type viande 1 (poulet, porc, fromage)",formule:2.098,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas classique 1 (avec poulet)" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), actualisÃ© avec les facteurs d'Ã©mission Agribalyse.

Le facteur d'Ã©mission associÃ© Ã  l'ingrÃ©dient principal (ici le la piÃ¨ce de volaille ou porc) correspond Ã  une moyenne de facteurs d'Ã©missions associÃ©s au porc (piÃ¨ce de viande et charcuterie), poulet, dinde, canard d'Agribalyse.
Cette moyenne est pondÃ©rÃ©e selon les consommations rÃ©elles des FranÃ§ais par type de viande animale.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1200865486) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . viande 2 . empreinte":{titre:"Empreinte d'un repas de type viande 2 (bÅuf, veau, agneau)",formule:5.51,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas classique 2 (avec bÅuf)" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), actualisÃ© avec les facteurs d'Ã©mission Agribalyse.

Le facteur d'Ã©mission associÃ© Ã  l'ingrÃ©dient principal (ici le la piÃ¨ce de viande rouge) correspond Ã  une moyenne de facteurs d'Ã©missions associÃ©s au bÅuf, agneau, veau d'Agribalyse.
Cette moyenne est pondÃ©rÃ©e selon les consommations rÃ©elles des FranÃ§ais par type de viande animale.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1200865486) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"alimentation . repas":{titre:"Repas",formule:{somme:["vÃ©gÃ©talien","vÃ©gÃ©tarien","viande 1","viande 2"]}},"alimentation . repas . vÃ©gÃ©talien":{formule:"nombre * nosgestesclimat . alimentation . plats . vÃ©gÃ©talien . empreinte"},"alimentation . repas . vÃ©gÃ©talien . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . vÃ©gÃ©talien . proportion":{formule:{variations:[{si:"proposition = 'vÃ©gÃ©talien'",alors:"100%"},{sinon:"0%"}]}},"alimentation . repas . vÃ©gÃ©tarien":{formule:"nombre * nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien . empreinte"},"alimentation . repas . vÃ©gÃ©tarien . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . vÃ©gÃ©tarien . proportion":{formule:{variations:[{si:"proposition = 'vÃ©gÃ©tarien'",alors:"100%"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . mixte vÃ©gÃ© viande . proportion vÃ©gÃ©tarien"},{sinon:"0%"}]}},"alimentation . repas . viande 1":{formule:"nombre * nosgestesclimat . alimentation . plats . viande 1 . empreinte"},"alimentation . repas . viande 1 . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . viande 1 . proportion":{formule:{variations:[{si:"proposition = 'viande uniquement'",alors:"proposition . choix viande . proportion viande 1"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . choix viande . proportion viande 1 * proposition . mixte vÃ©gÃ© viande . proportion viande"},{sinon:"0%"}]}},"alimentation . repas . viande 2":{formule:"nombre * nosgestesclimat . alimentation . plats . viande 2 . empreinte"},"alimentation . repas . viande 2 . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . viande 2 . proportion":{formule:{variations:[{si:"proposition = 'viande uniquement'",alors:"proposition . choix viande . proportion viande 2"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . choix viande . proportion viande 2 * proposition . mixte vÃ©gÃ© viande . proportion viande"},{sinon:"0%"}]}},"alimentation . repas . proposition":{titre:"RÃ©gime des repas proposÃ©s",question:"Quelle type de rÃ©gime alimentaire prÃ©voyez-vous ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["vÃ©gÃ©talien","vÃ©gÃ©tarien","mixte vÃ©gÃ© viande","viande uniquement"]}},"par dÃ©faut":"'mixte vÃ©gÃ© viande'"},"alimentation . repas . proposition . vÃ©gÃ©talien":{titre:"Uniquement vÃ©gan"},"alimentation . repas . proposition . vÃ©gÃ©tarien":{titre:"Uniquement vÃ©gÃ©tarien"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande":{titre:"Mixte vÃ©gÃ©tarien / viande"},"alimentation . repas . proposition . viande uniquement":{titre:"Uniquement carnÃ©"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande . proportion vÃ©gÃ©tarien":{"applicable si":"proposition = 'mixte vÃ©gÃ© viande'",titre:"Proportion de repas vÃ©gÃ©tariens",question:"Comment allez-vous rÃ©partir les rÃ©gimes proposÃ©s ?",plancher:0,plafond:100,"par dÃ©faut":"50%",unitÃ©:"%"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande . proportion viande":{"applicable si":"proposition = 'mixte vÃ©gÃ© viande'",formule:"100% - proportion vÃ©gÃ©tarien",unitÃ©:"%"},"alimentation . repas . proposition . choix viande":{"applicable si":{"une de ces conditions":["proposition = 'mixte vÃ©gÃ© viande'","proposition = 'viande uniquement'"]},titre:"Choix de viande",question:"Proposerez-vous de la viande blanche ou viande rouge ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["viande 1","viande 2","les deux"]}},"par dÃ©faut":"'les deux'"},"alimentation . repas . proposition . choix viande . viande 1":{titre:"Viande blanche"},"alimentation . repas . proposition . choix viande . viande 2":{titre:"Viande rouge"},"alimentation . repas . proposition . choix viande . les deux":{titre:"Les 2"},"alimentation . repas . proposition . choix viande . proportion viande 1":{formule:{variations:[{si:"choix viande = 'viande 1'",alors:"100%"},{si:"choix viande = 'les deux'",alors:"50%"},{sinon:"0%"}]}},"alimentation . repas . proposition . choix viande . proportion viande 2":{formule:{variations:[{si:"choix viande = 'viande 2'",alors:"100%"},{si:"choix viande = 'les deux'",alors:"50%"},{sinon:"0%"}]}},"commun . intensitÃ© Ã©lectricitÃ©":{titre:"IntensitÃ© carbone du mix Ã©lectrique franÃ§ais",description:`
> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [\`@incubateur-ademe/publicodes-commun\`](https://github.com/incubateur-ademe/publicodes-commun).


IntensitÃ© moyenne, tous types de consommations confondues, annÃ©e 2022.`,formule:.052,unitÃ©:"kgCO2e/kWh",note:`Ici, on parle du mix Ã©lectrique de consommation. 
Le chiffre est issu de la Base Empreinte (ElectricitÃ©/2022 - mix moyen/consommation) dont la mÃ©thodologie est dÃ©crite dans la [documentation](https://prod-basecarbonesolo.ademe-dri.fr/documentation/UPLOAD_DOC_FR/).
La v2.6 de MicMac donnait une valeur de 12.4gCO2e/kWh pour les fournisseurs d'Ã©lectricitÃ© "verte", mais cette valeur semble correspondre Ã  un calcul thÃ©orique sur l'annÃ©e, et non pas Ã  un calcul rÃ©el, minute par minute.
`},"commun . mois par an":{titre:"Nombre de mois par an",formule:12,unitÃ©:"mois",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . semaines par an":{titre:"Nombre de semaines par an",formule:52,unitÃ©:"semaine",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . jours par semaine":{titre:"Nombre de jours par semaine",formule:7,unitÃ©:"jour/semaine",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . jours par an":{titre:"Nombre de jours par an",formule:365,unitÃ©:"jour",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},communication:l0,"communication . impressions":{titre:"Impressions",formule:0,unitÃ©:"kgCO2e",note:"A venir"},"communication . merchandising":{titre:"Merchandising",formule:{somme:["textile","plastique"]},unitÃ©:"kgCO2e",note:`Pour cette modÃ©lisation, nous nous inspirons de l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf)
en estimant le chiffre d'affaires rÃ©alisÃ© grÃ¢ce au merchandising rÃ©parti sur diffÃ©rents produits textiles (t-shirts et sweat shirts) 
mais Ã©galement des produits dÃ©rivÃ©s "plastiques".

D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
sur les consommations et les achats des festivaliers, le panier moyen pour du merch est de 4â¬ par jour et par personne.

Dans une V2, il s'agira d'affiner l'empreinte carbone associÃ©e aux produits vendu en passant par des FE "physiques"
et en incluant des variations selon l'approvisionnement des produits.
`},"communication . merchandising . surplus production":{formule:"110%",note:`On estime que 10% le surplus de production.
`},"communication . merchandising . chiffre d affaires":{formule:"informations . nombre de festivaliers * merchandising . panier moyen par jour et par personne",unitÃ©:"â¬",note:`D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
sur les consommations et les achats des festivaliers, le panier moyen pour du merch est de 4â¬ par jour et par personne.
`},"communication . merchandising . chiffre d affaires . part textile":{formule:"70%"},"communication . merchandising . chiffre d affaires . part plastique":{formule:"30%"},"communication . merchandising . panier moyen par jour et par personne":{titre:"Montant du panier moyen d'un festivalier par jour pour le merch.",question:"Quel est le montant du panier moyen d'un festivalier par jour ?","par dÃ©faut":4,unitÃ©:"â¬",note:`D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
`},"communication . merchandising . textile":{formule:"surplus production * chiffre d affaires . part textile * chiffre d affaires * ratio monÃ©taire",unitÃ©:"kgCO2e"},"communication . merchandising . textile . ratio monÃ©taire":{formule:"ratio monÃ©taire HT / 1.2 â¬/â¬HT",unitÃ©:"kgCO2e/â¬"},"communication . merchandising . textile . ratio monÃ©taire HT":{formule:.6,unitÃ©:"kgCO2e/â¬HT",note:`Facteur d'Ã©mission issu de la base empreinte "Service/Textile et habillement".
`},"communication . merchandising . plastique":{formule:"surplus production * chiffre d affaires . part plastique * chiffre d affaires * ratio monÃ©taire",unitÃ©:"kgCO2e"},"communication . merchandising . plastique . ratio monÃ©taire":{formule:"ratio monÃ©taire HT / 1.2 â¬/â¬HT",unitÃ©:"kgCO2e/â¬"},"communication . merchandising . plastique . ratio monÃ©taire HT":{formule:.8,unitÃ©:"kgCO2e/â¬HT",note:`Facteur d'Ã©mission issu de la base empreinte "Service/Textile et habillement".
`},"communication . numÃ©rique":{titre:"NumÃ©rique",formule:0,unitÃ©:"kgCO2e",note:"A venir"},"nosgestesclimat . divers . textile . t-shirt . empreinte":{formule:5.35,unitÃ©:"kgCO2e",note:"moyenne de l'empreinte des t-shirts en coton et en polyester de la Base Carbone",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . divers . textile . sweat . empreinte":{formule:27.4,unitÃ©:"kgCO2e",note:"empreinte d'un sweat de la Base Carbone",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"communication . textile bÃ©nÃ©voles":{titre:"Textile bÃ©nÃ©voles",formule:{variations:[{si:'textile bÃ©nÃ©voles . type = "t shirt"',alors:"informations . nombre de bÃ©nÃ©voles * nosgestesclimat . divers . textile . t-shirt . empreinte / amortissement"},{si:'textile bÃ©nÃ©voles . type = "sweat"',alors:"informations . nombre de bÃ©nÃ©voles * nosgestesclimat . divers . textile . sweat . empreinte / amortissement"},{si:'textile bÃ©nÃ©voles . type = "aucun"',alors:0}]},unitÃ©:"kgCO2e"},"communication . textile bÃ©nÃ©voles . type":{titre:"VÃªtements pour les Ã©quipes et bÃ©nÃ©voles",question:"PrÃ©voyez-vous des vÃªtements pour votre Ã©quipe ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["t shirt","sweat","aucun"]}},"par dÃ©faut":"'t shirt'"},"communication . textile bÃ©nÃ©voles . type . t shirt":{titre:"T-shirt"},"communication . textile bÃ©nÃ©voles . type . sweat":{titre:"Sweat"},"communication . textile bÃ©nÃ©voles . type . aucun":{titre:"Non, aucun vÃªtement"},"communication . textile bÃ©nÃ©voles . amortissement":{formule:{variations:[{si:"textile bÃ©nÃ©voles . rÃ©utilisation",alors:2},{sinon:1}]}},"communication . textile bÃ©nÃ©voles . rÃ©utilisation":{titre:"RÃ©utilisation des vÃªtements pour une autre Ã©dition",question:"Est-il prÃ©vu de rÃ©utiliser les vÃªtements pour une autre Ã©dition ?","par dÃ©faut":"non"},"nosgestesclimat . logement . chauffage . gaz . facteur d'Ã©mission base carbone":{titre:"IntensitÃ© carbone gaz naturel",valeur:.221,unitÃ©:"kgCO2e/kWh",note:`Il s'agit de kgCO2e/kWh *PCS*.

On raisonne en PCS (Pouvoir Calorifique SupÃ©rieur) et non en PCI (Pouvoir Calorifique InfÃ©rieur), car le PCS est utilisÃ© en tant que coefficient de conversion dans les factures pour convertir le volume de gaz utilisÃ© en kWh : 
on fait l'hypothÃ¨se que la chaudiÃ¨re gaz rÃ©cupÃ¨re bien la chaleur latente de condensation.

Base Carbone Gaz naturel - 2022/mix moyen/consommation
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},Ã©nergie:{titre:"Ãnergie",icÃ´nes:"â¡ï¸",description:`Cette section concerne la consommation d'**Ã©lectricitÃ©**, de **fioul et gaz** et des **groupes Ã©lectrogÃ¨nes** pour l'Ã©vÃ©nement. 
Les valeurs prÃ©-entrÃ©es sont basÃ©es sur des **consommations moyennes par festivalier** pour ce type d'Ã©vÃ¨nement.

*L'empreinte des groupes Ã©lectrogÃ¨nes est particuliÃ¨rement importante devant celle de l'Ã©lectricitÃ©.*
`,formule:{somme:["Ã©lectricitÃ©","autre","groupes Ã©lectrogÃ¨nes"]},unitÃ©:"kgCO2e"},"Ã©nergie . consommation par dÃ©faut":{formule:"0.6 kWh * informations . nombre de festivaliers",unitÃ©:"kWh",note:`Selon l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf):
il est tout Ã  fait pertinent d'utiliser lâ[Ã©tude dâENERIS](https://www.ressource0.com/wp-content/uploads/2012/09/guideSpectacle-vivant1.pdf) produite en 2011 
qui propose une consommation Ã©lectrique de 0,6 KWh par festivalier en moyenne.
`},"Ã©nergie . Ã©lectricitÃ©":{formule:"consommation * commun . intensitÃ© Ã©lectricitÃ©",unitÃ©:"kgCO2e"},"Ã©nergie . Ã©lectricitÃ© . consommation":{titre:"Consommation d'Ã©lectricitÃ© totale",question:"Quelle est votre consommation d'Ã©lectricitÃ© pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":{variations:[{si:{"toutes ces conditions":["autre prÃ©sent","groupes Ã©lectrogÃ¨nes prÃ©sent"]},alors:"consommation par dÃ©faut / 4"},{si:{"toutes ces conditions":["autre prÃ©sent = non","groupes Ã©lectrogÃ¨nes prÃ©sent"]},alors:"consommation par dÃ©faut / 2"},{sinon:"consommation par dÃ©faut"}]}},"Ã©nergie . autre":{"applicable si":"autre prÃ©sent",formule:{somme:["gaz","fioul"]},unitÃ©:"kgCO2e"},"Ã©nergie . autre prÃ©sent":{titre:"Utilisation d'une autre source d'Ã©nergie",question:"Utilisez-vous une autre source d'Ã©nergie pour l'Ã©vÃ©nement (gaz, fioul) ?","par dÃ©faut":"non"},"Ã©nergie . autre . gaz":{formule:"consommation * nosgestesclimat . logement . chauffage . gaz . facteur d'Ã©mission base carbone",unitÃ©:"kgCO2e"},"Ã©nergie . autre . gaz . consommation":{titre:"Consommation de gaz totale",question:"Quelle est votre consommation de gaz pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":{variations:[{si:"groupes Ã©lectrogÃ¨nes prÃ©sent",alors:"consommation par dÃ©faut / 4"},{sinon:"consommation par dÃ©faut / 2"}]}},"Ã©nergie . autre . fioul":{formule:"consommation * empreinte",unitÃ©:"kgCO2e"},"Ã©nergie . autre . fioul . consommation":{titre:"Consommation de fioul totale",question:"Quelle est votre consommation de fioul pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":"consommation par dÃ©faut / 4"},"Ã©nergie . autre . fioul . empreinte":{formule:.303,unitÃ©:"kgCO2e/kWh",note:`Facteur d'Ã©mission issu de la base empreinte "Fioul domestique" (kgCO2e/kWhPCS).
`},"Ã©nergie . groupes Ã©lectrogÃ¨nes":{"applicable si":"groupes Ã©lectrogÃ¨nes prÃ©sent",formule:"nombre * empreinte par jour * informations . nombre de jours",unitÃ©:"kgCO2e",note:`On fait l'hypothÃ¨se que la puissance d'un groupe Ã©lectrogÃ¨ne utilisÃ© est de 10kW.
On estime qu'un groupe Ã©lectrogÃ¨ne de cette puissance consomme 4l/h.

Dans un second temps, il s'agira de d'Ã©valuer l'empreinte du groupe Ã©lectrogÃ¨ne directement 
via le type de carburant consommÃ© et la consommation rÃ©elle.
`},"Ã©nergie . groupes Ã©lectrogÃ¨nes prÃ©sent":{titre:"Utilisation de groupes Ã©lectrogÃ¨nes",question:"Allez-vous utiliser des groupes Ã©lectrogÃ¨nes pour l'Ã©vÃ©nement ?","par dÃ©faut":"oui"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . nombre":{titre:"Nombre de groupes Ã©lectrogÃ¨nes",question:"Combien de groupes Ã©lectrogÃ¨nes prÃ©voyez-vous d'utiliser ?",plancher:0,"par dÃ©faut":{variations:[{si:"autre prÃ©sent",alors:"consommation par dÃ©faut / 4 / production"},{sinon:"consommation par dÃ©faut / 2 / production"}]}},"Ã©nergie . groupes Ã©lectrogÃ¨nes . production":{formule:"10kW * 24 h/jour * 0.75 * informations . nombre de jours",unitÃ©:"kWh"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . empreinte par jour":{formule:"0.75 * consommation carburant * empreinte carburant * 24 h/jour",note:"On considÃ¨re qu'un groupe Ã©lectrogÃ¨ne est utilisÃ© 75% de la journÃ©e Ã  pleine puissance.",unitÃ©:"kgCO2e/jour"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . consommation carburant":{formule:4,unitÃ©:"l/h"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . empreinte carburant":{formule:2.7,unitÃ©:"kgCO2e/l",note:`Facteur d'Ã©mission issu de la base empreinte "Essence".
`},"hÃ©bergement . artistes":{titre:"HÃ©bergement des artistes","applicable si":"artistes prÃ©sent",formule:"informations . nombre de nuits artistes * nosgestesclimat . logement . vacances . empreinte hotel par nuit",unitÃ©:"kgCO2e"},"hÃ©bergement . artistes prÃ©sent":{titre:"HÃ©bergement des artistes",question:"Prenez-vous en charge l'hÃ©bergement en hÃ´tel des artistes du festival ?","par dÃ©faut":"oui"},"nosgestesclimat . logement . vacances . empreinte hotel par nuit":{formule:6.93,unitÃ©:"kgCO2e/nuit",note:`## Notre hypothÃ¨se sur le facteur d'Ã©mission utilisÃ©

  D'aprÃ¨s [l'enquÃªte mobilitÃ© des franÃ§ais de 2019](https://www.statistiques.developpement-durable.gouv.fr/resultats-detailles-de-lenquete-mobilite-des-personnes-de-2019?rubrique=60&dossier=1345), 
  les franÃ§ais voyagent Ã  86% en France. On assume donc ici que **les nuitÃ©es se passent en France**.

## Notre source de donnÃ©es

  Le rapport final de prÃ©-dÃ©ploiement de l'affichage environnemental des hÃ´tels, [publication ADEME de mars 2020](https://librairie.ademe.fr/consommer-autrement/4096-projet-de-pre-deploiement-de-l-affichage-environnemental-des-hotels.html), donne une moyenne de 9,91 kg Ã©qCO2 / nuitÃ©e. 
  En retranchant la partie petit-dÃ©jeuner (comptant pour 30% de l'empreinte), car sinon nous aurions une double comptabilitÃ© de ces derniers, on se retrouve avec une empreinte par nuitÃ©e de 9,91 * (1 - 30%) = 6,93 kg Ã©qCO2.

  Le rapport permet Ã©galement de scinder les empreintes selon la classe de l'hÃ´tel. Pour dÃ©marrer, nous avons assumÃ© de partir sur la moyenne des empreintes toutes classes confondues, mais cela pourra Ãªtre implÃ©mentÃ© par la suite. Cela donnerait :

  - HÃ´tels sans classement : 4,73 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 2* : 8,53 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 3* : 8,47 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 4* : 11,43 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 5* : 17,11 kg Ã©qCO2 / nuitÃ©e

  Depuis plusieurs annÃ©es, [Betterfly Tourism](https://www.betterfly-tourism.com/affichage-environnemental-hotels/) implÃ©mente en partenariat avec l'ADEME l'affichage environnemental auprÃ¨s des hÃ´tels. Il sera donc possible de rÃ©Ã©valuer l'empreinte avec des donnÃ©es plus rÃ©centes issues de leur base de donnÃ©es consolidÃ©e.

  De son cÃ´tÃ©, le [Hotel Carbon Measurement Initiative (HCMI)](https://sustainablehospitalityalliance.org/resource/hotel-carbon-measurement-initiative/) qui alimente le [Cornell Hotel Sustainability Benchmarking Index](https://greenview.sg/services/chsb-index/) prÃ©sente des [donnÃ©es](https://ecommons.cornell.edu/handle/1813/109990) pertinentes pour notre usage.
  Cela pourra Ãªtre un bon point de dÃ©part pour le jour oÃ¹ nous souhaiterons diffÃ©rencier les nuitÃ©es d'hÃ´tel selon le pays frÃ©quentÃ©.
  Ã noter que le HCMI donne une moyenne pour la France de 7,7 kg Ã©qCO2 / nuitÃ©e, ce qui est trÃ¨s proche de la donnÃ©e que nous avons choisie, elle calculÃ©e Ã  partir du rÃ©fÃ©rentiel ADEME.

  > Point publicodes : Cette rÃ¨gle Ã©tant utilisÃ©e dans d'autres espaces nom que \`logement . vacances . hotel\` c'est important ici de ne pas l'inclure dans cet espace non qui rendrait l'empreinte de la nuitÃ©e non applicable si la rÃ¨gle hotel est elle aussi non applicable.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"hÃ©bergement . bÃ©nÃ©voles":{titre:"HÃ©bergement des bÃ©nÃ©voles",formule:{variations:[{si:'type = "camping"',alors:"nombre de nuits hÃ´tel * nosgestesclimat . logement . vacances . empreinte hotel par nuit"},{si:'type = "hÃ´tel"',alors:"nombre de nuits hÃ´tel * nosgestesclimat . logement . vacances . empreinte hotel par nuit"},{sinon:0}]},unitÃ©:"kgCO2e"},"hÃ©bergement . bÃ©nÃ©voles . type":{titre:"HÃ©bergement des bÃ©nÃ©voles",question:"Prenez-vous en charge l'hÃ©bergement en hÃ´tel des organisateurs et bÃ©nÃ©voles du festival ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["camping","hÃ´tel","aucun"]}},"par dÃ©faut":"'aucun'"},"hÃ©bergement . bÃ©nÃ©voles . type . camping":{titre:"Oui, en camping"},"hÃ©bergement . bÃ©nÃ©voles . type . hÃ´tel":{titre:"Oui, en hÃ´tel"},"hÃ©bergement . bÃ©nÃ©voles . type . aucun":{titre:"Non"},"hÃ©bergement . bÃ©nÃ©voles . nombre de nuits hÃ´tel":{formule:"informations . nombre de bÃ©nÃ©voles * informations . nombre de nuits",unitÃ©:"nuit"},hÃ©bergement:{titre:"HÃ©bergement",icÃ´nes:"âºï¸",description:`Ce poste d'Ã©mission inclut l'impact de l'hÃ©bergement des festivaliers, des bÃ©nÃ©voles et des artistes.
*La part des festivaliers qui dorment sur place impacte directement le nombre de **dÃ©placements** du public.*
`,formule:{somme:["bÃ©nÃ©voles","public","artistes"]},unitÃ©:"kgCO2e",note:`Pour le moment, on ne prend en compte que les nuitÃ©es en hÃ´tel en considÃ©rant que le nombre de nuits 
correspond au nombre de jours de l'Ã©vÃ¨nement.
Dans un second temps, on pourrait ajouter le camping par exemple. 
On pourrait Ã©galement ajouter la possibilitÃ© de renseigner le nombre de nuitÃ©es prises en charge durant l'Ã©vÃ¨nement.
`},"nosgestesclimat . logement . vacances . camping . empreinte par nuit":{formule:1.4,unitÃ©:"kgCO2e/nuit",note:`Ces donnÃ©es sont issues de la proposition de rÃ©fÃ©rentiel ADEME pour l'hÃ´tellerie de plein air, Ã©tude effectuÃ©e sur 13 campings de l'HÃ©rault conjointement entre Betterfly Tourism et l'ADEME.
Les donnÃ©es sont fournies par Betterfly Tourism et datent de juin 2021. La moyenne de l'empreinte par nuitÃ©e sur les 13 campings Ã©tudiÃ©s est de 1,4 kg Ã©qCO2.
Le rÃ©fÃ©rentiel ADEME est prÃ©sent dans la base Impacts depuis mai 2023.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"hÃ©bergement . public":{"applicable si":"public prÃ©sent",formule:"nombre de nuits camping * nosgestesclimat . logement . vacances . camping . empreinte par nuit",unitÃ©:"kgCO2e",note:"On considÃ¨re que l'hÃ©bergement se fait en camping."},"hÃ©bergement . public prÃ©sent":{titre:"HÃ©bergement des festivaliers en camping",question:"Prenez-vous en charge l'hÃ©bergement en camping des participants du festival ?","par dÃ©faut":"oui"},"hÃ©bergement . public . nombre de nuits camping":{formule:"nombre de festivaliers hÃ©bergÃ©s * informations . nombre de nuits",unitÃ©:"nuit"},"hÃ©bergement . public . nombre de festivaliers hÃ©bergÃ©s":{formule:"part * informations . nombre de festivaliers"},"hÃ©bergement . public . nombre de festivaliers journÃ©e":{formule:"(100% - part) * informations . nombre de festivaliers"},"hÃ©bergement . public . part":{titre:"Part des festivaliers qui dorment sur place",question:"Quelle part des festivaliers dorment sur place ?","par dÃ©faut":30,plancher:0,plafond:100,unitÃ©:"%"},informations:c0,"informations . nombre de jours":{titre:"DurÃ©e de l'Ã©vÃ¨nement",question:"Combien de jours dure votre Ã©vÃ¨nment ?",description:"Compter 1 jour pour une soirÃ©e.","par dÃ©faut":2,plancher:0,unitÃ©:"jour"},"informations . nombre de nuits":{formule:"informations . nombre de jours * 1 nuit/jour",unitÃ©:"nuit"},"informations . nombre de festivaliers":{titre:"Nombre de festivaliers",description:"Compter 2 si une mÃªme personne vient 2 jours.",question:"Combien de participants attendez-vous sur l'ensemble de l'Ã©vÃ¨nements (compter 2 entrÃ©es si une personne est prÃ©sente 2 jours) ?",plancher:0,note:"On parle de la somme des entrÃ©es uniques par jour.","par dÃ©faut":25e3},"informations . nombre de festivaliers par jour":{formule:"nombre de festivaliers / nombre de jours"},"informations . nombre de bÃ©nÃ©voles":{titre:"Nombre d'organisateurs et bÃ©nÃ©voles",question:"Combien y aura-t-il d'organisateurs et bÃ©nÃ©voles ?",plancher:0,"par dÃ©faut":100},"informations . nombre de personnes par jour":{formule:"nombre de festivaliers par jour + nombre de bÃ©nÃ©voles"},"informations . nombre de repas par jour":{formule:"2 repas * nombre de personnes par jour"},"informations . nombre de repas total":{formule:"nombre de repas par jour * nombre de jours"},"informations . nombre artistes en voiture":{titre:"Nombre d'artistes (Ã©quipe incluse) en voiture",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes en train":{titre:"Nombre d'artistes (Ã©quipe incluse) en train",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes en tour bus":{titre:"Nombre d'artistes (Ã©quipe incluse) en tour bus",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":30},"informations . nombre artistes en avion":{titre:"Nombre d'artistes (Ã©quipe incluse) en avion",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes":{formule:{somme:["nombre artistes en voiture","nombre artistes en train","nombre artistes en tour bus","nombre artistes en avion"]}},"informations . nombre de nuits artistes":{formule:"nombre artistes * 1 nuit",unitÃ©:"nuit"},"informations . scÃ¨nes":null,"informations . scÃ¨nes . nombre petites scÃ¨nes":{titre:"Nombre de petites scÃ¨nes",question:"Quel est le nombre de petites scÃ¨nes prÃ©vus pour l'Ã©vÃ©nement ?",plancher:0,"par dÃ©faut":2,unitÃ©:"scÃ¨ne"},"informations . scÃ¨nes . nombre grandes scÃ¨nes":{titre:"Nombre de grandes scÃ¨nes",question:"Quel est le nombre de grandes scÃ¨nes prÃ©vues pour l'Ã©vÃ©nement ?",plancher:0,"par dÃ©faut":2,unitÃ©:"scÃ¨ne"},bÃ¢timents:{titre:"BÃ¢timents",formule:{somme:["bÃ©ton","mÃ©tallique","temporaire"]},unitÃ©:"kgCO2e"},"bÃ¢timents . facteur amortissement":{formule:"informations . nombre de jours / (commun . jours par an * 50)",note:`BÃ¢timents amortis sur 50 ans. On fait l'hypothÃ¨se que le bÃ¢timent reste "non amorti" 
mÃªme s'il date de plus de 50 ans pour limiter les paramÃ¨tres, au vu de l'impact nÃ©gligeable.
`},"bÃ¢timents . bÃ©ton":{formule:"surface * empreinte par m2 * facteur amortissement",unitÃ©:"kgCO2e"},"bÃ¢timents . bÃ©ton . surface":{titre:"Surface des bÃ¢timents bÃ©ton",question:`Quelle est la surface des bÃ¢timents "structure bÃ©ton" utilisÃ©s pour l'Ã©vÃ©nement ?`,plancher:0,"par dÃ©faut":0,unitÃ©:"m2"},"bÃ¢timents . bÃ©ton . empreinte par m2":{formule:825,unitÃ©:"kgCO2e/m2",note:`Facteur d'Ã©mission issu de la base empreinte "BÃ¢timent industriel/structure en bÃ©ton".
`},"bÃ¢timents . mÃ©tallique":{formule:"surface * empreinte par m2 * facteur amortissement",unitÃ©:"kgCO2e"},"bÃ¢timents . mÃ©tallique . surface":{titre:"Surface des bÃ¢timents structure mÃ©tallique",question:`Quelle est la surface des bÃ¢timents "structure mÃ©tallique" utilisÃ©s pour l'Ã©vÃ©nement ?`,plancher:0,"par dÃ©faut":500,unitÃ©:"m2"},"bÃ¢timents . mÃ©tallique . empreinte par m2":{formule:275,unitÃ©:"kgCO2e/m2",note:`Facteur d'Ã©mission issu de la base empreinte "BÃ¢timent industriel/structure mÃ©tallique".
`},"bÃ¢timents . temporaire":{titre:"Barnums",formule:0,unitÃ©:"kgCO2e",note:"A venir"},infrastructures:m0,"infrastructures . scÃ©nographie":{titre:"ScÃ©nographie",formule:{somme:["fret","matÃ©riel","dÃ©cor"]},unitÃ©:"kgCO2e"},"infrastructures . scÃ©nographie . fret":{formule:"tonnes km total * empreinte par tonnes km",note:`On considÃ¨re que l'empreinte des scÃ¨nes rÃ©side dans le fret.

Selon l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf),
Le seul montage des scÃ¨nes dâun festival comme Les Vieilles Charrues implique une quarantaine de semi-remorques pour 4 scÃ¨nes (voir [cet artcle de France Info](https://france3-regions.francetvinfo.fr/bretagne/2013/07/18/l-antiseche-pour-etre-incollable-sur-les-vieilles-charrues-289717.html)).

NÃ©anmoins, il est fait l'hypothÃ¨se de partir sur une moyenne de 7 semi-remorques pour une grande scÃ¨ne, 3 pour une plus petite.

Comme expliquÃ© dans l'Ã©tude "DÃ©carbonons la Culture !", ces donnÃ©es sont celles des Vieilles Charrues, 
Par ailleurs, on ne sait pas si cette donnÃ©e inclut la logistique alimentaire.

Pour cette premiÃ¨re estimation, il est considÃ©rÃ© que le tonnage transportÃ© est en moyenne Ã  8,5 tonnes sur 1500km (A/R)
`,unitÃ©:"kgCO2e"},"infrastructures . scÃ©nographie . fret . nombre de camion par petite scÃ¨ne":{formule:3,unitÃ©:"camion/scÃ¨ne",note:`Nombre de camions nÃ©cessaires pour le transport d'une petite scÃ¨ne.
`},"infrastructures . scÃ©nographie . fret . nombre de camion par grande scÃ¨ne":{formule:7,unitÃ©:"camion/scÃ¨ne",note:`Nombre de camions nÃ©cessaires pour le transport d'une grande scÃ¨ne.
`},"infrastructures . scÃ©nographie . fret . empreinte par tonnes km":{formule:.0823,unitÃ©:"kgCO2e/t.km",note:`Facteur d'Ã©mission issu de la base empreinte "ArticulÃ©/< 34 tonnes/Diesel routier, incorporation 7 % de biodiesel".
`},"infrastructures . scÃ©nographie . fret . tonnes km total":{formule:{somme:["informations . scÃ¨nes . nombre petites scÃ¨nes * fret . nombre de camion par petite scÃ¨ne * tonnes km par camion","informations . scÃ¨nes . nombre grandes scÃ¨nes * fret . nombre de camion par grande scÃ¨ne * tonnes km par camion"]},unitÃ©:"t.km"},"infrastructures . scÃ©nographie . fret . tonnes km par camion":{formule:"charge moyenne * distance moyenne",unitÃ©:"t.km/camion"},"infrastructures . scÃ©nographie . fret . distance moyenne":{formule:1500,unitÃ©:"km",note:`Distance moyenne parcourue par les semi-remorques pour le transport du matÃ©riel de scÃ¨ne en incluant le retour Ã  vide.
`},"infrastructures . scÃ©nographie . fret . charge moyenne":{formule:8.5,unitÃ©:"t/camion",note:`Charge moyenne des semi-remorques pour le transport du matÃ©riel de scÃ¨ne.
`},"infrastructures . scÃ©nographie . matÃ©riel":{formule:"dÃ©penses * ratio monÃ©taire * facteur amortissement",unitÃ©:"kgCO2e",note:`Selon la mÃ©thode du simulateur [SEEDS](https://nuage.arviva.org/index.php/s/Pzzm9KbAwwL4gPR), 
les Ã©missions de CO2 liÃ©es Ã  la location de matÃ©riel technique sont estimÃ©es Ã  partir du montant 
dÃ©pensÃ©s pour leur location puis amorties sur via la durÃ©e de location et leur durÃ©e de vie.

A titre indicatif:
  - Projecteur : 600â¬ soit 240kgCO2e  
  - Enceinte : 500â¬ soit 200kgCO2e 
  - Console : 1500â¬ soit 600kgCO2e 
  - Machine Ã  fumÃ©e : 400â¬ soit 160kgCO2e  
  - Micros : 200â¬ soit 80kgCO2e  
  - VidÃ©oprojecteur : 145kgCO2e (dÃ©jÃ  prÃ©sent dans la base ADEME)
`},"infrastructures . scÃ©nographie . matÃ©riel . facteur amortissement":{formule:"informations . nombre de jours / (commun . jours par an * 5)",note:"MatÃ©riel amorti sur 5 ans."},"infrastructures . scÃ©nographie . matÃ©riel . dÃ©penses":{titre:"DÃ©penses pour la location de matÃ©riel de scÃ©nographie",question:"A combien estimez-vous vos dÃ©penses de location de matÃ©riel technique (scÃ¨ne, son, lumiÃ¨re, vidÃ©o etc...) ?",plancher:0,"par dÃ©faut":1e7,unitÃ©:"â¬HT"},"infrastructures . scÃ©nographie . matÃ©riel . ratio monÃ©taire":{formule:.4,unitÃ©:"kgCO2e/â¬HT",note:`Ratio monÃ©taire issu de la Base Empreinte "Service/Produits informatiques, Ã©lectroniques et optiques".
`},"infrastructures . scÃ©nographie . dÃ©cor":{"applicable si":"dÃ©cor prÃ©sent",formule:0,unitÃ©:"kgCO2e",note:`Pour le moment, nous faisons l'hypothÃ¨se que les dÃ©cors et costumes sont de la responsabilitÃ© des artistes.
`},"infrastructures . scÃ©nographie . dÃ©cor prÃ©sent":{"par dÃ©faut":"non"},"infrastructures . toilettes":{formule:0,unitÃ©:"kgCO2e",note:"A venir"},resultats:p0,"resultats . bilan total":{titre:"Bilan Carbone de mon Ã©vÃ¨nement",formule:{somme:["alimentation","transport","infrastructures","hÃ©bergement","Ã©nergie","communication"]},unitÃ©:"kgCO2e"},"resultats . bilan par festivalier":{titre:"Bilan Carbone par festivalier et par jour",formule:"bilan total / informations . nombre de festivaliers",unitÃ©:"kgCO2e"},"transport . artistes":{titre:"Transport des artistes",formule:{somme:["voiture","avion","train","tour bus"]},unitÃ©:"kgCO2e"},"transport . artistes . voiture":{"applicable si":"informations . nombre artistes en voiture > 0",formule:"informations . nombre artistes en train * distance * voiture . empreinte par km / voiture . remplissage moyen",unitÃ©:"kgCO2e"},"transport . artistes . voiture . distance":{titre:"Distance moyenne parcourue par les artistes en voiture",question:"Quelle est la distance (A/R) parcourue en voiture en moyenne par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":100,unitÃ©:"km"},"transport . artistes . avion":{"applicable si":"informations . nombre artistes en avion > 0",formule:"informations . nombre artistes en avion * distance * avion . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . avion . distance":{titre:"Distance moyenne parcourue par les artistes en avion",question:"Quelle est la distance (A/R) parcourue en avion en moyenne par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":1500,unitÃ©:"km"},"transport . artistes . train":{"applicable si":"informations . nombre artistes en train > 0",formule:"informations . nombre artistes en train * distance * train . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . train . distance":{titre:"Distance moyenne parcourue par les artistes en train",question:"Quelle est la distance en moyenne (A/R) parcourue en train par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":500,unitÃ©:"km"},"transport . artistes . tour bus":{"applicable si":"informations . nombre artistes en tour bus > 0",formule:"informations . nombre artistes en tour bus * distance * tour bus . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . tour bus . distance":{titre:"Distance moyenne parcourue par les artistes en tour bus",question:"Quelle est la distance en moyenne (A/R) parcourue en tour bus par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":1e3,unitÃ©:"km"},"transport . public":{titre:"Transport du public",formule:{somme:["voiture","avion","train","commun"]},unitÃ©:"kgCO2e"},"transport . public . accessible en transports en commun":{titre:"AccessibilitÃ© en transports en commun",question:"Votre festival est-il facilement accessible en transport en commun ?","par dÃ©faut":"non"},"transport . public . nombre de dÃ©placements":{formule:{somme:["festivaliers","bÃ©nÃ©voles"]},note:`On considÃ¨re ici les festivaliers mais aussi les Ã©quipes d'organisation et les bÃ©nÃ©voles.
`},"transport . public . nombre de dÃ©placements . festivaliers":{formule:{variations:[{si:"hÃ©bergement . public prÃ©sent",alors:"hÃ©bergement . public . nombre de festivaliers journÃ©e + hÃ©bergement . public . nombre de festivaliers hÃ©bergÃ©s / informations . nombre de jours * 1 jour"},{sinon:"informations . nombre de festivaliers"}]}},"transport . public . nombre de dÃ©placements . bÃ©nÃ©voles":{formule:{variations:[{si:'hÃ©bergement . bÃ©nÃ©voles . type = "aucun"',alors:"informations . nombre de bÃ©nÃ©voles * informations . nombre de jours / 1 jour"},{sinon:"informations . nombre de bÃ©nÃ©voles"}]}},"transport . public . distance AR":{titre:"Distance moyenne aller/retour parcourue par un festivalier (hors avion)",question:"Quelle est la distane moyenne aller/retour parcourue par un festivalier ?",unitÃ©:"km",plancher:0,"par dÃ©faut":100,note:"On inclut ici les festivaliers mais Ã©galement les bÃ©nÃ©voles et les organisateurs."},"transport . public . part mobilitÃ© douce":{formule:"100% - parts totales modes de transport",unitÃ©:"%",note:"On considÃ¨re que l'impact de la marche ou du vÃ©lo est nÃ©gligeable."},"transport . public . parts totales modes de transport":{formule:{somme:["voiture . part","avion . part","train . part","commun . part"]},plafond:100,unitÃ©:"%"},"transport . public . voiture . part":{titre:"Part des festivaliers venant en voiture",question:"Quelle part des festivaliers viennent en voiture ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"20%"},{sinon:"80%"}]}},"transport . public . avion . part":{titre:"Part des festivaliers venant en avion",question:"Quelle part des festivaliers viennent en avion ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"3%"},{sinon:"3%"}]}},"transport . public . train . part":{titre:"Part des festivaliers venant en train",question:"Quelle part des festivaliers viennent en train ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"20%"},{sinon:"10%"}]}},"transport . public . commun . part":{titre:"Part des festivaliers venant en transports en commun",question:"Quelle part des festivaliers viennent en transports en commun (bus, tramway, mÃ©tro) ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"50%"},{sinon:"5%"}]}},"transport . public . voiture":{formule:"part * nombre de dÃ©placements * distance AR * voiture . empreinte par km / voiture . remplissage moyen",unitÃ©:"kgCO2e",note:"On fait l'hypothÃ¨se d'un aller/retour par festivalier."},"transport . public . avion":{formule:"part * nombre de dÃ©placements * distance avion AR * avion . empreinte par km",unitÃ©:"kgCO2e"},"transport . public . avion . distance avion AR":{formule:1500,unitÃ©:"km"},"transport . public . train":{formule:"part * nombre de dÃ©placements * distance AR * train . empreinte par km",unitÃ©:"kgCO2e"},"transport . public . commun":{formule:"part * nombre de dÃ©placements * distance AR * commun . empreinte par km",unitÃ©:"kgCO2e"},transport:f0,"transport . voiture":null,"transport . voiture . empreinte par km":{formule:.231,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Voiture/Motorisation moyenne/2018".
`},"transport . voiture . remplissage moyen":{formule:1.8,note:"On considÃ¨re un taux de remplissage moyen de 1,8 personnes par voiture."},"transport . avion":null,"transport . avion . empreinte par km":{formule:.187,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Avion passagers/Moyen courrier, 2018/AVEC trainÃ©es".
`},"transport . train":null,"transport . train . empreinte par km":{formule:{moyenne:["TGV","TER"]},unitÃ©:"kgCO2e/km",note:`Moyenne entre TGV et TER.
`},"transport . train . empreinte par km . TGV":{formule:.00293,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "TGV/2022".
`},"transport . train . empreinte par km . TER":{formule:.0277,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "TER/2022/Traction moyenne".
`},"transport . commun . empreinte par km":{formule:{moyenne:["bus","mÃ©tro ou tram"]},unitÃ©:"kgCO2e/km"},"transport . commun . empreinte par km . bus":{formule:.146,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Autobus moyen/AgglomÃ©ration de 100 000 Ã  250 000 habitants".
`},"transport . commun . empreinte par km . mÃ©tro ou tram":{formule:.00503,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "MÃ©tro, tramway, trolleybus/2018/AgglomÃ©ration de 100 000 Ã  250 000 habitants".
`},"transport . tour bus":null,"transport . tour bus . empreinte par km":{formule:.0295,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Autocar/2018".
`},nosgestesclimat:d0,"nosgestesclimat . alimentation . boisson":null,"nosgestesclimat . alimentation":null,"nosgestesclimat . alimentation . boisson . sucrÃ©es":null,"nosgestesclimat . alimentation . boisson . alcool":null,"nosgestesclimat . alimentation . boisson . eau en bouteille":null,"nosgestesclimat . alimentation . petit dÃ©jeuner":null,"nosgestesclimat . alimentation . plats . vÃ©gÃ©talien":null,"nosgestesclimat . alimentation . plats":null,"nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien":null,"nosgestesclimat . alimentation . plats . viande 1":null,"nosgestesclimat . alimentation . plats . viande 2":null,commun:$0,"nosgestesclimat . divers . textile . t-shirt":null,"nosgestesclimat . divers . textile":null,"nosgestesclimat . divers":null,"nosgestesclimat . divers . textile . sweat":null,"nosgestesclimat . logement . chauffage . gaz":null,"nosgestesclimat . logement . chauffage":null,"nosgestesclimat . logement":null,"nosgestesclimat . logement . vacances":null,"nosgestesclimat . logement . vacances . camping":null};let Ci=Rb.Main.init({flags:hl,node:document.getElementById("elm-app")});const gl=new s0(hl,Ci);Ci.ports.setSituation.subscribe(e=>{gl.setSituation(e)});Ci.ports.evaluateAll.subscribe(e=>{gl.evaluateAll(e)});
