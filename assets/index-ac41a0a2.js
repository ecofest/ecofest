var Ml=Object.defineProperty;var Ol=(e,r,n)=>r in e?Ml(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var oe=(e,r,n)=>(Ol(e,typeof r!="symbol"?r+"":r,n),n);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function br(e,r,n){return n.a=e,n.f=r,n}function d(e){return br(2,e,function(r){return function(n){return e(r,n)}})}function O(e){return br(3,e,function(r){return function(n){return function(t){return e(r,n,t)}}})}function ve(e){return br(4,e,function(r){return function(n){return function(t){return function(a){return e(r,n,t,a)}}}})}function er(e){return br(5,e,function(r){return function(n){return function(t){return function(a){return function(o){return e(r,n,t,a,o)}}}}})}function Nn(e){return br(6,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return e(r,n,t,a,o,s)}}}}}})}function Go(e){return br(7,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return e(r,n,t,a,o,s,u)}}}}}}})}function Ha(e){return br(8,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return function(c){return e(r,n,t,a,o,s,u,c)}}}}}}}})}function Qo(e){return br(9,e,function(r){return function(n){return function(t){return function(a){return function(o){return function(s){return function(u){return function(c){return function(f){return e(r,n,t,a,o,s,u,c,f)}}}}}}}}})}function i(e,r,n){return e.a===2?e.f(r,n):e(r)(n)}function g(e,r,n,t){return e.a===3?e.f(r,n,t):e(r)(n)(t)}function ue(e,r,n,t,a){return e.a===4?e.f(r,n,t,a):e(r)(n)(t)(a)}function le(e,r,n,t,a,o){return e.a===5?e.f(r,n,t,a,o):e(r)(n)(t)(a)(o)}function $r(e,r,n,t,a,o,s){return e.a===6?e.f(r,n,t,a,o,s):e(r)(n)(t)(a)(o)(s)}function Al(e,r,n,t,a,o,s,u){return e.a===7?e.f(r,n,t,a,o,s,u):e(r)(n)(t)(a)(o)(s)(u)}function Pl(e,r,n,t,a,o,s,u,c){return e.a===8?e.f(r,n,t,a,o,s,u,c):e(r)(n)(t)(a)(o)(s)(u)(c)}var Vl=[];function Sl(e){return e.length}var Il=O(function(e,r,n){for(var t=new Array(e),a=0;a<e;a++)t[a]=n(r+a);return t}),ql=d(function(e,r){for(var n=new Array(e),t=0;t<e&&r.b;t++)n[t]=r.a,r=r.b;return n.length=t,l(n,r)});d(function(e,r){return r[e]});O(function(e,r,n){for(var t=n.length,a=new Array(t),o=0;o<t;o++)a[o]=n[o];return a[e]=r,a});d(function(e,r){for(var n=r.length,t=new Array(n+1),a=0;a<n;a++)t[a]=r[a];return t[n]=e,t});O(function(e,r,n){for(var t=n.length,a=0;a<t;a++)r=i(e,n[a],r);return r});var Nl=O(function(e,r,n){for(var t=n.length-1;t>=0;t--)r=i(e,n[t],r);return r});d(function(e,r){for(var n=r.length,t=new Array(n),a=0;a<n;a++)t[a]=e(r[a]);return t});O(function(e,r,n){for(var t=n.length,a=new Array(t),o=0;o<t;o++)a[o]=i(e,r+o,n[o]);return a});O(function(e,r,n){return n.slice(e,r)});O(function(e,r,n){var t=r.length,a=e-t;a>n.length&&(a=n.length);for(var o=t+a,s=new Array(o),u=0;u<t;u++)s[u]=r[u];for(var u=0;u<a;u++)s[u+t]=n[u];return s});d(function(e,r){return r});d(function(e,r){return console.log(e+": "+Rl()),r});function Rl(e){return"<internals>"}function Xr(e){throw new Error("https://github.com/elm/core/blob/1.0.0/hints/"+e+".md")}function ne(e,r){for(var n,t=[],a=la(e,r,0,t);a&&(n=t.pop());a=la(n.a,n.b,0,t));return a}function la(e,r,n,t){if(e===r)return!0;if(typeof e!="object"||e===null||r===null)return typeof e=="function"&&Xr(5),!1;if(n>100)return t.push(l(e,r)),!0;e.$<0&&(e=qr(e),r=qr(r));for(var a in e)if(!la(e[a],r[a],n+1,t))return!1;return!0}var Tl=d(ne),Dl=d(function(e,r){return!ne(e,r)});function te(e,r,n){if(typeof e!="object")return e===r?0:e<r?-1:1;if(typeof e.$>"u")return(n=te(e.a,r.a))||(n=te(e.b,r.b))?n:te(e.c,r.c);for(;e.b&&r.b&&!(n=te(e.a,r.a));e=e.b,r=r.b);return n||(e.b?1:r.b?-1:0)}d(function(e,r){return te(e,r)<0});d(function(e,r){return te(e,r)<1});d(function(e,r){return te(e,r)>0});d(function(e,r){return te(e,r)>=0});var Bl=d(function(e,r){var n=te(e,r);return n<0?gs:n?Jm:hs}),en=0;function l(e,r){return{a:e,b:r}}function Ne(e,r,n){return{a:e,b:r,c:n}}function I(e,r){var n={};for(var t in e)n[t]=e[t];for(var t in r)n[t]=r[t];return n}d(Q);function Q(e,r){if(typeof e=="string")return e+r;if(!e.b)return r;var n=Ye(e.a,r);e=e.b;for(var t=n;e.b;e=e.b)t=t.b=Ye(e.a,r);return n}var _={$:0};function Ye(e,r){return{$:1,a:e,b:r}}var Ll=d(Ye);function b(e){for(var r=_,n=e.length;n--;)r=Ye(e[n],r);return r}function za(e){for(var r=[];e.b;e=e.b)r.push(e.a);return r}var Fl=O(function(e,r,n){for(var t=[];r.b&&n.b;r=r.b,n=n.b)t.push(i(e,r.a,n.a));return b(t)});ve(function(e,r,n,t){for(var a=[];r.b&&n.b&&t.b;r=r.b,n=n.b,t=t.b)a.push(g(e,r.a,n.a,t.a));return b(a)});er(function(e,r,n,t,a){for(var o=[];r.b&&n.b&&t.b&&a.b;r=r.b,n=n.b,t=t.b,a=a.b)o.push(ue(e,r.a,n.a,t.a,a.a));return b(o)});Nn(function(e,r,n,t,a,o){for(var s=[];r.b&&n.b&&t.b&&a.b&&o.b;r=r.b,n=n.b,t=t.b,a=a.b,o=o.b)s.push(le(e,r.a,n.a,t.a,a.a,o.a));return b(s)});var Ul=d(function(e,r){return b(za(r).sort(function(n,t){return te(e(n),e(t))}))});d(function(e,r){return b(za(r).sort(function(n,t){var a=i(e,n,t);return a===hs?0:a===gs?-1:1}))});d(function(e,r){return e+r});d(function(e,r){return e-r});d(function(e,r){return e*r});d(function(e,r){return e/r});d(function(e,r){return e/r|0});d(Math.pow);d(function(e,r){return r%e});var Hl=d(function(e,r){var n=r%e;return e===0?Xr(11):n>0&&e<0||n<0&&e>0?n+e:n});d(Math.atan2);function zl(e){return e===1/0||e===-1/0}var Jl=Math.ceil,Wl=Math.floor,Ii=Math.log,Kl=isNaN;function Gl(e){return!e}d(function(e,r){return e&&r});d(function(e,r){return e||r});d(function(e,r){return e!==r});var Ql=d(function(e,r){return e+r});function Zl(e){var r=e.charCodeAt(0);return isNaN(r)?y:V(55296<=r&&r<=56319?l(e[0]+e[1],e.slice(2)):l(e[0],e.slice(1)))}d(function(e,r){return e+r});function Yl(e){return e.length}d(function(e,r){for(var n=r.length,t=new Array(n),a=0;a<n;){var o=r.charCodeAt(a);if(55296<=o&&o<=56319){t[a]=e(r[a]+r[a+1]),a+=2;continue}t[a]=e(r[a]),a++}return t.join("")});var Xl=d(function(e,r){for(var n=[],t=r.length,a=0;a<t;){var o=r[a],s=r.charCodeAt(a);a++,55296<=s&&s<=56319&&(o+=r[a],a++),e(o)&&n.push(o)}return n.join("")});function ec(e){for(var r=e.length,n=new Array(r),t=0;t<r;){var a=e.charCodeAt(t);55296<=a&&a<=56319?(n[r-t]=e[t+1],t++,n[r-t]=e[t-1],t++):(n[r-t]=e[t],t++)}return n.join("")}O(function(e,r,n){for(var t=n.length,a=0;a<t;){var o=n[a],s=n.charCodeAt(a);a++,55296<=s&&s<=56319&&(o+=n[a],a++),r=i(e,o,r)}return r});var rc=O(function(e,r,n){for(var t=n.length;t--;){var a=n[t],o=n.charCodeAt(t);56320<=o&&o<=57343&&(t--,a=n[t]+a),r=i(e,a,r)}return r}),nc=d(function(e,r){return r.split(e)}),tc=d(function(e,r){return r.join(e)}),ac=O(function(e,r,n){return n.slice(e,r)});function ic(e){return e.trim()}function oc(e){return b(e.trim().split(/\s+/g))}function sc(e){return b(e.split(/\r\n|\r|\n/g))}function uc(e){return e.toUpperCase()}function lc(e){return e.toLowerCase()}d(function(e,r){for(var n=r.length;n--;){var t=r[n],a=r.charCodeAt(n);if(56320<=a&&a<=57343&&(n--,t=r[n]+t),e(t))return!0}return!1});var cc=d(function(e,r){for(var n=r.length;n--;){var t=r[n],a=r.charCodeAt(n);if(56320<=a&&a<=57343&&(n--,t=r[n]+t),!e(t))return!1}return!0}),mc=d(function(e,r){return r.indexOf(e)>-1}),pc=d(function(e,r){return r.indexOf(e)===0});d(function(e,r){return r.length>=e.length&&r.lastIndexOf(e)===r.length-e.length});var fc=d(function(e,r){var n=e.length;if(n<1)return _;for(var t=0,a=[];(t=r.indexOf(e,t))>-1;)a.push(t),t=t+n;return b(a)});function Zo(e){return e+""}function dc(e){for(var r=0,n=e.charCodeAt(0),t=n==43||n==45?1:0,a=t;a<e.length;++a){var o=e.charCodeAt(a);if(o<48||57<o)return y;r=10*r+o-48}return a==t?y:V(n==45?-r:r)}function $c(e){if(e.length===0||/[\sxbo]/.test(e))return y;var r=+e;return r===r?V(r):y}function vc(e){var r=e.charCodeAt(0);return 55296<=r&&r<=56319?(r-55296)*1024+e.charCodeAt(1)-56320+65536:r}function bc(e){return e<0||1114111<e?"ï¿½":e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320))}function hc(e){return{$:0,a:e}}function Rn(e){return{$:2,b:e}}var gc=Rn(function(e){return typeof e!="number"?Ie("an INT",e):-2147483647<e&&e<2147483647&&(e|0)===e||isFinite(e)&&!(e%1)?pe(e):Ie("an INT",e)}),kc=Rn(function(e){return typeof e=="boolean"?pe(e):Ie("a BOOL",e)}),wc=Rn(function(e){return typeof e=="number"?pe(e):Ie("a FLOAT",e)}),_c=Rn(function(e){return pe(e)}),yc=Rn(function(e){return typeof e=="string"?pe(e):e instanceof String?pe(e+""):Ie("a STRING",e)});function xc(e){return{$:3,b:e}}function jc(e){return{$:5,c:e}}var Ec=d(function(e,r){return{$:6,d:e,b:r}}),Cc=d(function(e,r){return{$:7,e,b:r}});function Mc(e){return{$:8,b:e}}function hr(e,r){return{$:9,f:e,g:r}}var Oc=d(function(e,r){return{$:10,b:r,h:e}});function Ac(e){return{$:11,g:e}}var Pc=d(function(e,r){return hr(e,[r])}),Vc=O(function(e,r,n){return hr(e,[r,n])});ve(function(e,r,n,t){return hr(e,[r,n,t])});er(function(e,r,n,t,a){return hr(e,[r,n,t,a])});Nn(function(e,r,n,t,a,o){return hr(e,[r,n,t,a,o])});Go(function(e,r,n,t,a,o,s){return hr(e,[r,n,t,a,o,s])});Ha(function(e,r,n,t,a,o,s,u){return hr(e,[r,n,t,a,o,s,u])});Qo(function(e,r,n,t,a,o,s,u,c){return hr(e,[r,n,t,a,o,s,u,c])});var Sc=d(function(e,r){try{var n=JSON.parse(r);return Se(e,n)}catch(t){return ke(i(ai,"This is not valid JSON! "+t.message,r))}}),Ja=d(function(e,r){return Se(e,r)});function Se(e,r){switch(e.$){case 2:return e.b(r);case 5:return r===null?pe(e.c):Ie("null",r);case 3:return Kn(r)?qi(e.b,r,b):Ie("a LIST",r);case 4:return Kn(r)?qi(e.b,r,Ic):Ie("an ARRAY",r);case 6:var n=e.d;if(typeof r!="object"||r===null||!(n in r))return Ie("an OBJECT with a field named `"+n+"`",r);var f=Se(e.b,r[n]);return Fe(f)?f:ke(i(Ui,n,f.a));case 7:var t=e.e;if(!Kn(r))return Ie("an ARRAY",r);if(t>=r.length)return Ie("a LONGER array. Need index "+t+" but only see "+r.length+" entries",r);var f=Se(e.b,r[t]);return Fe(f)?f:ke(i(ks,t,f.a));case 8:if(typeof r!="object"||r===null||Kn(r))return Ie("an OBJECT",r);var a=_;for(var o in r)if(r.hasOwnProperty(o)){var f=Se(e.b,r[o]);if(!Fe(f))return ke(i(Ui,o,f.a));a=Ye(l(o,f.a),a)}return pe(we(a));case 9:for(var s=e.f,u=e.g,c=0;c<u.length;c++){var f=Se(u[c],r);if(!Fe(f))return f;s=s(f.a)}return pe(s);case 10:var f=Se(e.b,r);return Fe(f)?Se(e.h(f.a),r):f;case 11:for(var p=_,m=e.g;m.b;m=m.b){var f=Se(m.a,r);if(Fe(f))return f;p=Ye(f.a,p)}return ke(Wm(we(p)));case 1:return ke(i(ai,e.a,r));case 0:return pe(e.a)}}function qi(e,r,n){for(var t=r.length,a=new Array(t),o=0;o<t;o++){var s=Se(e,r[o]);if(!Fe(s))return ke(i(ks,o,s.a));a[o]=s.a}return pe(n(a))}function Kn(e){return Array.isArray(e)||typeof FileList<"u"&&e instanceof FileList}function Ic(e){return i(pp,e.length,function(r){return e[r]})}function Ie(e,r){return ke(i(ai,"Expecting "+e,r))}function Ur(e,r){if(e===r)return!0;if(e.$!==r.$)return!1;switch(e.$){case 0:case 1:return e.a===r.a;case 2:return e.b===r.b;case 5:return e.c===r.c;case 3:case 4:case 8:return Ur(e.b,r.b);case 6:return e.d===r.d&&Ur(e.b,r.b);case 7:return e.e===r.e&&Ur(e.b,r.b);case 9:return e.f===r.f&&Ni(e.g,r.g);case 10:return e.h===r.h&&Ur(e.b,r.b);case 11:return Ni(e.g,r.g)}}function Ni(e,r){var n=e.length;if(n!==r.length)return!1;for(var t=0;t<n;t++)if(!Ur(e[t],r[t]))return!1;return!0}var qc=d(function(e,r){return JSON.stringify(r,null,e)+""});function Wa(e){return e}function Nc(){return[]}function Rc(){return{}}var Tc=O(function(e,r,n){return n[e]=r,n});function Dc(e){return d(function(r,n){return n.push(e(r)),n})}var Bc=null;function rr(e){return{$:0,a:e}}function Lc(e){return{$:1,a:e}}function Me(e){return{$:2,b:e,c:null}}var ca=d(function(e,r){return{$:3,b:e,d:r}});d(function(e,r){return{$:4,b:e,d:r}});function Fc(e){return{$:5,b:e}}var Uc=0;function Ka(e){var r={$:0,e:Uc++,f:e,g:null,h:[]};return Ga(r),r}function Yo(e){return Me(function(r){r(rr(Ka(e)))})}function Xo(e,r){e.h.push(r),Ga(e)}var Hc=d(function(e,r){return Me(function(n){Xo(e,r),n(rr(en))})}),Yt=!1,Ri=[];function Ga(e){if(Ri.push(e),!Yt){for(Yt=!0;e=Ri.shift();)zc(e);Yt=!1}}function zc(e){for(;e.f;){var r=e.f.$;if(r===0||r===1){for(;e.g&&e.g.$!==r;)e.g=e.g.i;if(!e.g)return;e.f=e.g.b(e.f.a),e.g=e.g.i}else if(r===2){e.f.c=e.f.b(function(n){e.f=n,Ga(e)});return}else if(r===5){if(e.h.length===0)return;e.f=e.f.b(e.h.shift())}else e.g={$:r===3?0:1,b:e.f.b,i:e.g},e.f=e.f.d}}function Jc(e){return Me(function(r){var n=setTimeout(function(){r(rr(en))},e);return function(){clearTimeout(n)}})}ve(function(e,r,n,t){return Qa(r,t,e.dG,e.eo,e.d8,function(){return function(){}})});function Qa(e,r,n,t,a,o){var s=i(Ja,e,r?r.flags:void 0);Fe(s)||Xr(2);var u={},c=n(s.a),f=c.a,p=o(v,f),m=Wc(u,v);function v($,k){var w=i(t,$,f);p(f=w.a,k),Di(u,w.b,a(f))}return Di(u,c.b,a(f)),m?{ports:m}:{}}var Ee={};function Wc(e,r){var n;for(var t in Ee){var a=Ee[t];a.a&&(n=n||{},n[t]=a.a(t,r)),e[t]=Gc(a,r)}return n}function Kc(e,r,n,t,a){return{b:e,c:r,d:n,e:t,f:a}}function Gc(e,r){var n={g:r,h:void 0},t=e.c,a=e.d,o=e.e,s=e.f;function u(c){return i(ca,u,Fc(function(f){var p=f.a;return f.$===0?g(a,n,p,c):o&&s?ue(t,n,p.i,p.j,c):g(t,n,o?p.i:p.j,c)}))}return n.h=Ka(i(ca,u,e.b))}var Qc=d(function(e,r){return Me(function(n){e.g(r),n(rr(en))})});d(function(e,r){return i(Hc,e.h,{$:0,a:r})});function Za(e){return function(r){return{$:1,k:e,l:r}}}function es(e){return{$:2,m:e}}d(function(e,r){return{$:3,n:e,o:r}});var Ti=[],Xt=!1;function Di(e,r,n){if(Ti.push({p:e,q:r,r:n}),!Xt){Xt=!0;for(var t;t=Ti.shift();)Zc(t.p,t.q,t.r);Xt=!1}}function Zc(e,r,n){var t={};dt(!0,r,t,null),dt(!1,n,t,null);for(var a in e)Xo(e[a],{$:"fx",a:t[a]||{i:_,j:_}})}function dt(e,r,n,t){switch(r.$){case 1:var a=r.k,o=Yc(e,a,t,r.l);n[a]=Xc(e,o,n[a]);return;case 2:for(var s=r.m;s.b;s=s.b)dt(e,s.a,n,t);return;case 3:dt(e,r.o,n,{s:r.n,t});return}}function Yc(e,r,n,t){function a(s){for(var u=n;u;u=u.t)s=u.s(s);return s}var o=e?Ee[r].e:Ee[r].f;return i(o,a,t)}function Xc(e,r,n){return n=n||{i:_,j:_},e?n.i=Ye(r,n.i):n.j=Ye(r,n.j),n}function rs(e){Ee[e]&&Xr(3)}function ns(e,r){return rs(e),Ee[e]={e:em,u:r,a:rm},Za(e)}var em=d(function(e,r){return r});function rm(e){var r=[],n=Ee[e].u,t=Jc(0);Ee[e].b=t,Ee[e].c=O(function(s,u,c){for(;u.b;u=u.b)for(var f=r,p=n(u.a),m=0;m<f.length;m++)f[m](p);return t});function a(s){r.push(s)}function o(s){r=r.slice();var u=r.indexOf(s);u>=0&&r.splice(u,1)}return{subscribe:a,unsubscribe:o}}function Ya(e,r){return rs(e),Ee[e]={f:nm,u:r,a:tm},Za(e)}var nm=d(function(e,r){return function(n){return e(r(n))}});function tm(e,r){var n=_,t=Ee[e].u,a=rr(null);Ee[e].b=a,Ee[e].c=O(function(s,u,c){return n=u,a});function o(s){var u=i(Ja,t,s);Fe(u)||Xr(4,e,u.a);for(var c=u.a,f=n;f.b;f=f.b)r(f.a(c))}return{send:o}}var $t,Vr=typeof document<"u"?document:{};function Xa(e,r){e.appendChild(r)}ve(function(e,r,n,t){var a=t.node;return a.parentNode.replaceChild(fr(e,function(){}),a),{}});function ma(e){return{$:0,a:e}}var ts=d(function(e,r){return d(function(n,t){for(var a=[],o=0;t.b;t=t.b){var s=t.a;o+=s.b||0,a.push(s)}return o+=a.length,{$:1,c:r,d:ss(n),e:a,f:e,b:o}})}),ee=ts(void 0),am=d(function(e,r){return d(function(n,t){for(var a=[],o=0;t.b;t=t.b){var s=t.a;o+=s.b.b||0,a.push(s)}return o+=a.length,{$:2,c:r,d:ss(n),e:a,f:e,b:o}})});am(void 0);d(function(e,r){return{$:4,j:e,k:r,b:1+(r.b||0)}});function gr(e,r){return{$:5,l:e,m:r,k:void 0}}var im=d(function(e,r){return gr([e,r],function(){return e(r)})}),om=O(function(e,r,n){return gr([e,r,n],function(){return i(e,r,n)})});ve(function(e,r,n,t){return gr([e,r,n,t],function(){return g(e,r,n,t)})});er(function(e,r,n,t,a){return gr([e,r,n,t,a],function(){return ue(e,r,n,t,a)})});Nn(function(e,r,n,t,a,o){return gr([e,r,n,t,a,o],function(){return le(e,r,n,t,a,o)})});Go(function(e,r,n,t,a,o,s){return gr([e,r,n,t,a,o,s],function(){return $r(e,r,n,t,a,o,s)})});Ha(function(e,r,n,t,a,o,s,u){return gr([e,r,n,t,a,o,s,u],function(){return Al(e,r,n,t,a,o,s,u)})});Qo(function(e,r,n,t,a,o,s,u,c){return gr([e,r,n,t,a,o,s,u,c],function(){return Pl(e,r,n,t,a,o,s,u,c)})});var as=d(function(e,r){return{$:"a0",n:e,o:r}}),sm=d(function(e,r){return{$:"a1",n:e,o:r}}),is=d(function(e,r){return{$:"a2",n:e,o:r}}),sr=d(function(e,r){return{$:"a3",n:e,o:r}});O(function(e,r,n){return{$:"a4",n:r,o:{f:e,o:n}}});var um=/^script$/i,lm=/^(on|formAction$)/i,cm=/^\s*j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:/i,mm=/^\s*(j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:|d\s*a\s*t\s*a\s*:\s*t\s*e\s*x\s*t\s*\/\s*h\s*t\s*m\s*l\s*(,|;))/i;function pm(e){return um.test(e)?"p":e}function fm(e){return lm.test(e)?"data-"+e:e}function dm(e){return cm.test(e)?"":e}function os(e){return mm.test(e)?"":e}d(function(e,r){return r.$==="a0"?i(as,r.n,$m(e,r.o)):r});function $m(e,r){var n=ii(r);return{$:r.$,a:n?g(Is,n<3?vm:bm,ye(e),r.a):i(he,e,r.a)}}var vm=d(function(e,r){return l(e(r.a),r.b)}),bm=d(function(e,r){return{ah:e(r.ah),bW:r.bW,bI:r.bI}});function ss(e){for(var r={};e.b;e=e.b){var n=e.a,t=n.$,a=n.n,o=n.o;if(t==="a2"){a==="className"?Bi(r,a,o):r[a]=o;continue}var s=r[t]||(r[t]={});t==="a3"&&a==="class"?Bi(s,a,o):s[a]=o}return r}function Bi(e,r,n){var t=e[r];e[r]=t?t+" "+n:n}function fr(e,r){var n=e.$;if(n===5)return fr(e.k||(e.k=e.m()),r);if(n===0)return Vr.createTextNode(e.a);if(n===4){for(var t=e.k,a=e.j;t.$===4;)typeof a!="object"?a=[a,t.j]:a.push(t.j),t=t.k;var o={j:a,p:r},s=fr(t,o);return s.elm_event_node_ref=o,s}if(n===3){var s=e.h(e.g);return pa(s,r,e.d),s}var s=e.f?Vr.createElementNS(e.f,e.c):Vr.createElement(e.c);$t&&e.c=="a"&&s.addEventListener("click",$t(s)),pa(s,r,e.d);for(var u=e.e,c=0;c<u.length;c++)Xa(s,fr(n===1?u[c]:u[c].b,r));return s}function pa(e,r,n){for(var t in n){var a=n[t];t==="a1"?hm(e,a):t==="a0"?wm(e,r,a):t==="a3"?gm(e,a):t==="a4"?km(e,a):(t!=="value"&&t!=="checked"||e[t]!==a)&&(e[t]=a)}}function hm(e,r){var n=e.style;for(var t in r)n[t]=r[t]}function gm(e,r){for(var n in r){var t=r[n];typeof t<"u"?e.setAttribute(n,t):e.removeAttribute(n)}}function km(e,r){for(var n in r){var t=r[n],a=t.f,o=t.o;typeof o<"u"?e.setAttributeNS(a,n,o):e.removeAttributeNS(a,n)}}function wm(e,r,n){var t=e.elmFs||(e.elmFs={});for(var a in n){var o=n[a],s=t[a];if(!o){e.removeEventListener(a,s),t[a]=void 0;continue}if(s){var u=s.q;if(u.$===o.$){s.q=o;continue}e.removeEventListener(a,s)}s=_m(r,o),e.addEventListener(a,s,ei&&{passive:ii(o)<2}),t[a]=s}}var ei;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){ei=!0}}))}catch{}function _m(e,r){function n(t){var a=n.q,o=Se(a.a,t);if(Fe(o)){for(var s=ii(a),u=o.a,c=s?s<3?u.a:u.ah:u,f=s==1?u.b:s==3&&u.bW,p=(f&&t.stopPropagation(),(s==2?u.b:s==3&&u.bI)&&t.preventDefault(),e),m,v;m=p.j;){if(typeof m=="function")c=m(c);else for(var v=m.length;v--;)c=m[v](c);p=p.p}p(c,f)}}return n.q=r,n}function ym(e,r){return e.$==r.$&&Ur(e.a,r.a)}function us(e,r){var n=[];return Ue(e,r,n,0),n}function _e(e,r,n,t){var a={$:r,r:n,s:t,t:void 0,u:void 0};return e.push(a),a}function Ue(e,r,n,t){if(e!==r){var a=e.$,o=r.$;if(a!==o)if(a===1&&o===2)r=Pm(r),o=1;else{_e(n,0,t,r);return}switch(o){case 5:for(var s=e.l,u=r.l,c=s.length,f=c===u.length;f&&c--;)f=s[c]===u[c];if(f){r.k=e.k;return}r.k=r.m();var p=[];Ue(e.k,r.k,p,0),p.length>0&&_e(n,1,t,p);return;case 4:for(var m=e.j,v=r.j,$=!1,k=e.k;k.$===4;)$=!0,typeof m!="object"?m=[m,k.j]:m.push(k.j),k=k.k;for(var w=r.k;w.$===4;)$=!0,typeof v!="object"?v=[v,w.j]:v.push(w.j),w=w.k;if($&&m.length!==v.length){_e(n,0,t,r);return}($?!xm(m,v):m!==v)&&_e(n,2,t,v),Ue(k,w,n,t+1);return;case 0:e.a!==r.a&&_e(n,3,t,r.a);return;case 1:Li(e,r,n,t,jm);return;case 2:Li(e,r,n,t,Em);return;case 3:if(e.h!==r.h){_e(n,0,t,r);return}var j=ri(e.d,r.d);j&&_e(n,4,t,j);var M=r.i(e.g,r.g);M&&_e(n,5,t,M);return}}}function xm(e,r){for(var n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function Li(e,r,n,t,a){if(e.c!==r.c||e.f!==r.f){_e(n,0,t,r);return}var o=ri(e.d,r.d);o&&_e(n,4,t,o),a(e,r,n,t)}function ri(e,r,n){var t;for(var a in e){if(a==="a1"||a==="a0"||a==="a3"||a==="a4"){var o=ri(e[a],r[a]||{},a);o&&(t=t||{},t[a]=o);continue}if(!(a in r)){t=t||{},t[a]=n?n==="a1"?"":n==="a0"||n==="a3"?void 0:{f:e[a].f,o:void 0}:typeof e[a]=="string"?"":null;continue}var s=e[a],u=r[a];s===u&&a!=="value"&&a!=="checked"||n==="a0"&&ym(s,u)||(t=t||{},t[a]=u)}for(var c in r)c in e||(t=t||{},t[c]=r[c]);return t}function jm(e,r,n,t){var a=e.e,o=r.e,s=a.length,u=o.length;s>u?_e(n,6,t,{v:u,i:s-u}):s<u&&_e(n,7,t,{v:s,e:o});for(var c=s<u?s:u,f=0;f<c;f++){var p=a[f];Ue(p,o[f],n,++t),t+=p.b||0}}function Em(e,r,n,t){for(var a=[],o={},s=[],u=e.e,c=r.e,f=u.length,p=c.length,m=0,v=0,$=t;m<f&&v<p;){var k=u[m],w=c[v],j=k.a,M=w.a,A=k.b,F=w.b,re=void 0,je=void 0;if(j===M){$++,Ue(A,F,a,$),$+=A.b||0,m++,v++;continue}var ge=u[m+1],ur=c[v+1];if(ge){var ce=ge.a,lr=ge.b;je=M===ce}if(ur){var Jn=ur.a,jr=ur.b;re=j===Jn}if(re&&je){$++,Ue(A,jr,a,$),fn(o,a,j,F,v,s),$+=A.b||0,$++,dn(o,a,j,lr,$),$+=lr.b||0,m+=2,v+=2;continue}if(re){$++,fn(o,a,M,F,v,s),Ue(A,jr,a,$),$+=A.b||0,m+=1,v+=2;continue}if(je){$++,dn(o,a,j,A,$),$+=A.b||0,$++,Ue(lr,F,a,$),$+=lr.b||0,m+=2,v+=1;continue}if(ge&&ce===Jn){$++,dn(o,a,j,A,$),fn(o,a,M,F,v,s),$+=A.b||0,$++,Ue(lr,jr,a,$),$+=lr.b||0,m+=2,v+=2;continue}break}for(;m<f;){$++;var k=u[m],A=k.b;dn(o,a,k.a,A,$),$+=A.b||0,m++}for(;v<p;){var h=h||[],w=c[v];fn(o,a,w.a,w.b,void 0,h),v++}(a.length>0||s.length>0||h)&&_e(n,8,t,{w:a,x:s,y:h})}var ls="_elmW6BL";function fn(e,r,n,t,a,o){var s=e[n];if(!s){s={c:0,z:t,r:a,s:void 0},o.push({r:a,A:s}),e[n]=s;return}if(s.c===1){o.push({r:a,A:s}),s.c=2;var u=[];Ue(s.z,t,u,s.r),s.r=a,s.s.s={w:u,A:s};return}fn(e,r,n+ls,t,a,o)}function dn(e,r,n,t,a){var o=e[n];if(!o){var s=_e(r,9,a,void 0);e[n]={c:1,z:t,r:a,s};return}if(o.c===0){o.c=2;var u=[];Ue(t,o.z,u,a),_e(r,9,a,{w:u,A:o});return}dn(e,r,n+ls,t,a)}function cs(e,r,n,t){$n(e,r,n,0,0,r.b,t)}function $n(e,r,n,t,a,o,s){for(var u=n[t],c=u.r;c===a;){var f=u.$;if(f===1)cs(e,r.k,u.s,s);else if(f===8){u.t=e,u.u=s;var p=u.s.w;p.length>0&&$n(e,r,p,0,a,o,s)}else if(f===9){u.t=e,u.u=s;var m=u.s;if(m){m.A.s=e;var p=m.w;p.length>0&&$n(e,r,p,0,a,o,s)}}else u.t=e,u.u=s;if(t++,!(u=n[t])||(c=u.r)>o)return t}var v=r.$;if(v===4){for(var $=r.k;$.$===4;)$=$.k;return $n(e,$,n,t,a+1,o,e.elm_event_node_ref)}for(var k=r.e,w=e.childNodes,j=0;j<k.length;j++){a++;var M=v===1?k[j]:k[j].b,A=a+(M.b||0);if(a<=c&&c<=A&&(t=$n(w[j],M,n,t,a,A,s),!(u=n[t])||(c=u.r)>o))return t;a=A}return t}function ms(e,r,n,t){return n.length===0?e:(cs(e,r,n,t),vt(e,n))}function vt(e,r){for(var n=0;n<r.length;n++){var t=r[n],a=t.t,o=Cm(a,t);a===e&&(e=o)}return e}function Cm(e,r){switch(r.$){case 0:return Mm(e,r.s,r.u);case 4:return pa(e,r.u,r.s),e;case 3:return e.replaceData(0,e.length,r.s),e;case 1:return vt(e,r.s);case 2:return e.elm_event_node_ref?e.elm_event_node_ref.j=r.s:e.elm_event_node_ref={j:r.s,p:r.u},e;case 6:for(var o=r.s,t=0;t<o.i;t++)e.removeChild(e.childNodes[o.v]);return e;case 7:for(var o=r.s,n=o.e,t=o.v,a=e.childNodes[t];t<n.length;t++)e.insertBefore(fr(n[t],r.u),a);return e;case 9:var o=r.s;if(!o)return e.parentNode.removeChild(e),e;var s=o.A;return typeof s.r<"u"&&e.parentNode.removeChild(e),s.s=vt(e,o.w),e;case 8:return Om(e,r);case 5:return r.s(e);default:Xr(10)}}function Mm(e,r,n){var t=e.parentNode,a=fr(r,n);return a.elm_event_node_ref||(a.elm_event_node_ref=e.elm_event_node_ref),t&&a!==e&&t.replaceChild(a,e),a}function Om(e,r){var n=r.s,t=Am(n.y,r);e=vt(e,n.w);for(var a=n.x,o=0;o<a.length;o++){var s=a[o],u=s.A,c=u.c===2?u.s:fr(u.z,r.u);e.insertBefore(c,e.childNodes[s.r])}return t&&Xa(e,t),e}function Am(e,r){if(e){for(var n=Vr.createDocumentFragment(),t=0;t<e.length;t++){var a=e[t],o=a.A;Xa(n,o.c===2?o.s:fr(o.z,r.u))}return n}}function ni(e){if(e.nodeType===3)return ma(e.textContent);if(e.nodeType!==1)return ma("");for(var r=_,n=e.attributes,t=n.length;t--;){var a=n[t],o=a.name,s=a.value;r=Ye(i(sr,o,s),r)}for(var u=e.tagName.toLowerCase(),c=_,f=e.childNodes,t=f.length;t--;)c=Ye(ni(f[t]),c);return g(ee,u,r,c)}function Pm(e){for(var r=e.e,n=r.length,t=new Array(n),a=0;a<n;a++)t[a]=r[a].b;return{$:1,c:e.c,d:e.d,e:t,f:e.f,b:e.b}}var Vm=ve(function(e,r,n,t){return Qa(r,t,e.dG,e.eo,e.d8,function(a,o){var s=e.eq,u=t.node,c=ni(u);return ps(o,function(f){var p=s(f),m=us(c,p);u=ms(u,c,m,a),c=p})})});ve(function(e,r,n,t){return Qa(r,t,e.dG,e.eo,e.d8,function(a,o){var s=e.bO&&e.bO(a),u=e.eq,c=Vr.title,f=Vr.body,p=ni(f);return ps(o,function(m){$t=s;var v=u(m),$=ee("body")(_)(v.df),k=us(p,$);f=ms(f,p,k,a),p=$,$t=0,c!==v.cY&&(Vr.title=c=v.cY)})})});var bt=typeof requestAnimationFrame<"u"?requestAnimationFrame:function(e){return setTimeout(e,1e3/60)};function ps(e,r){r(e);var n=0;function t(){n=n===1?0:(bt(t),r(e),1)}return function(a,o){e=a,o?(r(e),n===2&&(n=1)):(n===0&&bt(t),n=2)}}d(function(e,r){return i(tn,Dt,Me(function(){r&&history.go(r),e()}))});d(function(e,r){return i(tn,Dt,Me(function(){history.pushState({},"",r),e()}))});d(function(e,r){return i(tn,Dt,Me(function(){history.replaceState({},"",r),e()}))});var Sm={addEventListener:function(){},removeEventListener:function(){}},Im=typeof window<"u"?window:Sm;O(function(e,r,n){return Yo(Me(function(t){function a(o){Ka(n(o))}return e.addEventListener(r,a,ei&&{passive:!0}),function(){e.removeEventListener(r,a)}}))});d(function(e,r){var n=Se(e,r);return Fe(n)?V(n.a):y});function fs(e,r){return Me(function(n){bt(function(){var t=document.getElementById(e);n(t?rr(r(t)):Lc(fp(e)))})})}function qm(e){return Me(function(r){bt(function(){r(rr(e()))})})}d(function(e,r){return fs(r,function(n){return n[e](),en})});d(function(e,r){return qm(function(){return Im.scroll(e,r),en})});O(function(e,r,n){return fs(e,function(t){return t.scrollLeft=r,t.scrollTop=n,en})});var Fi;function Nm(){return Fi||(Fi=document.createElement("a"))}var Rm=O(function(e,r,n){return Me(function(t){var a=new Blob([n],{type:r});if(navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(a,e);return}var o=Nm(),s=URL.createObjectURL(a);o.href=s,o.download=e,ds(o),URL.revokeObjectURL(s)})});function ds(e){if(typeof MouseEvent=="function")e.dispatchEvent(new MouseEvent("click"));else{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(e),e.dispatchEvent(r),document.body.removeChild(e)}}var ln;function Tm(e){return Me(function(r){ln=document.createElement("input"),ln.type="file",ln.accept=i(pr,",",e),ln.addEventListener("change",function(n){r(rr(n.target.files[0]))}),ds(ln)})}function Dm(e){return Me(function(r){var n=new FileReader;return n.addEventListener("loadend",function(){r(rr(n.result))}),n.readAsText(e),function(){n.abort()}})}var Bm=/.^/,Lm=d(function(e,r){var n="g";e.dN&&(n+="m"),e.dh&&(n+="i");try{return V(new RegExp(r,n))}catch{return y}}),Fm=d(function(e,r){return r.match(e)!==null}),$s=O(function(e,r,n){for(var t=[],a=0,o=n,s=r.lastIndex,u=-1,c;a++<e&&(c=r.exec(o))&&u!=r.lastIndex;){for(var f=c.length-1,p=new Array(f);f>0;){var m=c[f];p[--f]=m?V(m):y}t.push(ue(Gs,c[0],c.index,a,b(p))),u=r.lastIndex}return r.lastIndex=s,b(t)}),vs=ve(function(e,r,n,t){var a=0;function o(s){if(a++>=e)return s;for(var u=arguments.length-3,c=new Array(u);u>0;){var f=arguments[u];c[--u]=f?V(f):y}return n(ue(Gs,s,arguments[arguments.length-2],a,b(c)))}return t.replace(r,o)});O(function(e,r,n){for(var t=n,a=[],o=r.lastIndex,s=r.lastIndex;e--;){var u=r.exec(t);if(!u)break;a.push(t.slice(o,u.index)),o=r.lastIndex}return a.push(t.slice(o)),r.lastIndex=s,b(a)});var bs=1/0;d(function(e,r){return e&r});d(function(e,r){return e|r});d(function(e,r){return e^r});d(function(e,r){return r<<e});d(function(e,r){return r>>e});d(function(e,r){return r>>>e});function Um(e){return encodeURIComponent(e)}function Hm(e){try{return V(decodeURIComponent(e))}catch{return y}}var C=Ll,Gn=Nl;O(function(e,r,n){var t=n.c,a=n.d,o=d(function(s,u){if(s.$){var f=s.a;return g(Gn,e,u,f)}else{var c=s.a;return g(Gn,o,u,c)}});return g(Gn,o,g(Gn,e,r,a),t)});var ti=O(function(e,r,n){e:for(;;){if(n.$===-2)return r;var t=n.b,a=n.c,o=n.d,s=n.e,u=e,c=g(e,t,a,g(ti,e,r,s)),f=o;e=u,r=c,n=f;continue e}}),qr=function(e){return g(ti,O(function(r,n,t){return i(C,l(r,n),t)}),_,e)},zm=function(e){return g(ti,O(function(r,n,t){return i(C,r,t)}),_,e)},hs=1,Jm=2,gs=0,ke=function(e){return{$:1,a:e}},ai=d(function(e,r){return{$:3,a:e,b:r}}),Ui=d(function(e,r){return{$:0,a:e,b:r}}),ks=d(function(e,r){return{$:1,a:e,b:r}}),pe=function(e){return{$:0,a:e}},Wm=function(e){return{$:2,a:e}},V=function(e){return{$:0,a:e}},y={$:1},ws=cc,_s=qc,En=Zo,pr=d(function(e,r){return i(tc,e,za(r))}),Tn=d(function(e,r){return b(i(nc,e,r))}),ys=function(e){return i(pr,`
    `,i(Tn,`
`,e))},Oe=O(function(e,r,n){e:for(;;)if(n.b){var t=n.a,a=n.b,o=e,s=i(e,t,r),u=a;e=o,r=s,n=u;continue e}else return r}),xs=function(e){return g(Oe,d(function(r,n){return n+1}),0,e)},Km=Fl,Gm=O(function(e,r,n){e:for(;;)if(te(e,r)<1){var t=e,a=r-1,o=i(C,r,n);e=t,r=a,n=o;continue e}else return n}),Qm=d(function(e,r){return g(Gm,e,r,_)}),Zm=d(function(e,r){return g(Km,e,i(Qm,0,xs(r)-1),r)}),rn=vc,js=function(e){var r=rn(e);return 97<=r&&r<=122},Es=function(e){var r=rn(e);return r<=90&&65<=r},Ym=function(e){return js(e)||Es(e)},ht=function(e){var r=rn(e);return r<=57&&48<=r},Xm=function(e){return js(e)||Es(e)||ht(e)},we=function(e){return g(Oe,C,_,e)},nn=Zl,ep=d(function(e,r){return`

(`+(En(e+1)+(") "+ys(Cs(r))))}),Cs=function(e){return i(rp,e,_)},rp=d(function(e,r){e:for(;;)switch(e.$){case 0:var n=e.a,s=e.b,t=function(){var w=nn(n);if(w.$===1)return!1;var j=w.a,M=j.a,A=j.b;return Ym(M)&&i(ws,Xm,A)}(),a=t?"."+n:"['"+(n+"']"),c=s,f=i(C,a,r);e=c,r=f;continue e;case 1:var o=e.a,s=e.b,u="["+(En(o)+"]"),c=s,f=i(C,u,r);e=c,r=f;continue e;case 2:var p=e.a;if(p.b)if(p.b.b){var m=function(){return r.b?"The Json.Decode.oneOf at json"+i(pr,"",we(r)):"Json.Decode.oneOf"}(),k=m+(" failed in the following "+(En(xs(p))+" ways:"));return i(pr,`

`,i(C,k,i(Zm,ep,p)))}else{var s=p.a,c=s,f=r;e=c,r=f;continue e}else return"Ran into a Json.Decode.oneOf with no possibilities"+function(){return r.b?" at json"+i(pr,"",we(r)):"!"}();default:var v=e.a,$=e.b,k=function(){return r.b?"Problem with the value at json"+(i(pr,"",we(r))+`:

    `):`Problem with the given value:

`}();return k+(ys(i(_s,4,$))+(`

`+v))}}),We=32,fa=ve(function(e,r,n,t){return{$:0,a:e,b:r,c:n,d:t}}),da=Vl,Ms=Jl,Os=d(function(e,r){return Ii(r)/Ii(e)}),$a=Ms(i(Os,2,We)),np=ue(fa,0,$a,da,da),As=Il,tp=function(e){return{$:1,a:e}};d(function(e,r){return e(r)});var ap=d(function(e,r){return r(e)}),ip=Tl,op=Wl,Hi=Sl,Ps=d(function(e,r){return te(e,r)>0?e:r}),sp=function(e){return{$:0,a:e}},Vs=ql,up=d(function(e,r){e:for(;;){var n=i(Vs,We,e),t=n.a,a=n.b,o=i(C,sp(t),r);if(a.b){var s=a,u=o;e=s,r=u;continue e}else return we(o)}}),Ss=function(e){var r=e.a;return r},lp=d(function(e,r){e:for(;;){var n=Ms(r/We);if(n===1)return i(Vs,We,e).a;var t=i(up,e,_),a=n;e=t,r=a;continue e}}),cp=d(function(e,r){if(r.s){var n=r.s*We,t=op(i(Os,We,n-1)),a=e?we(r.y):r.y,o=i(lp,a,r.s);return ue(fa,Hi(r.x)+n,i(Ps,5,t*$a),o,r.x)}else return ue(fa,Hi(r.x),$a,da,r.x)}),mp=er(function(e,r,n,t,a){e:for(;;){if(r<0)return i(cp,!1,{y:t,s:n/We|0,x:a});var o=tp(g(As,We,r,e)),s=e,u=r-We,c=n,f=i(C,o,t),p=a;e=s,r=u,n=c,t=f,a=p;continue e}}),pp=d(function(e,r){if(e<=0)return np;var n=e%We,t=g(As,n,e-n,r),a=e-n-We;return le(mp,r,a,e,_,t)}),Fe=function(e){return!e.$},ar=Oc,he=Pc,Is=Vc,ye=hc,ii=function(e){switch(e.$){case 0:return 0;case 1:return 1;case 2:return 2;default:return 3}},oi=function(e){return e},fp=oi,zi=Nn(function(e,r,n,t,a,o){return{cg:o,ck:r,cB:t,cD:n,cK:e,cL:a}}),dp=mc,z=Yl,ze=ac,kr=d(function(e,r){return e<1?r:g(ze,e,z(r),r)}),Rt=fc,wr=function(e){return e===""},Dr=d(function(e,r){return e<1?"":g(ze,0,e,r)}),Tt=dc,Ji=er(function(e,r,n,t,a){if(wr(a)||i(dp,"@",a))return y;var o=i(Rt,":",a);if(o.b){if(o.b.b)return y;var s=o.a,u=Tt(i(kr,s+1,a));if(u.$===1)return y;var c=u;return V($r(zi,e,i(Dr,s,a),c,r,n,t))}else return V($r(zi,e,a,y,r,n,t))}),Wi=ve(function(e,r,n,t){if(wr(t))return y;var a=i(Rt,"/",t);if(a.b){var o=a.a;return le(Ji,e,i(kr,o,t),r,n,i(Dr,o,t))}else return le(Ji,e,"/",r,n,t)}),Ki=O(function(e,r,n){if(wr(n))return y;var t=i(Rt,"?",n);if(t.b){var a=t.a;return ue(Wi,e,V(i(kr,a+1,n)),r,i(Dr,a,n))}else return ue(Wi,e,y,r,n)});d(function(e,r){if(wr(r))return y;var n=i(Rt,"#",r);if(n.b){var t=n.a;return g(Ki,e,V(i(kr,t+1,r)),i(Dr,t,r))}else return g(Ki,e,y,r)});var qs=pc,Dt=function(e){},Dn=rr,$p=Dn(0),Ns=ve(function(e,r,n,t){if(t.b){var a=t.a,o=t.b;if(o.b){var s=o.a,u=o.b;if(u.b){var c=u.a,f=u.b;if(f.b){var p=f.a,m=f.b,v=n>500?g(Oe,e,r,we(m)):ue(Ns,e,r,n+1,m);return i(e,a,i(e,s,i(e,c,i(e,p,v))))}else return i(e,a,i(e,s,i(e,c,r)))}else return i(e,a,i(e,s,r))}else return i(e,a,r)}else return r}),Br=O(function(e,r,n){return ue(Ns,e,r,0,n)}),Y=d(function(e,r){return g(Br,d(function(n,t){return i(C,e(n),t)}),_,r)}),gt=ca,si=d(function(e,r){return i(gt,function(n){return Dn(e(n))},r)}),vp=O(function(e,r,n){return i(gt,function(t){return i(gt,function(a){return Dn(i(e,t,a))},n)},r)}),bp=function(e){return g(Br,vp(C),Dn(_),e)},hp=Qc,gp=d(function(e,r){var n=r;return Yo(i(gt,hp(e),n))}),kp=O(function(e,r,n){return i(si,function(t){return 0},bp(i(Y,gp(e),r)))}),wp=O(function(e,r,n){return Dn(0)}),_p=d(function(e,r){var n=r;return i(si,e,n)});Ee.Task=Kc($p,kp,wp,_p);var yp=Za("Task"),tn=d(function(e,r){return yp(i(si,e,r))}),xp=Vm,qe=Ec,ot=function(e){return{$:0,a:e}},zr=Ja,va={$:-2},Qe=va,Qn={am:Qe,ac:y,ay:y,V:Qe,a8:_,aP:Qe,R:Qe,N:Qe},jp=d(function(e,r){return g(Oe,Dc(e),Nc(),r)}),gn=Wa,Rs=ns("evaluateAll",jp(gn)),Bt=Ul,Ep=function(e){return i(Y,Ss,i(Bt,function(r){var n=r.b.cm;return n},qr(e)))},ae=function(e){if(e.b){var r=e.a;return e.b,V(r)}else return y},Cp=es,mr=Cp(_),Ae=er(function(e,r,n,t,a){return{$:-1,a:e,b:r,c:n,d:t,e:a}}),Gi=er(function(e,r,n,t,a){if(a.$===-1&&!a.a){a.a;var o=a.b,s=a.c,u=a.d,c=a.e;if(t.$===-1&&!t.a){t.a;var f=t.b,p=t.c,m=t.d,v=t.e;return le(Ae,0,r,n,le(Ae,1,f,p,m,v),le(Ae,1,o,s,u,c))}else return le(Ae,e,o,s,le(Ae,0,r,n,t,u),c)}else if(t.$===-1&&!t.a&&t.d.$===-1&&!t.d.a){t.a;var f=t.b,p=t.c,$=t.d;$.a;var k=$.b,w=$.c,j=$.d,M=$.e,v=t.e;return le(Ae,0,f,p,le(Ae,1,k,w,j,M),le(Ae,1,r,n,v,a))}else return le(Ae,e,r,n,t,a)}),Ts=Bl,ba=O(function(e,r,n){if(n.$===-2)return le(Ae,0,e,r,va,va);var t=n.a,a=n.b,o=n.c,s=n.d,u=n.e,c=i(Ts,e,a);switch(c){case 0:return le(Gi,t,a,o,g(ba,e,r,s),u);case 1:return le(Ae,t,a,r,s,u);default:return le(Gi,t,a,o,s,g(ba,e,r,u))}}),Bn=O(function(e,r,n){var t=g(ba,e,r,n);if(t.$===-1&&!t.a){t.a;var a=t.b,o=t.c,s=t.d,u=t.e;return le(Ae,1,a,o,s,u)}else{var c=t;return c}}),Ds=function(e){return g(Oe,d(function(r,n){var t=r.a,a=r.b;return g(Bn,t,a,n)}),Qe,e)},Mp=Mc,kt=function(e){return i(he,Ds,Mp(e))},Op=Ha(function(e,r,n,t,a,o,s,u){return{dr:a,ds:r,dz:o,dQ:u,dX:e,d9:n,cY:s,en:t}}),Ap=O(function(e,r,n){return{c9:r,d1:e,d2:n}}),Pp=function(e){return{$:0,a:e}},Vp=function(e){return{$:2,a:e}},Sp=function(e){return{$:7,a:e}},Ip=function(e){return{$:1,a:e}},qp=function(e){return{$:5,a:e}},Np=function(e){return{$:6,a:e}},Rp=function(e){return{$:4,a:e}},Tp=function(e){return{$:3,a:e}},ea=function(e){return i(ar,e,ye(0))},He=xc,kn=function(e){return{$:2,a:e}},Dp={$:3},Bs=function(e){return{$:1,a:e}},ui=function(e){return{$:0,a:e}},li=kc,Bp=wc,Lt=jc,Ft=Ac,$e=yc,ci=Ft(b([i(he,function(e){switch(e){case"oui":return kn(!0);case"non":return kn(!1);default:return ui(e)}},$e),i(he,Bs,Bp),i(he,kn,li),Lt(Dp)])),Pe=function(e){return Ft(b([Lt(y),i(he,V,e)]))},Ls=Is(ap),wt=d(function(e,r){return g(Br,qe,r,e)}),Sr=_c,Lp=O(function(e,r,n){var t=function(o){return Ft(b([o,Lt(n)]))},a=function(o){var s=i(zr,i(wt,e,Sr),o);if(s.$)return ye(n);var u=s.a,c=i(zr,t(r),u);if(c.$)return i(wt,e,t(r));var f=c.a;return ye(f)};return i(ar,a,Sr)}),Ve=ve(function(e,r,n,t){return i(Ls,g(Lp,b([e]),r,n),t)}),Fp=d(function(e,r){return{dj:e,cG:r}}),Ze=O(function(e,r,n){return i(Ls,i(qe,e,r),n)}),Up=g(Ze,"possibilitÃ©s",He($e),ue(Ve,"choix obligatoire",Pe($e),y,ye(Fp))),Hp=d(function(e,r){return{dc:r,dY:e}}),mi=kt(ci),zp=g(Ze,"avec",mi,g(Ze,"rÃ¨gle",$e,ye(Hp)));function wn(){return ue(Ve,"sinon",Pe(_n()),y,ue(Ve,"alors",Pe(_n()),y,ue(Ve,"si",Pe(_n()),y,ye(Ap))))}function _n(){return Ft(b([i(he,Pp,ci),i(he,Ip,i(qe,"somme",He($e))),i(he,Vp,i(qe,"moyenne",He($e))),i(he,Tp,i(qe,"variations",He(ea(function(e){return wn()})))),i(he,Rp,i(qe,"une possibilitÃ©",Up)),i(he,qp,i(qe,"toutes ces conditions",He(ea(function(e){return wn()})))),i(he,Np,i(qe,"une de ces conditions",He(ea(function(e){return wn()})))),i(he,Sp,i(qe,"recalcul",zp))]))}var Jp=wn();wn=function(){return Jp};var ha=_n();_n=function(){return ha};var Wp=ue(Ve,"note",Pe($e),y,ue(Ve,"titre",Pe($e),y,ue(Ve,"formule",Pe(ha),y,ue(Ve,"par dÃ©faut",Pe(ha),y,ue(Ve,"unitÃ©",Pe($e),y,ue(Ve,"rÃ©sumÃ©",Pe($e),y,ue(Ve,"description",Pe($e),y,ue(Ve,"question",Pe($e),y,ye(Op))))))))),Kp=kt(Wp),Gp=d(function(e,r){return{am:e,aP:r}}),Qp=d(function(e,r){return{cm:e,d6:r}}),Zp=gc,Yp=g(Ze,"sub",He($e),g(Ze,"index",Zp,ye(Qp))),Xp=g(Ze,"questions",kt(He(He($e))),g(Ze,"categories",kt(Yp),ye(Gp))),ef=function(e){var r=Ne(i(zr,Kp,e.bM),i(zr,Xp,e.bX),i(zr,mi,e.N));if(r.a.$){var o=r.a.a;return l(I(Qn,{ac:V(ot(o))}),mr)}else if(r.b.$){var o=r.b.a;return l(I(Qn,{ac:V(ot(o))}),mr)}else if(r.c.$){var o=r.c.a;return l(I(Qn,{ac:V(ot(o))}),mr)}else{var n=r.a.a,t=r.b.a,a=r.c.a;return l(I(Qn,{am:t.am,ay:ae(zm(t.am)),a8:Ep(t.am),aP:t.aP,R:n,N:a}),Rs(i(Y,function(s){var u=s.a;return u},qr(n))))}},rf=function(e){return{$:3,a:e}},nf=function(e){return{$:2,a:e}},tf=function(e){return{$:1,a:e}},af=es,_t=Cc,of=Ya("evaluatedRule",i(ar,function(e){return i(ar,function(r){return ye(l(e,r))},i(_t,1,Sr))},i(_t,0,$e))),sf=Ya("evaluatedRules",He(i(ar,function(e){return i(ar,function(r){return ye(l(e,r))},i(_t,1,Sr))},i(_t,0,$e)))),uf=Ya("situationUpdated",Lt(0)),lf=function(e){return af(b([of(tf),sf(nf),uf(rf)]))},cf=function(e){return{$:7,a:e}},mf={$:1},pf=function(e){return{$:6,a:e}},ff=Sc,pi=O(function(e,r,n){e:for(;;){if(n.$===-2)return r;var t=n.b,a=n.c,o=n.d,s=n.e,u=e,c=g(e,t,a,g(pi,e,r,o)),f=s;e=u,r=c,n=f;continue e}}),df=O(function(e,r,n){return g(pi,O(function(t,a,o){return g(Tc,e(t),r(a),o)}),Rc(),n)}),$f=Wa,vf=Bc,bf=function(e){return"'"+(e+"'")},hf=function(e){switch(e.$){case 0:var r=e.a;return gn(bf(r));case 1:var n=e.a;return $f(n);case 2:var t=e.a;return gn(t?"oui":"non");default:return vf}},Zn=function(e){return g(df,oi,hf,e)},gf=d(function(e,r){return i(tn,r,Tm(e))}),ra=ns("setSituation",oi),kf=O(function(e,r,n){return i(tn,Dt,g(Rm,e,r,n))}),wf=Dm,_f=O(function(e,r,n){return{cq:n,dM:r,aN:e}}),yf=g(Ze,"isNullable",li,g(Ze,"missingVariables",He($e),g(Ze,"nodeValue",ci,ye(_f)))),Qi=d(function(e,r){var n=e.a,t=e.b,a=i(zr,yf,t);if(a.$){var s=a.a;return I(r,{ac:V(ot(s))})}else{var o=a.a;return I(r,{V:g(Bn,n,o,r.V)})}}),xf=d(function(e,r){switch(e.$){case 0:var n=e.a,s=n.a,t=n.b,a=g(Bn,s,t,r.N);return l(I(r,{N:a}),ra(Zn(a)));case 1:var o=e.a,s=o.a,u=o.b;return l(i(Qi,l(s,u),r),mr);case 2:var c=e.a;return l(g(Oe,Qi,r,c),mr);case 3:return l(r,Rs(i(Y,function(k){var w=k.a;return w},qr(r.R))));case 4:var f=e.a;return l(I(r,{ay:V(f)}),mr);case 8:return l(r,g(kf,"situation.json","json",i(_s,0,Zn(r.N))));case 6:var p=e.a;return l(r,i(tn,cf,wf(p)));case 5:return l(r,i(gf,b(["json"]),pf));case 9:return l(I(r,{N:Qe}),ra(Zn(Qe)));case 7:var m=e.a,v=i(ff,mi,m);if(v.$)return l(I(r,{ac:V(mf)}),mr);var $=v.a;return l(I(r,{N:$}),ra(Zn($)));default:return l(r,mr)}}),De=d(function(e,r){return i(is,e,gn(r))}),P=De("className"),H=ee("div"),Zi=function(e){return e.$===-2},jf=im,Yn=jf,Ef=om,Cf=Ef,Mf=function(e){return{$:4,a:e}},Cn=ee("a"),fe=d(function(e,r){if(r.$)return y;var n=r.a;return e(n)}),Fs=ee("li"),Of=function(e){return{$:0,a:e}},Us=as,Hs=d(function(e,r){return i(Us,e,Of(r))}),st=function(e){return i(Hs,"click",ye(e))},Af=ma,G=Af,fi=uc,zs=ee("ul"),x=d(function(e,r){if(r.$)return e;var n=r.a;return n}),Pf=d(function(e,r){return i(H,b([P("flex flex-wrap md:justify-center bg-neutral rounded-md border border-base-200 p-2 mb-4")]),b([i(zs,b([P("menu menu-horizontal gap-2")]),i(Y,function(n){var t=i(x,"",i(fe,function(a){return ne(a,n)?V(" bg-primary text-white border-transparent"):y},r));return i(Fs,_,b([i(Cn,b([P("bg-base-100 rounded-md border border-base-200 cursor-pointer px-4 py-2 text-xs font-semibold hover:bg-primary hover:text-white hover:border-transparent"+t),st(Mf(n))]),b([G(fi(n))]))]))},e))]))}),Ce=d(function(e,r){e:for(;;){if(r.$===-2)return y;var n=r.b,t=r.c,a=r.d,o=r.e,s=i(Ts,e,n);switch(s){case 0:var u=e,c=a;e=u,r=c;continue e;case 1:return V(t);default:var u=e,c=o;e=u,r=c;continue e}}}),Vf=De("id"),Js=d(function(e,r){return r.b?g(Br,C,r,e):e}),ut=function(e){return g(Br,Js,_,e)},B=O(function(e,r,n){return r(e(n))}),Mn=function(e){return{$:5,a:e}},vr=d(function(e,r){return{$:6,a:e,b:r}}),Ut=d(function(e,r){return{$:4,a:e,b:r}}),On=d(function(e,r){return e<1?"":g(ze,-e,z(r),r)}),yt=ic,Ws=function(e){return i(On,2,e)==="  "?yt(e)+"  ":yt(e)},ga=d(function(e,r){return i(Ut,e+(`
`+Ws(r)),_)}),di=d(function(e,r){e:for(;;)if(r.b){var n=r.a,t=r.b;if(e(n))return!0;var a=e,o=t;e=a,r=o;continue e}else return!1}),Ks=O(function(e,r,n){return e(r(n))}),Sf=Gl,If=d(function(e,r){return!i(di,i(Ks,Sf,e),r)}),Gs=ve(function(e,r,n,t){return{cm:r,cu:e,dR:n,d7:t}}),qf=Lm,J=function(e){return i(qf,{dh:!1,dN:!1},e)},W=Bm,Nf=i(x,W,J("^ {0,3}(?:>[ ]?)(.*)$")),$i=i(x,W,J("^\\s*$")),an=Fm,Rf=function(e){var r=e.a,n=e.b,t=e.c,a=z(n),o=a>=4,s=o?Q(n,t):t,u=o||i(an,$i,t)?r.A-a:r.A;return l(I(r,{A:u}),s)},Tf=i(x,W,J("^ {0,3}(#{1,6})(?:[ \\t]+[ \\t#]+$|[ \\t]+|$)(.*?)(?:\\s+[ \\t#]*)?$")),vi=O(function(e,r,n){return{$:2,a:e,b:r,c:n}}),Df=function(e){var r=e.d7;if(r.b&&!r.a.$&&r.b.b){var n=r.a.a,t=r.b,a=t.a;return V(g(vi,i(x,"",a),z(n),_))}else return y},xe=$s,Ke=d(function(e,r){if(r.$)return ke(e);var n=r.a;return pe(n)}),q=d(function(e,r){if(r.$)return y;var n=r.a;return V(e(n))}),Qs=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,function(t){return i(C,t,n)},i(fe,Df,ae(g(xe,1,Tf,r)))))},Zs=function(e){return{$:0,a:e}},dr=d(function(e,r){return{$:3,a:e,b:r}}),xt=d(function(e,r){return{$:1,a:e,b:r}}),Bf=d(function(e,r){if(r.b){var n=r.a,t=r.b;return i(C,i(Ys,n,e),t)}else return b([b([Zs(e.cu)])])}),Ys=d(function(e,r){e:for(;;)if(e.b)switch(e.a.$){case 3:if(e.a.a.$===1&&e.a.a.a){var n=e.a,t=n.a,a=t.b,o=n.b,f=e.b;return function(m){return i(C,m,f)}(i(dr,i(xt,!0,a),o+`
`))}else break e;case 6:var s=e.a,u=s.a,c=s.b,f=e.b;return i(C,i(vr,u,i(Bf,r,c)),f);default:break e}else break e;return i(C,Zs(r.cu),e)}),Xs=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,Ys(n),ae(g(xe,1,$i,r))))},Lf=i(x,W,J("^(?: {4,4}| {0,3}\\t)(.*)$")),lt={$:0},Ff=d(function(e,r){e:for(;;)if(e.b&&!e.a.$){var n=e.a.a,t=e.b,a=t,o=i(C,n,r);e=a,r=o;continue e}else return l(e,r)}),jt=d(function(e,r){e:for(;;)if(r.b)switch(r.a.$){case 4:var n=r.a,t=n.a,c=r.b;return V(i(C,i(ga,t,e),c));case 5:var a=r.a.a,c=r.b;return i(q,function(m){return i(C,Mn(m),c)},i(jt,e,a));case 6:var o=r.a,s=o.a,u=o.b,c=r.b;if(u.b){var f=u.a,p=u.b;return i(q,i(B,function(m){return i(C,m,p)},i(B,vr(s),function(m){return i(C,m,c)})),i(jt,e,f))}else return y;default:break e}else break e;return y}),bi=function(e){return i(pr,"",e)},_r=vs(bs),Uf=vs,eu=i(x,W,J("\\t")),Et=function(e){return i(B,i(_r,eu,function(r){return"    "}),g(Uf,1,i(x,W,J("^ {0,"+(En(e)+"}"))),function(r){return""}))},Hf=d(function(e,r){var n=r.a,t=r.b;if(n.b&&n.a.$===3&&!n.a.a.$){var a=n.a;a.a;var o=a.b,s=n.b;return V(function(u){return i(C,u,s)}(i(dr,lt,function(u){return u+(e+`
`)}(Q(o,bi(i(Y,function(u){return i(Et,4,u)+`
`},t)))))))}else return y}),zf=d(function(e,r){e:for(;;)if(e.b)switch(e.a.$){case 3:if(e.a.a.$)break e;var n=e.a;n.a;var t=n.b,o=e.b;return function(u){return i(C,u,o)}(i(dr,lt,t+(r+`
`)));case 0:var a=e.a.a,o=e.b;return i(x,function(s){return i(C,s,e)}(i(dr,lt,r+`
`)),i(Hf,r,i(Ff,o,b([a]))));default:break e}else break e;return i(x,function(s){return i(C,s,e)}(i(dr,lt,r+`
`)),i(jt,r,e))}),ru=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,zf(n),i(x,y,i(x,y,i(q,i(B,function(t){return t.d7},ae),ae(g(xe,1,Lf,r)))))))},Jf=i(x,W,J("&#([0-9]{1,8});")),ka=Ql,Kr=function(e){return i(ka,e,"")},Ct=bc,An=Hl,Wf=function(e){var r=i(An,16,e),n=i(An,131070,e);return e>=131070&&(0<=n&&n<=15||65536<=n&&n<=65551)&&(r===14||r===15)},Kf=function(e){return e===9||e===10||e===13||e===133||32<=e&&e<=126||160<=e&&e<=55295||57344<=e&&e<=64975||65008<=e&&e<=65533||65536<=e&&e<=1114109},nu=function(e){return Kf(e)&&!Wf(e)?Kr(Ct(e)):Kr(Ct(65533))},Gf=function(e){return i(x,e.cu,i(q,nu,i(fe,Tt,i(x,y,ae(e.d7)))))},Qf=i(_r,Jf,Gf),Zf=i(x,W,J("&([0-9a-zA-Z]+);")),Yf=Ds(b([l("quot",34),l("amp",38),l("apos",39),l("lt",60),l("gt",62),l("nbsp",160),l("iexcl",161),l("cent",162),l("pound",163),l("curren",164),l("yen",165),l("brvbar",166),l("sect",167),l("uml",168),l("copy",169),l("ordf",170),l("laquo",171),l("not",172),l("shy",173),l("reg",174),l("macr",175),l("deg",176),l("plusmn",177),l("sup2",178),l("sup3",179),l("acute",180),l("micro",181),l("para",182),l("middot",183),l("cedil",184),l("sup1",185),l("ordm",186),l("raquo",187),l("frac14",188),l("frac12",189),l("frac34",190),l("iquest",191),l("Agrave",192),l("Aacute",193),l("Acirc",194),l("Atilde",195),l("Auml",196),l("Aring",197),l("AElig",198),l("Ccedil",199),l("Egrave",200),l("Eacute",201),l("Ecirc",202),l("Euml",203),l("Igrave",204),l("Iacute",205),l("Icirc",206),l("Iuml",207),l("ETH",208),l("Ntilde",209),l("Ograve",210),l("Oacute",211),l("Ocirc",212),l("Otilde",213),l("Ouml",214),l("times",215),l("Oslash",216),l("Ugrave",217),l("Uacute",218),l("Ucirc",219),l("Uuml",220),l("Yacute",221),l("THORN",222),l("szlig",223),l("agrave",224),l("aacute",225),l("acirc",226),l("atilde",227),l("auml",228),l("aring",229),l("aelig",230),l("ccedil",231),l("egrave",232),l("eacute",233),l("ecirc",234),l("euml",235),l("igrave",236),l("iacute",237),l("icirc",238),l("iuml",239),l("eth",240),l("ntilde",241),l("ograve",242),l("oacute",243),l("ocirc",244),l("otilde",245),l("ouml",246),l("divide",247),l("oslash",248),l("ugrave",249),l("uacute",250),l("ucirc",251),l("uuml",252),l("yacute",253),l("thorn",254),l("yuml",255),l("OElig",338),l("oelig",339),l("Scaron",352),l("scaron",353),l("Yuml",376),l("fnof",402),l("circ",710),l("tilde",732),l("Alpha",913),l("Beta",914),l("Gamma",915),l("Delta",916),l("Epsilon",917),l("Zeta",918),l("Eta",919),l("Theta",920),l("Iota",921),l("Kappa",922),l("Lambda",923),l("Mu",924),l("Nu",925),l("Xi",926),l("Omicron",927),l("Pi",928),l("Rho",929),l("Sigma",931),l("Tau",932),l("Upsilon",933),l("Phi",934),l("Chi",935),l("Psi",936),l("Omega",937),l("alpha",945),l("beta",946),l("gamma",947),l("delta",948),l("epsilon",949),l("zeta",950),l("eta",951),l("theta",952),l("iota",953),l("kappa",954),l("lambda",955),l("mu",956),l("nu",957),l("xi",958),l("omicron",959),l("pi",960),l("rho",961),l("sigmaf",962),l("sigma",963),l("tau",964),l("upsilon",965),l("phi",966),l("chi",967),l("psi",968),l("omega",969),l("thetasym",977),l("upsih",978),l("piv",982),l("ensp",8194),l("emsp",8195),l("thinsp",8201),l("zwnj",8204),l("zwj",8205),l("lrm",8206),l("rlm",8207),l("ndash",8211),l("mdash",8212),l("lsquo",8216),l("rsquo",8217),l("sbquo",8218),l("ldquo",8220),l("rdquo",8221),l("bdquo",8222),l("dagger",8224),l("Dagger",8225),l("bull",8226),l("hellip",8230),l("permil",8240),l("prime",8242),l("Prime",8243),l("lsaquo",8249),l("rsaquo",8250),l("oline",8254),l("frasl",8260),l("euro",8364),l("image",8465),l("weierp",8472),l("real",8476),l("trade",8482),l("alefsym",8501),l("larr",8592),l("uarr",8593),l("rarr",8594),l("darr",8595),l("harr",8596),l("crarr",8629),l("lArr",8656),l("uArr",8657),l("rArr",8658),l("dArr",8659),l("hArr",8660),l("forall",8704),l("part",8706),l("exist",8707),l("empty",8709),l("nabla",8711),l("isin",8712),l("notin",8713),l("ni",8715),l("prod",8719),l("sum",8721),l("minus",8722),l("lowast",8727),l("radic",8730),l("prop",8733),l("infin",8734),l("ang",8736),l("and",8743),l("or",8744),l("cap",8745),l("cup",8746),l("int",8747),l("there4",8756),l("sim",8764),l("cong",8773),l("asymp",8776),l("ne",8800),l("equiv",8801),l("le",8804),l("ge",8805),l("sub",8834),l("sup",8835),l("nsub",8836),l("sube",8838),l("supe",8839),l("oplus",8853),l("otimes",8855),l("perp",8869),l("sdot",8901),l("lceil",8968),l("rceil",8969),l("lfloor",8970),l("rfloor",8971),l("lang",9001),l("rang",9002),l("loz",9674),l("spades",9824),l("clubs",9827),l("hearts",9829),l("diams",9830)])),Xf=function(e){return i(x,e.cu,i(q,i(B,Ct,Kr),i(fe,function(r){return i(Ce,r,Yf)},i(x,y,ae(e.d7)))))},ed=i(_r,Zf,Xf),rd=i(x,W,J("(\\\\+)([!\"#$%&\\'()*+,./:;<=>?@[\\\\\\]^_`{|}~-])")),tu=O(function(e,r,n){return e<=0?n:g(tu,e>>1,Q(r,r),e&1?Q(n,r):n)}),Gr=d(function(e,r){return g(tu,e,r,"")}),nd=i(_r,rd,function(e){var r=e.d7;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$){var n=r.a.a,t=r.b,a=t.a.a;return Q(i(Gr,z(n)/2|0,"\\"),a)}else return e.cu}),td=i(x,W,J("&#[Xx]([0-9a-fA-F]{1,8});")),ad=rc,au=function(e){return g(ad,C,_,e)},iu=lc,id=i(B,iu,i(B,au,i(Oe,d(function(e,r){return r*16+i(An,39,rn(e))-9}),0))),od=function(e){return i(x,e.cu,i(q,i(B,id,nu),i(x,y,ae(e.d7))))},sd=i(_r,td,od),Mt=function(e){return sd(Qf(ed(nd(e))))},ud=oc,ld=function(e){var r=e.d7;if(r.b&&r.b.b&&!r.b.a.$&&r.b.b.b){var n=r.a,t=r.b,a=t.a.a,o=t.b,s=o.a;return V(i(xt,!0,{bm:i(Dr,1,a),bn:z(a),A:i(x,0,i(q,z,n)),bw:i(q,Mt,i(fe,function(u){return u===""?y:V(u)},ae(i(x,_,i(q,ud,s)))))}))}else return y},cd=i(x,W,J("^( {0,3})(`{3,}(?!.*`)|~{3,}(?!.*~))(.*)$")),ou=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,function(t){return i(C,t,n)},i(q,function(t){return i(dr,t,"")},i(fe,ld,ae(g(xe,1,cd,r))))))},md=function(e){return{$:1,a:e}},su={$:0},pd=function(e){var r=e.d7;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$&&r.b.b.b&&!r.b.b.a.$&&r.b.b.b.b&&r.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a.a,o=t.b,s=o.a.a,u=o.b,c=u.a,f=u.b,p=f.a;return V(Ne({aK:s,A:z(n)+1,ag:!1,aU:i(x,su,i(q,md,Tt(a)))},i(x,"",c),i(x,"",p)))}else return y},fd=i(x,W,J("^( *(\\d{1,9})([.)])( {0,4}))(?:[ \\t](.*))?$")),dd=function(e){return i(Ke,e,i(fe,pd,ae(g(xe,1,fd,e))))},$d=function(e){var r=e.d7;if(r.b&&!r.a.$){var n=r.a.a;return i(qs,"=",n)?V(l(1,n)):V(l(2,n))}else return y},vd=O(function(e,r,n){var t=n.a;if(n.b,r.b&&r.a.$===4){var a=r.a,o=a.a,s=r.b;return V(i(C,g(vi,o,t,_),s))}else return y}),bd=i(x,W,J("^ {0,3}(=+|-+)[ \\t]*$")),uu=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(fe,i(vd,r,n),i(fe,$d,ae(g(xe,1,bd,r)))))},hd={$:1},gd=i(x,W,J("^ {0,3}(?:(?:\\*[ \\t]*){3,}|(?:_[ \\t]*){3,}|(?:-[ \\t]*){3,})[ \\t]*$")),lu=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,function(t){return i(C,hd,n)},ae(g(xe,1,gd,r))))},kd=function(e){var r=e.d7;if(r.b&&!r.a.$&&r.b.b&&!r.b.a.$&&r.b.b.b&&r.b.b.b.b&&!r.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a.a,o=t.b,s=o.a,u=o.b,c=u.a;return V(Ne({aK:a,A:z(n)+1,ag:!1,aU:su},i(x,"",s),i(x,"",c)))}else return y},wd=i(x,W,J("^( *([\\*\\-\\+])( {0,4}))(?:[ \\t](.*))?$")),_d=function(e){return i(Ke,e,i(fe,kd,ae(g(xe,1,wd,e))))},yd=i(x,W,J("^ {0,3}(`{3,}|~{3,})\\s*$")),xd=d(function(e,r){var n=r.d7;if(n.b&&!n.a.$){var t=n.a.a;return te(z(t),e.bn)>-1&&ne(i(Dr,1,t),e.bm)}else return!1}),jd=function(e){return i(B,i(xe,1,yd),i(B,ae,i(B,q(xd(e)),x(!1))))},Ed=O(function(e,r,n){return i(jd,e,n)?i(dr,i(xt,!1,e),r):i(dr,i(xt,!0,e),r+(i(Et,e.A,n)+`
`))}),me=d(function(e,r){if(r.$){var n=r.a;return e(n)}else return r}),Cd=i(x,W,J("^ +")),cu=i(B,i(_r,eu,function(e){return"    "}),i(B,i(xe,1,Cd),i(B,ae,i(B,q(i(B,function(e){return e.cu},z)),x(0))))),mu=function(e){e:for(;;)if(e.b){var r=e.a;e.b;r:for(;;)if(r.b)switch(r.a.$){case 0:return!!r.b.b;case 6:var n=r.a,t=n.b,a=t;e=a;continue e;default:break r}else break r;return!1}else return!1},Jr=d(function(e,r){if(r.$){var t=r.a;return ke(t)}else{var n=r.a;return pe(e(n))}}),wa=d(function(e,r){if(r.$){var t=r.a;return ke(e(t))}else{var n=r.a;return pe(n)}}),pu=d(function(e,r){return i(x,i(C,i(Ut,Ws(e),_),r),i(jt,e,r))}),fu=d(function(e,r){if(r.$)return e;var n=r.a;return n}),du=function(e){var r=e.a,n=e.b;return i(Ke,l(r,n),i(q,Md(n),i(q,i(B,function(t){return t.d7},i(B,ae,i(B,x(y),x("")))),ae(g(xe,1,Nf,r)))))},$u=function(e){var r=e.a,n=e.b;return i(wa,function(t){return l(t,n)},i(Jr,i(Ad,r,n),i(Jr,Rf,i(me,_d,dd(r)))))},Qr=d(function(e,r){e:for(;;)if(r.b)switch(r.a.$){case 3:if(r.a.a.$===1&&r.a.a.a){var n=r.a,t=n.a,a=t.b,o=n.b,f=r.b;return function(m){return i(C,m,f)}(g(Ed,a,o,e))}else break e;case 6:var s=r.a,u=s.a,c=s.b,f=r.b;return te(cu(e),u.A)>-1?le(Od,e,u,c,r,f):i(fu,i(pu,e,r),i(me,du,i(me,Qs,i(me,uu,i(me,ou,i(me,ru,i(me,Xs,i(me,$u,lu(l(e,r))))))))));default:break e}else break e;return i(vu,e,r)}),Md=d(function(e,r){if(e.b&&e.a.$===5){var n=e.a.a,t=e.b;return function(a){return i(C,a,t)}(Mn(i(Qr,r,n)))}else return function(a){return i(C,a,e)}(Mn(i(Qr,r,_)))}),Od=er(function(e,r,n,t,a){if(n.b){var o=n.a,s=n.b,u=i(Et,r.A,e),c=function($){return function(k){return i(C,k,a)}(i(vr,$,function(k){return i(C,k,s)}(i(Qr,u,o))))};e:for(;;)if(o.b)switch(o.a.$){case 0:if(o.b.b){var v=o.b;return i(If,function(k){return!k.$},v)?i(vu,e,t):c(I(r,{ag:!0}))}else return c(r);case 6:var f=o.a,p=f.a,m=f.b,v=o.b;return te(cu(u),p.A)>-1?c(r):mu(m)?c(I(r,{ag:!0})):c(r);default:break e}else break e;return c(r)}else return function($){return i(C,$,a)}(i(vr,r,function($){return i(C,$,_)}(function($){return i(Qr,$,_)}(i(Et,r.A,e)))))}),Ad=O(function(e,r,n){var t=n.a,a=n.b,o=i(Qr,a,_),s=i(C,i(vr,t,b([o])),r);e:for(;;)if(r.b)switch(r.a.$){case 6:var u=r.a,c=u.a,f=u.b,v=r.b;return ne(t.aK,c.aK)?function(k){return i(C,k,v)}(i(vr,I(c,{A:t.A,ag:c.ag||mu(f)}),i(C,o,f))):s;case 4:var p=r.a,m=p.a;p.b;var v=r.b;if(o.b&&!o.a.$&&!o.b.b)return i(C,i(ga,m,e),v);var $=t.aU;return $.$===1?$.a===1?s:($.a,i(C,i(ga,m,e),v)):s;default:break e}else break e;return s}),vu=d(function(e,r){return i(fu,i(pu,e,r),i(me,$u,i(me,lu,i(me,du,i(me,Qs,i(me,uu,i(me,ou,i(me,ru,Xs(l(e,r))))))))))}),bu=d(function(e,r){if(e.b){var n=e.a,t=e.b;return i(bu,t,i(Qr,n,r))}else return r}),Pd=sc,hu=d(function(e,r){return{$:8,a:e,b:r}}),Yi=function(e){return{$:7,a:e}},Vd=function(e){return{$:1,a:e}},Sd=b(["name","class"]),Id=b(["address","article","aside","b","blockquote","br","caption","center","cite","code","col","colgroup","dd","details","div","dl","dt","figcaption","figure","footer","h1","h2","h3","h4","h5","h6","hr","i","legend","li","menu","menuitem","nav","ol","optgroup","option","p","pre","section","strike","summary","small","table","tbody","td","tfoot","th","thead","tr","ul"]),qd={b1:Sd,b2:Id},Nd={cM:Vd(qd),cU:!1},Rd=O(function(e,r,n){return{d:_,aB:e,I:n,bK:r,i:_}}),Td=function(e){return{$:2,a:e}},gu=d(function(e,r){return{$:6,a:e,b:r}}),Dd={$:1},Bd=O(function(e,r,n){return{$:5,a:e,b:r,c:n}}),Ld=O(function(e,r,n){return{$:4,a:e,b:r,c:n}}),Xi=O(function(e,r,n){return{$:3,a:e,b:r,c:n}}),eo=function(e){return{$:0,a:e}},Fd=function(e){var r=e,n=r.aU;switch(n.$){case 0:return eo(r.z);case 1:return Dd;case 2:return Td(r.z);case 3:var t=n.a,a=t.a,u=t.b;return g(Xi,u,y,b([eo(a)]));case 4:var o=n.a,u=o.a,c=o.b;return g(Xi,u,c,vn(r.d));case 5:var s=n.a,u=s.a,c=s.b;return g(Ld,u,c,vn(r.d));case 6:var f=n.a;return g(Bd,f.aR,f.b3,vn(r.d));default:var p=n.a;return i(gu,p,vn(r.d))}},vn=function(e){return i(Y,Fd,e)},ku=d(function(e,r){return I(r,{ca:r.ca-e.aa,bV:r.bV-e.aa,aE:r.aE-e.aa,aa:r.aa-e.aa})}),Ud=d(function(e,r){return I(e,{d:i(C,i(ku,e,r),e.d)})}),Hd=d(function(e,r){var n=e;if(r.b){var t=r.a,a=r.b;return te(t.ca,n.bV)<1?i(C,n,r):te(t.bV,n.bV)<0&&te(t.ca,n.ca)>0?i(C,i(Ud,t,n),a):r}else return b([n])});function hi(){return i(B,Bt(function(e){var r=e;return r.bV}),i(B,i(Oe,Hd,_),Y(function(e){var r=e;return I(r,{d:hi()(r.d)})})))}var wu=hi();hi=function(){return wu};var zd=function(e){return I(e,{d:wu(e.d)})},_u={$:0},Ot=function(e){return{ca:0,d:_,bV:0,z:Mt(e),aE:0,aa:0,aU:_u}},Jd=O(function(e,r,n){var t=r,a=I(t,{d:g(yu,t.z,_,t.d)});if(n.b){var s=n.a;return n.b,ne(s.aU,_u)||ne(t.ca,s.bV)?i(C,a,n):te(t.ca,s.bV)<0?i(C,a,i(C,Ot(g(ze,t.ca,s.bV,e)),n)):n}else{var o=i(kr,t.ca,e);return wr(o)?b([a]):b([a,Ot(o)])}}),yu=O(function(e,r,n){e:for(;;)if(n.b){var a=n.a,o=n.b,s=e,u=g(Jd,e,a,r),c=o;e=s,r=u,n=c;continue e}else if(r.b){var t=r.a;return t.bV>0?i(C,Ot(i(Dr,t.bV,e)),r):r}else return wr(e)?_:b([Ot(e)])}),Wd=function(e){return I(e,{d:g(yu,e.I,_,e.d)})},Kd=i(x,W,J("(\\\\*)(\\<)")),Gd=O(function(e,r,n){var t=e(r);if(t.$)return n;var a=t.a;return i(C,a,n)}),Re=d(function(e,r){return g(Br,Gd(e),_,r)}),Xe=$s(bs),At=function(e){return{$:3,a:e}},yr=function(e){return!i(An,2,e)},Qd=function(e){var r=e.d7;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b;t.a.a;var a=i(x,0,i(q,z,n));return yr(a)?V({cm:e.cm+a,e:1,g:At("<")}):y}else return y},Zd=function(e){return i(Re,Qd,i(Xe,Kd,e))},Yd=i(x,W,J("(\\\\*)(\\>)")),Xd=function(e){return{$:4,a:e}},e$=function(e){var r=e.d7;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a;r.b;var t=i(x,0,i(q,z,n));return V({cm:e.cm+t,e:1,g:Xd(!yr(t))})}else return y},r$=function(e){return i(Re,e$,i(Xe,Yd,e))},n$=i(x,W,J("(\\\\*)([^*])?(\\*+)([^*])?")),t$=d(function(e,r){return{$:6,a:e,b:r}}),a$=i(x,W,J("[!-#%-\\*,-/:;\\?@\\[-\\]_\\{\\}]")),i$=an(a$),o$=i(x,W,J("\\s")),s$=an(o$),u$=function(e){var r=Kr(e);return s$(r)?0:i$(r)?1:2},l$=function(e){return i(x,0,i(q,u$,e))},ro=i(B,q(i(B,nn,i(B,q(Ss),l$))),x(0)),c$=Dl,xu=O(function(e,r,n){var t=n.d7;if(t.b&&t.b.b&&t.b.b.b&&!t.b.b.a.$&&t.b.b.b.b){var a=t.a,o=t.b,s=o.a,u=o.b,c=u.a.a,f=u.b,p=f.a,m=i(x,0,i(q,z,s)),v=n.cm&&!m?V(g(ze,n.cm-1,n.cm,r)):s,$=i(x,0,i(q,z,a)),k=!yr($)&&!m||ne(v,V("\\")),w=k?z(c)-1:z(c),j=l(k?1:ro(v),ro(p)),M=n.cm+$+m+(k?1:0);return w<=0||e==="_"&&ne(j,l(2,2))?y:V({cm:M,e:w,g:i(t$,e,j)})}else return y}),m$=function(e){return i(Re,i(xu,"*",e),i(Xe,n$,e))},p$=i(x,W,J("(\\\\*)(\\`+)")),ju=function(e){return{$:0,a:e}},f$=function(e){var r=e.d7;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b,a=t.a.a,o=i(x,0,i(q,z,n));return V({cm:e.cm+o,e:z(a),g:ju(!yr(o))})}else return y},d$=function(e){return i(Re,f$,i(Xe,p$,e))},$$=i(x,W,J("(?:(\\\\+)|( {2,}))\\n")),Wr={$:8},v$=function(e){var r=e.d7;e:for(;;)if(r.b)if(r.a.$){if(r.b.b&&!r.b.a.$)return r.b,V({cm:e.cm,e:z(e.cu),g:Wr});break e}else{var n=r.a.a,t=z(n);return yr(t)?y:V({cm:e.cm+t-1,e:2,g:Wr})}else break e;return y},b$=function(e){var r=e.d7;e:for(;;)if(r.b)if(r.a.$)if(r.b.b){var a=r.b;return a.a,V({cm:e.cm,e:z(e.cu),g:Wr})}else break e;else{var n=r.a.a,t=z(n);return yr(t)?V({cm:e.cm+t,e:1,g:Wr}):V({cm:e.cm+t-1,e:2,g:Wr})}else break e;return y},h$=i(x,W,J("(?:(\\\\+)|( *))\\n")),g$=d(function(e,r){return e?i(Re,b$,i(Xe,h$,r)):i(Re,v$,i(Xe,$$,r))}),k$=i(x,W,J("(\\\\*)(\\])")),w$=function(e){var r=e.d7;if(r.b&&r.b.b&&!r.b.a.$){var n=r.a,t=r.b;t.a.a;var a=i(x,0,i(q,z,n));return yr(a)?V({cm:e.cm+a,e:1,g:At("]")}):y}else return y},_$=function(e){return i(Re,w$,i(Xe,k$,e))},y$=i(x,W,J("(\\\\*)(\\!)?(\\[)")),no={$:2},_a=function(e){return{$:1,a:e}},x$=function(e){var r=e.d7;if(r.b&&r.b.b&&r.b.b.b&&!r.b.b.a.$){var n=r.a,t=r.b,a=t.a,o=t.b;o.a.a;var s=i(x,0,i(q,z,n)),u=!yr(s),c=e.cm+s+(u&&ne(a,V("!"))?1:0),f=u?i(q,function(v){return _a(!0)},a):V(i(x,_a(!0),i(q,function(v){return no},a))),p=ne(f,V(no))?2:1,m=function(v){return{cm:c,e:p,g:v}};return i(q,m,f)}else return y},j$=function(e){return i(Re,x$,i(Xe,y$,e))},E$=i(x,W,J("(\\\\*)([^_])?(\\_+)([^_])?")),C$=function(e){return i(Re,i(xu,"_",e),i(Xe,E$,e))},M$=function(e){return I(e,{i:i(Bt,function(r){return r.cm},Q(r$(e.I),Q(Zd(e.I),Q(i(g$,e.aB.cU,e.I),Q(_$(e.I),Q(j$(e.I),Q(C$(e.I),Q(m$(e.I),d$(e.I)))))))))})},Eu={$:2},O$=function(e){return{$:7,a:e}},ya=function(e){return{$:6,a:e}},gi=function(e){return{$:5,a:e}},ki=function(e){return{$:4,a:e}},Pt=d(function(e,r){return I(e,{d:i(C,r,e.d)})}),ir=d(function(e,r){return I(e,{i:i(C,r,e.i)})}),to=d(function(e,r){if(r.$){var t=r.a;return ke(t)}else{var n=r.a;return e(n)}}),cn=d(function(e,r){return e(l(r.i,I(r,{i:_})))}),Cu=function(e){return{$:3,a:e}},A$=i(x,W,J("%(?:3B|2C|2F|3F|3A|40|26|3D|2B|24|23|25)")),P$=Hm,V$=Um,wi=i(B,V$,i(_r,A$,function(e){return i(x,e.cu,P$(e.cu))})),S$=i(x,W,J("^([A-Za-z][A-Za-z0-9.+\\-]{1,31}:[^<>\\x00-\\x20]*)$")),I$=function(e){var r=e;return i(an,S$,r.z)?pe(I(r,{aU:Cu(l(r.z,wi(r.z)))})):ke(r)},yn=" \\t\\f\\v\\r\\n",q$="(?:<([^<>"+(yn+("]*)>|([^"+(yn+("\\(\\)\\\\]*(?:\\\\.[^"+(yn+"\\(\\)\\\\]*)*))"))))),Mu="(?:["+(yn+`]+(?:'([^'\\\\]*(?:\\\\.[^'\\\\]*)*)'|"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"|\\(([^\\)\\\\]*(?:\\\\.[^\\)\\\\]*)*)\\)))?`),N$=i(x,W,J("^\\(\\s*"+(q$+(Mu+"\\s*\\)")))),Ou=function(e){var r=e.a,n=e.b;return l(wi(Mt(r)),i(q,Mt,n))},Pn=function(e){var r=d(function(n,t){if(t.$)return n;var a=t.a;return V(a)});return g(Oe,r,y,e)},R$=O(function(e,r,n){var t=n.d7;if(t.b&&t.b.b&&t.b.b.b&&t.b.b.b.b&&t.b.b.b.b.b){var a=t.a,o=t.b,s=o.a,u=o.b,c=u.a,f=u.b,p=f.a,m=f.b,v=m.a,$=Pn(b([c,p,v])),k=function(j){return I(e,{ca:e.ca+z(n.cu),aU:function(){var M=e.aU;return M.$===5?gi:ki}()(Ou(l(j,$)))})},w=Pn(b([a,s]));return V(k(i(x,"",w)))}else return y}),ao=function(e){var r=e.a,n=e.b,t=e.c;return i(Ke,Ne(r,n,t),i(q,Pt(t),i(fe,i(R$,n,t),ae(g(xe,1,N$,r)))))},Au="[^\\[\\]\\\\]*(?:\\\\.[^\\[\\]\\\\]*)*",T$=i(x,W,J("^\\[\\s*("+(Au+")\\s*\\]"))),D$=i(x,W,J("["+(yn+"]+"))),Pu=i(B,yt,i(_r,D$,function(e){return" "})),Vu=i(B,Pu,iu),B$=O(function(e,r,n){var t=i(x,0,i(q,i(B,function(u){return u.cu},z),n)),a=function(u){return I(e,{ca:e.ca+t,aU:function(){var c=e.aU;return c.$===5?gi:ki}()(Ou(u))})},o=function(u){return wr(u)?e.z:u}(i(x,e.z,i(x,y,i(x,y,i(q,i(B,function(u){return u.d7},ae),n))))),s=i(Ce,Vu(o),r.bK);return i(q,a,s)}),io=function(e){var r=e.a,n=e.b,t=e.c;return i(Ke,Ne(r,n,t),i(q,Pt(t),g(B$,n,t,ae(g(xe,1,T$,r)))))},Ht=d(function(e,r){return g(Br,d(function(n,t){return e(n)?i(C,n,t):t}),_,r)}),oo=function(e){return!e.b},so=function(e){var r=e.d;if(r.b){var n=r.a,t=r.b,a=i(Ht,function(o){var s=o;return te(n.ca,s.bV)>0&&te(n.ca,s.ca)<0},t);return oo(t)||oo(a)?pe(e):ke(0)}else return ke(0)},L$=i(x,W,J("^([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?)*)$")),F$=function(e){var r=e;return i(an,L$,r.z)?pe(I(r,{aU:Cu(l(r.z,"mailto:"+wi(r.z)))})):ke(r)},U$=d(function(e,r){return I(r,{i:i(Ht,e,r.i)})}),Zr=d(function(e,r){var n=d(function(a,o){var s=o.a,u=o.b,c=o.c;return s.$===1?e(a)?Ne(V(a),u,_):Ne(y,i(C,a,u),_):Ne(s,u,i(C,a,c))}),t=function(a){var o=a.a,s=a.b,u=a.c;return i(q,function(c){return Ne(c,we(s),we(u))},o)};return t(g(Oe,n,Ne(y,_,_),r))}),H$=d(function(e,r){return{b3:r,aR:e}}),z$=d(function(e,r){return{$:5,a:e,b:r}}),J$=function(e){var r=e.d7;e:for(;;)if(r.b&&!r.a.$){if(r.a.a==="")return y;if(r.b.b&&r.b.b.b&&r.b.b.b.b){var n=r.a.a,t=r.b,a=t.a,o=t.b,s=o.a,u=o.b,c=u.a,f=Pn(b([a,s,c]));return V(l(n,f))}else break e}else break e;return y},W$=i(x,W,J(`([a-zA-Z:_][a-zA-Z0-9\\-_.:]*)(?: ?= ?(?:"([^"]*)"|'([^']*)'|([^\\s"'=<>\`]*)))?`)),K$=i(B,Xe(W$),Re(J$)),xa=d(function(e,r){return i(di,function(n){return ne(n,e)},r)}),G$=O(function(e,r,n){var t=n.d7;if(t.b&&t.b.b&&!t.b.a.$&&t.b.b.b&&t.b.b.b.b){var a=t.a,o=t.b,s=o.a.a,u=o.b,c=u.a,f=u.b,p=f.a,m=function(A){return i(ir,e,{cm:r.bV,e:r.ca-r.bV,g:i(z$,ne(a,y)&&ne(p,y),i(H$,s,A))})},v=d(function(A,F){return i(Ht,function(re){return i(xa,re.a,F)},A)}),$=i(x,_,i(q,K$,c)),k=ne(a,y)||!ne(a,y)&&ne($,_),w=e.aB.cM;switch(w.$){case 0:return k?V(m($)):y;case 1:var j=w.a.b2,M=w.a.b1;return i(xa,s,j)&&k?V(m(i(v,$,M))):y;default:return y}}else return y}),Q$=i(x,W,J("^(\\/)?([a-zA-Z][a-zA-Z0-9\\-]*)(?:\\s+([^<>]*?))?(\\/)?$")),Z$=d(function(e,r){var n=r,t=e.aB.cM;return t.$===2?y:i(fe,i(G$,e,n),ae(g(xe,1,Q$,n.z)))}),Y$=d(function(e,r){var n=r.g;if(n.$===5&&!n.a){var t=n.b;return ne(e.aR,t.aR)}else return!1}),X$=d(function(e,r){var n=r.g;if(n.$)return!1;var t=n.a;return ne(t?r.e-1:r.e,e.e)}),ev=function(e){var r=e.g;switch(r.$){case 1:return!0;case 2:return!0;default:return!1}},uo=d(function(e,r){var n=r.g;if(n.$===6){var t=n.a,a=n.b,o=a.a,s=a.b,u=e.g;if(u.$===6){var c=u.a,f=u.b,p=f.a,m=f.b;return ne(t,c)?ne(o,s)||ne(p,m)?!!i(An,3,e.e+r.e):!0:!1}else return!1}else return!1}),rv=b(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),nv=function(e){return i(xa,e.aR,rv)},tv={$:1},av={$:7},Ln=function(e){return I(e,{i:we(e.i)})},ja=d(function(e,r){return{ca:e.cm+e.e,d:_,bV:e.cm,z:"",aE:0,aa:0,aU:r}}),Su=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b;if(ne(t.g,Wr)||ne(t.g,av)&&n.aB.cU)return Su(function(s){return l(a,s)}(I(n,{d:i(C,i(ja,t,tv),n.d)})));var o=l(a,i(ir,n,t));e=o;continue e}else return Ln(n)}},lo=d(function(e,r){var n=r.d;if(n.b){var t=n.a;return l(i(Ht,function(a){return te(a.cm,t.ca)>-1},e),r)}else return l(e,r)}),Vt=function(e){if(e.$)return y;var r=e.a;return V(r)},iv=ve(function(e,r,n,t){var a=t.a,o=t.c;return function(s){if(s.$===1){var u=s.a;return r?Vt(s):i(Z$,I(n,{i:o}),u)}else return Vt(s)}(i(Jr,function(s){return I(n,{d:i(C,s,n.d),i:o})},i(me,F$,I$($r(Fn,n,function(s){return s},Eu,a,e,_)))))}),Ea=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;switch(o.$){case 0:var s=o.a;return Ea(function(c){return l(a,c)}(i(x,i(ir,n,t),i(q,i(ov,t,n),i(Zr,X$(t),n.i)))));case 4:var s=o.a;return Ea(function(c){return l(a,c)}(i(U$,i(B,function(c){return c.g},c$(At("<"))),i(x,n,i(fe,g(iv,t,s,n),i(Zr,i(B,function(c){return c.g},ip(At("<"))),n.i))))));default:var u=l(a,i(ir,n,t));e=u;continue e}}else return Ln(n)}},ov=O(function(e,r,n){var t=n.a,a=n.c,o=ne(t.g,ju(!0))?I(t,{cm:t.cm+1,e:t.e-1}):t;return I(r,{d:i(C,$r(Fn,r,Pu,Eu,o,e,_),r.d),i:a})}),Ca=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===6){var s=o.a,u=o.b,c=u.a,f=u.b;if(ne(c,f)){if(f&&(s!=="_"||f===1))return Ca(i(x,l(a,i(ir,n,t)),i(q,g(co,t,a,n),i(Zr,uo(t),n.i))));var p=l(a,n);e=p;continue e}else if(te(c,f)<0){var p=l(a,i(ir,n,t));e=p;continue e}else return Ca(i(x,l(a,n),i(q,g(co,t,a,n),i(Zr,uo(t),n.i))))}else{var p=l(a,i(ir,n,t));e=p;continue e}}else return Ln(n)}},co=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c,u=a.e-e.e,c=u?u>0?{a$:e,aO:I(a,{cm:a.cm+u,e:e.e}),ba:i(C,I(a,{e:u}),s),bf:r}:{a$:I(e,{e:a.e}),aO:a,ba:s,bf:i(C,I(e,{cm:e.cm+a.e,e:-u}),r)}:{a$:e,aO:a,ba:s,bf:r},f=$r(Fn,n,function(p){return p},O$(c.aO.e),c.aO,c.a$,we(o));return l(c.bf,I(n,{d:i(C,f,n.d),i:c.ba}))}),Ma=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===5){var s=o.a,u=o.b;return nv(u)||!s?Ma(function(f){return l(a,f)}(i(Pt,n,i(ja,t,ya(u))))):Ma(i(x,function(f){return l(a,f)}(i(Pt,n,i(ja,t,ya(u)))),i(q,g(sv,t,n,u),i(Zr,Y$(u),a))))}else{var c=l(a,i(ir,n,t));e=c;continue e}}else return Ln(n)}},sv=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c;return l(s,I(r,{d:i(C,$r(Fn,r,function(u){return u},ya(n),e,a,o),r.d)}))}),Iu=function(e){e:for(;;){var r=e.a,n=e.b;if(r.b){var t=r.a,a=r.b,o=t.g;if(o.$===3&&o.a==="]")return Iu(i(x,l(a,n),i(fe,g(uv,t,a,n),i(Zr,ev,n.i))));var s=l(a,i(ir,n,t));e=s;continue e}else return Ln(n)}},uv=ve(function(e,r,n,t){var a=t.a,o=t.b,s=t.c,u=function($){return $r(Fn,n,function(k){return k},$?ki(l("",y)):gi(l("",y)),a,e,we(o))},c=l(r,I(n,{i:Q(o,s)})),f=i(kr,e.cm+1,n.I),p=function($){var k=function(w){var j=w.g;return j.$===1?I(w,{g:_a(!1)}):w};return I($,{i:i(Y,k,$.i)})},m=function($){return Ne(f,u($),I(n,{i:s}))},v=a.g;switch(v.$){case 2:return Vt(i(me,function($){return pe(c)},i(Jr,lo(r),i(to,so,i(wa,function($){return 0},i(me,io,ao(m(!1))))))));case 1:return v.a?Vt(i(me,function($){return pe(c)},i(Jr,lo(r),i(Jr,p,i(to,so,i(wa,function($){return 0},i(me,io,ao(m(!0))))))))):V(c);default:return y}}),Fn=Nn(function(e,r,n,t,a,o){var s=t.cm+t.e,u=a.cm,c=t.cm,f=a.cm+a.e,p={ca:f,d:_,bV:c,z:r(g(ze,s,u,e.I)),aE:u,aa:s,aU:n},m=i(Y,function(v){var $=v;return i(ku,p,$)},_i()(I(e,{d:_,i:o})).d);return I(p,{d:m})});function _i(){return i(B,cn(Ea),i(B,cn(Ma),i(B,cn(Iu),i(B,cn(Ca),cn(Su)))))}var qu=_i();_i=function(){return qu};var mo=O(function(e,r,n){return vn(Wd(zd(qu(M$(g(Rd,e,r,yt(n)))))).d)}),lv=ve(function(e,r,n,t){var a=i(x,Nd,e);switch(t.$){case 2:var s=t.a,o=t.b;return g(vi,s,o,g(mo,a,n,s));case 4:var s=t.a,u=g(mo,a,n,s);return u.b&&u.a.$===5&&!u.b.b?(u.a,Yi(u)):r?i(Ut,s,u):Yi(u);case 5:var m=t.a;return Mn(g(ct,e,!0,l(n,m)));case 6:var c=t.a,f=t.b;return i(vr,c,function(v){return i(Y,v,f)}(i(Ks,i(ct,e,c.ag),function(v){return l(n,v)})));case 8:var p=t.a,m=t.b;return i(hu,p,g(ct,e,!0,l(n,m)));default:return t}}),ct=O(function(e,r,n){var t=n.a,a=n.b;return i(Y,g(lv,e,r,t),a)}),mn=d(function(e,r){var n=r.a,t=r.b;return l(n,e(t))}),cv=d(function(e,r){var n=i(kr,r.bx,e);return i(an,$i,n)?y:V(n)}),mv=d(function(e,r){var n=i(Ce,e,r);return!n.$}),pv=d(function(e,r){return i(mv,r.aq,e)?e:g(Bn,r.aq,l(r.bh,r.by),e)}),fv=function(e){var r=e.d7;if(r.b&&!r.a.$&&r.b.b&&r.b.b.b&&r.b.b.b.b&&r.b.b.b.b.b&&r.b.b.b.b.b.b){var n=r.a.a,t=r.b,a=t.a,o=t.b,s=o.a,u=o.b,c=u.a,f=u.b,p=f.a,m=f.b,v=m.a,$=function(w){return{aq:n,bx:z(e.cu),by:Pn(b([c,p,v])),bh:w}},k=Pn(b([a,s]));return i(q,$,k)}else return y},dv="\\s*(?:<([^<>\\s]*)>|([^\\s]*))",$v=i(x,W,J("^\\s*\\[("+(Au+(")\\]:"+(dv+(Mu+"\\s*(?![^\\n])")))))),vv=function(e){return i(fe,function(r){return r.bh===""||r.aq===""?y:V(r)},i(q,function(r){return I(r,{aq:Vu(r.aq)})},i(fe,fv,ae(g(xe,1,$v,e)))))},bv=d(function(e,r){e:for(;;){var n=vv(r);if(n.$)return l(e,V(r));var t=n.a,a=i(pv,e,t),o=i(cv,r,t);if(o.$)return l(a,y);var s=o.a,u=a,c=s;e=u,r=c;continue e}}),hv=d(function(e,r){return g(pi,Bn,r,e)}),mt=function(e){return i(Oe,gv,l(e,_))},gv=d(function(e,r){var n=r.a,t=r.b;switch(e.$){case 4:var a=e.a,o=i(bv,Qe,a),s=o.a,u=o.b,v=i(hv,s,n);if(u.$)return l(v,t);var c=u.a;return l(v,i(C,i(Ut,c,_),t));case 6:var f=e.a,p=e.b,m=g(Oe,d(function(j,M){var A=M.a,F=M.b;return i(mn,function(re){return i(C,re,F)},i(mt,A,j))}),l(n,_),p),v=m.a,$=m.b;return l(v,i(C,i(vr,f,$),t));case 5:var w=e.a;return i(mn,function(j){return i(C,j,t)},i(mn,Mn,i(mt,n,w)));case 8:var k=e.a,w=e.b;return i(mn,function(j){return i(C,j,t)},i(mn,hu(k),i(mt,n,w)));default:return l(n,i(C,e,t))}}),kv=function(e){return i(B,Pd,i(B,function(r){return i(bu,r,_)},i(B,mt(Qe),i(ct,e,!0))))},wv=ee("blockquote"),Oa=ee("code"),_v=ee("h1"),yv=ee("h2"),xv=ee("h3"),jv=ee("h4"),Ev=ee("h5"),Cv=ee("h6"),Mv=ee("hr"),po=ee("ol"),Ov=ee("p"),fo=ee("pre"),Av=function(e){return i(De,"start",En(e))},$o=De("alt"),Pv=d(function(e,r){return i(sr,fm(e),os(r))}),Vv=Pv,Sv=function(e){var r=e.a,n=e.b;return i(Vv,r,i(x,r,n))},Iv=Y(Sv),qv=ee("br"),vo=ee("em"),Ar=function(e){return g(Oe,Nv,"",e)},Nv=d(function(e,r){switch(e.$){case 0:var n=e.a;return Q(r,n);case 1:return r+" ";case 2:var n=e.a;return Q(r,n);case 3:var t=e.c;return Q(r,Ar(t));case 4:var t=e.c;return Q(r,Ar(t));case 5:var t=e.c;return Q(r,Ar(t));case 6:var t=e.b;return Q(r,Ar(t));default:var t=e.b;return Q(r,Ar(t))}}),St=function(e){return i(De,"href",dm(e))},bo=ee("img"),Rv=function(e){return ee(pm(e))},Tv=Rv,ho=function(e){return i(De,"src",os(e))},go=ee("strong"),ko=De("title"),Nu=d(function(e,r){var n=i(x,Nu(y),e);switch(r.$){case 0:var t=r.a;return G(t);case 1:return i(qv,_,_);case 2:var a=r.a;return i(Oa,_,b([G(a)]));case 3:var s=r.a,u=r.b,m=r.c;if(u.$)return i(Cn,b([St(s)]),i(Y,n,m));var o=u.a;return i(Cn,b([St(s),ko(o)]),i(Y,n,m));case 4:var s=r.a,u=r.b,m=r.c;if(u.$)return i(bo,b([$o(Ar(m)),ho(s)]),_);var o=u.a;return i(bo,b([$o(Ar(m)),ho(s),ko(o)]),_);case 5:var c=r.a,f=r.b,m=r.c;return g(Tv,c,Iv(f),i(Y,n,m));case 6:var p=r.a,m=r.b;switch(p){case 1:return i(vo,_,i(Y,n,m));case 2:return i(go,_,i(Y,n,m));default:return p-2>0?i(go,_,function(v){return i(C,v,_)}(n(i(gu,p-2,m)))):i(vo,_,i(Y,n,m))}default:var m=r.b;return G("")}}),Dv=Nu(y),Ru=O(function(e,r,n){var t=i(x,Dv,r),a=i(x,i(Ru,y,r),e);switch(n.$){case 0:return _;case 2:var o=n.b,k=n.c,s=function(){switch(o){case 1:return _v(_);case 2:return yv(_);case 3:return xv(_);case 4:return jv(_);case 5:return Ev(_);default:return Cv(_)}}();return b([s(i(Y,t,k))]);case 1:return b([i(Mv,_,_)]);case 4:var k=n.b;return b([i(Ov,_,i(Y,t,k))]);case 3:if(n.a.$===1){var u=n.a,v=u.b,c=n.b,f=function(M){return b([i(fo,_,b([i(Oa,M,b([G(c)]))]))])},p=v.bw;if(p.$)return f(_);var m=p.a;return f(b([P("language-"+m)]))}else{n.a;var c=n.b;return b([i(fo,_,b([i(Oa,_,b([G(c)]))]))])}case 5:var w=n.a;return function(j){return i(C,j,_)}(i(wv,_,ut(i(Y,a,w))));case 6:var v=n.a,$=n.b;return function(j){return i(C,j,_)}(function(){var j=v.aU;if(j.$===1){var M=j.a;return po(M===1?_:b([Av(M)]))}else return zs(_)}()(i(Y,i(B,Y(a),i(B,ut,Fs(_))),$)));case 7:var k=n.a;return i(Y,t,k);default:n.a;var w=n.b;return function(j){return i(C,j,_)}(i(H,_,i(C,G("Unhandled custom block."),ut(i(Y,a,w)))))}}),Bv=i(Ru,y,y),Lv=d(function(e,r){return ut(i(Y,Bv,i(kv,e,r)))}),Fv=d(function(e,r){var n=i(fe,function(a){return a.ds},i(Ce,r,e.R));if(n.$===1)return G("");var t=n.a;return i(H,b([P("px-6 py-3 mb-4 border-b bg-orange-50")]),b([i(H,b([P("prose max-w-full")]),i(Lv,y,t))]))}),Aa=ee("label"),Nr=ee("span"),Vn=function(e){return{$:0,a:e}},Uv={$:10},Hv=Wa,zt=d(function(e,r){return i(is,e,Hv(r))}),Le=zt("disabled"),zv=function(e){return{$:1,a:e}},Jv=er(function(e,r,n,t,a){return{dp:n,cp:r,cA:e,a9:t,bd:a}}),Wv=function(e){return b([e])},Kv=function(e){var r=i(ws,function(n){return n==="0"},bi(i(Js,e.cp,Wv(e.dp))));return r?1:e.cA<0?2:0},Pa=Xl,Sn=function(e){return e<0?-e:e},Gv=d(function(e,r){var n=z(r),t=te(n,e)<0?Sn(e-n):0;return Q(r,i(Gr,t,"0"))}),It=d(function(e,r){return e<1?r:g(ze,0,-e,r)}),Tu=function(e){return i(On,1,e)!=="0"?e:Tu(i(It,1,e))},Qv=d(function(e,r){var n=e.dp;switch(n.$){case 1:return Tu(r);case 2:return r;default:var t=n.a;return i(Gv,t,r)}}),In=Zo,Zv=d(function(e,r){var n=i(di,function(t){return t!=="0"&&t!=="."},au(r));return Q(e&&n?"-":"",r)}),Du=function(e){var r=e.a,n=e.b;if(r==="9"){var t=nn(n);if(t.$===1)return"01";var a=t.a;return i(ka,"0",Du(a))}else{var o=rn(r);return o>=48&&o<57?i(ka,Ct(o+1),n):"0"}},Yv=zl,Xv=Kl,Va=O(function(e,r,n){return Q(n,i(Gr,e-z(n),Kr(r)))}),wo=ec,Bu=function(e){var r=i(Tn,".",e);if(r.b)if(r.b.b){var n=r.a,t=r.b,a=t.a;return l(n,a)}else{var n=r.a;return l(n,"0")}else return l("0","0")},eb=d(function(e,r){var n=r.a,t=r.b;return l(e(n),t)}),rb=function(e){var r=i(Tn,"e",In(Sn(e)));if(r.b)if(r.b.b){var n=r.a,t=r.b,a=t.a,o=i(x,0,Tt(i(qs,"+",a)?i(kr,1,a):a)),s=Bu(n),u=s.a,c=s.b,f=Q(u,c),p=o<0?i(x,"0",i(q,function(m){var v=m.a,$=m.b;return v+("."+$)},i(q,eb(Kr),nn(Q(i(Gr,Sn(o),"0"),f))))):g(Va,o+1,"0",f);return Q(e<0?"-":"",p)}else{var n=r.a;return Q(e<0?"-":"",n)}else return""},nb=O(function(e,r,n){if(Yv(n)||Xv(n))return In(n);var t=n<0,a=Bu(rb(Sn(n))),o=a.a,s=a.b,u=z(o)+r,c=Q(i(Gr,-u+1,"0"),g(Va,u,"0",Q(o,s))),f=z(c),p=i(Ps,1,u),m=i(e,t,g(ze,p,f,c)),v=g(ze,0,p,c),$=m?wo(i(x,"1",i(q,Du,nn(wo(v))))):v,k=z($),w=$==="0"?$:r<=0?Q($,i(Gr,Sn(r),"0")):te(r,z(s))<0?g(ze,0,k-r,$)+("."+g(ze,k-r,k,$)):Q(o+".",g(Va,r,"0",s));return i(Zv,t,w)}),_o=nb(d(function(e,r){var n=nn(r);if(n.$===1)return!1;if(n.a.a==="5")return n.a.b===""?(n.a,!e):(n.a,!0);var t=n.a,a=t.a;return function(o){return o>53&&e||o>=53&&!e}(rn(a))})),tb=function(e){if(e.b){e.a;var r=e.b;return V(r)}else return y},ab=d(function(e,r){var n=function(){var s=e.dp;switch(s.$){case 1:var u=s.a;return _o(u);case 0:return In;default:var c=s.a;return _o(c)}}(),t=i(Tn,".",n(r)),a=function(){var s=tb(t);if(s.$)return"";var u=s.a;return i(x,"",ae(u))}(),o=i(x,"",ae(t));return l(o,a)}),ib=function(e){var r=z(e)>3?i(On,3,e):e,n=function(t){return z(t)>2?i(C,i(On,2,t),n(i(It,2,t))):z(t)?b([t]):_};return we(i(C,r,n(i(It,3,e))))},ob=function(e){var r=function(n){return z(n)>3?i(C,i(On,3,n),r(i(It,3,n))):b([n])};return we(r(e))},sb=d(function(e,r){return e?ib(i(Pa,ht,r)):ob(i(Pa,ht,r))}),ub=d(function(e,r){var n=i(ab,e,r),t=i(sb,e.be,i(Pa,ht,n.a)),a=i(Qv,e,n.b),o=le(Jv,r,t,a,"",""),s=Kv(o);switch(s){case 2:return I(o,{a9:e.bD,bd:e.bE});case 0:return I(o,{a9:e.cE,bd:e.cF});default:return I(o,{a9:e.c7,bd:e.c8})}}),lb=d(function(e,r){return r===""?"":Q(e.ao,r)}),cb=d(function(e,r){var n=lb(e),t=i(pr,e.aj,r.cp),a=n(r.dp);return bi(b([r.a9,t,a,r.bd]))}),yi=d(function(e,r){return i(cb,e,i(ub,e,r))}),xi=function(e){return{$:2,a:e}},mb=function(e){return{$:0,a:e}},pb={ao:".",dp:mb(0),bD:"â",bE:"",cE:"",cF:"",be:0,aj:"",c7:"",c8:""},ji=I(pb,{ao:",",dp:xi(3),aj:"â¯"}),Lu=function(e){return yi(I(ji,{dp:zv(e)}))},Ge=ee("input"),fb=function(e){return l(e,!0)},db=function(e){return{$:1,a:e}},$b=d(function(e,r){return i(Us,e,db(r))}),vb=i(wt,b(["target","value"]),$e),Or=function(e){return i($b,"input",i(he,fb,i(he,e,vb)))},Xn=De("placeholder"),bb=$c,tr=De("type"),Sa=De("value"),yo=zt("checked"),hb=i(wt,b(["target","checked"]),li),xo=function(e){return i(Hs,"change",i(he,e,hb))},na=O(function(e,r,n){return i(H,b([P("form-control")]),b([i(Aa,b([P("label cursor-pointer")]),b([i(Nr,b([P("label-text")]),b([G("Oui")])),i(Ge,b([P("radio radio-sm"),tr("radio"),yo(r),Le(n),xo(function(t){return Vn(l(e,kn(t)))})]),_)])),i(Aa,b([P("label cursor-pointer")]),b([i(Nr,b([P("label-text")]),b([G("Non")])),i(Ge,b([P("radio radio-sm"),tr("radio"),yo(!r),Le(n),xo(function(t){return Vn(l(e,kn(!t)))})]),_)]))]))}),gb=O(function(e,r,n){return i(x,n,i(fe,function(t){return t.cY},i(Ce,r+(" . "+n),e)))}),Fu=function(e){switch(e.$){case 0:var r=e.a;return r;case 1:var n=e.a;return i(yi,I(ji,{dp:xi(1)}),n);case 2:var t=e.a;return t?"oui":"non";default:return""}},kb=ee("option"),wb=ee("select"),_b=zt("selected"),jo=er(function(e,r,n,t,a){return i(wb,b([Or(function(o){return Vn(l(r,ui(o)))}),P("select select-bordered"),Le(a)]),i(Y,function(o){return i(kb,b([Sa(o),_b(ne(Fu(t),o))]),b([G(g(gb,e,r,o))]))},n))}),yb=O(function(e,r,n){var t=r.a,a=r.b,o=function(k){var w=bb(k);if(w.$)return wr(k)?Uv:Vn(l(t,ui(k)));var j=w.a;return Vn(l(t,Bs(j)))},s=i(q,function(k){var w=k.aN;return w},i(Ce,t,e.V)),u=Ne(a.dz,i(Ce,t,e.N),s);e:for(;;){r:for(;;){n:for(;;){t:for(;;)if(u.b.$===1){if(u.c.$)break t;switch(u.c.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break r;u.b;var c=u.c.a.a;return i(Ge,b([tr("number"),Le(n),P("input input-bordered"),Xn(i(Lu,1,c)),Or(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break r;u.b;var f=u.c.a.a;return i(Ge,b([tr("text"),Le(n),P("input input-bordered"),Xn(f),Or(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break r;u.b;var p=u.c.a.a;return g(na,t,p,n);default:if(!u.a.$&&u.a.a.$===4)break r;break t}}else switch(u.b.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break e;var c=u.b.a.a;return i(Ge,b([tr("number"),Le(n),P("input input-bordered"),Sa(In(c)),Or(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break e;var f=u.b.a.a;return i(Ge,b([tr("text"),Le(n),P("input input-bordered"),Sa(f),Or(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break e;var p=u.b.a.a;return g(na,t,p,n);default:if(u.c.$){if(!u.a.$&&u.a.a.$===4)break e;break n}else switch(u.c.a.$){case 1:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var c=u.c.a.a;return i(Ge,b([tr("number"),Le(n),P("input input-bordered"),Xn(In(c)),Or(o)]),_);case 0:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var f=u.c.a.a;return i(Ge,b([tr("text"),Le(n),P("input input-bordered"),Xn(f),Or(o)]),_);case 2:if(!u.a.$&&u.a.a.$===4)break e;u.b.a;var p=u.c.a.a;return g(na,t,p,n);default:if(!u.a.$&&u.a.a.$===4)break e;break n}}return i(Ge,b([P("input"),Le(!0)]),_)}return u.b.a,i(Ge,b([P("input"),Le(!0)]),_)}var v=u.a.a.a.cG;u.b;var m=u.c.a;return le(jo,e.R,t,v,m,n)}var v=u.a.a.a.cG,$=u.b.a;return le(jo,e.R,t,v,$,n)}),Uu=function(e){var r=e.en;if(r.$)return G("");if(r.a==="l")return G(" litre");var n=r.a;return G(" "+n)},xb=O(function(e,r,n){var t=r.a,a=r.b;return i(x,G(""),i(q,function(o){return i(H,_,b([i(Aa,b([P("form-control")]),b([i(H,b([P("label")]),b([i(Nr,b([P("label-text text-md font-semibold")]),b([G(o)])),i(Nr,b([P("label-text-alt text-md")]),b([Uu(a)]))])),g(yb,e,l(t,a),n)]))]))},a.cY))}),jb=d(function(e,r){return i(H,b([P("bg-neutral rounded-md p-4 border border-base-200")]),i(Y,function(n){var t=l(i(Ce,n,e.R),i(Ce,n,e.V));if(!t.a.$&&!t.b.$){var a=t.a.a,o=t.b.a;return g(xb,e,l(n,a),o.cq)}else return G("")},r))}),Eb=d(function(e,r){if(r.$)return G("");var n=r.a;return i(H,b([P("grid grid-cols-1 lg:grid-cols-2 gap-6 px-6")]),i(Y,jb(e),n))}),Cb=function(e){return i(H,b([P("bg-neutral border-x border-b border-base-200 rounded-md")]),b([function(){var r=i(x,"",e.ay);return i(H,b([P("mb-8")]),b([i(H,b([P("pl-6 bg-base-200 font-semibold p-2 border border-base-300 rounded-t-md"),Vf(r)]),b([G(fi(r))])),i(Fv,e,r),i(Eb,e,i(Ce,r,e.aP))]))}()]))},Mb=sr("class"),Ob=sr("d"),Ab=sr("fill"),Hu=ts("http://www.w3.org/2000/svg"),Pb=Hu("path"),Vb=sr("stroke-linecap"),Sb=sr("stroke-linejoin"),Ib=sr("stroke-width"),qb=Hu("svg"),Nb=sr("viewBox"),Eo=i(qb,b([Ab("none"),Nb("0 0 24 24"),Mb("stroke-current shrink-0 h-6 w-6")]),b([i(Pb,b([Vb("round"),Sb("round"),Ib("2"),Ob("M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z")]),_)])),Co=function(e){if(e.$)return G("");if(e.a.$)return e.a,i(H,b([P("alert alert-error flex")]),b([Eo,i(Nr,_,b([G("Le fichier renseignÃ© ne contient pas de situation valide.")]))]));var r=e.a.a;return i(H,b([P("alert alert-error flex")]),b([Eo,i(Nr,_,b([G(Cs(r))]))]))},Rb=ee("footer"),Mo=De("target"),Tb=i(Rb,_,b([i(H,b([P("flex flex-col gap-y-2 items-center justify-center w-full px-4 py-4 mt-4 border-t border-base-200 text-primary bg-neutral")]),b([i(H,b([P("flex gap-x-4")]),b([i(Cn,b([P("hover:text-primary cursor-pointer"),St("https://ekofest.github.io/publicodes-evenements"),Mo("_blank")]),b([G("Consulter le modÃ¨le de calcul")])),i(H,b([P("text-base-200")]),b([G(" | ")])),i(Cn,b([P("hover:text-primary cursor-pointer"),St("https://github.com/ekofest/ekofest"),Mo("_blank")]),b([G("Consulter le code source")]))])),i(H,b([P("text-accent text-sm")]),b([G("Fait avec amour par Milou et Clemog au Moulin Bonne Vie ð¡")]))]))])),Db=function(e){if(e.$===1){var r=e.a;return V(r)}else return y},Bb=sm,Lb=Bb,Fb="resultats . bilan total",Ub=function(e){var r=i(x,0,i(fe,function(t){var a=t.aN;return Db(a)},i(Ce,Fb,e.V))),n=i(Re,function(t){var a=t.a;return i(fe,function(o){var s=o.aN;if(s.$===1){var u=s.a;return V({b5:a,bH:u/r*100})}else return y},i(Ce,a,e.V))},qr(e.am));return i(H,b([P("stats stats-vertical border border-base-200 w-full rounded-md bg-neutral mt-4")]),i(Y,function(t){var a=t.b5,o=t.bH,s=i(yi,I(ji,{dp:xi(0)}),o)+"%";return i(H,b([P("stat py-2")]),b([i(H,b([P("stat-title")]),b([G(fi(a))])),i(H,b([P("h-8 flex items-center")]),b([i(H,b([P("stat-value text-primary w-20 text-2xl")]),b([G(i(Lu,1,o)+" %")])),i(H,b([P("bg-secondary rounded-lg h-2"),i(Lb,"width",s)]),_)]))]))},we(i(Bt,function(t){return t.bH},n))))},Hb={$:8},zb={$:9},Jb={$:5},Wb=De("accept"),ta=ee("button"),Kb=ee("header"),Gb=zt("multiple"),Qb=function(){var e="join-item btn-sm bg-base-100 font-semibold border border-base-200 hover:bg-base-200";return i(Kb,_,b([i(H,b([P("flex items-center justify-between w-full px-8 mb-4 border-b border-base-200 text-primary bg-neutral")]),b([i(H,b([P("flex items-center")]),b([i(H,b([P("text-3xl font-bold text-dark m-2")]),b([G("EkoFest")])),i(Nr,b([P("badge badge-accent badge-outline")]),b([G("alpha")]))])),i(H,b([P("join")]),b([i(ta,b([P(e+" btn-primary"),st(zb)]),b([G("Recommencer âº ")])),i(ta,b([P(e),st(Hb)]),b([G("Exporter ma simulation â")])),i(ta,b([P(e),tr("file"),Gb(!1),Wb(".json"),st(Jb)]),b([G("Importer ma simulation â")]))]))]))]))}(),Zb=d(function(e,r){var n=i(Ce,r,e);if(n.$)return r;var t=n.a;return i(x,r,t.cY)}),Yb="resultats",Xb=function(e){return i(Tn," . ",e)},eh=function(e){if(e.$)return G("");var r=e.a.aN;return G(Fu(r))},rh=function(e){var r=i(Re,function(n){var t=n.a,a=n.b,o=Xb(t);if(o.b&&o.b.b&&!o.b.b.b){var s=o.a;return o.b,ne(s,Yb)?V(l(t,a)):y}else return y},qr(e.R));return i(H,b([P("stats stats-vertical border w-full rounded-md bg-neutral border-base-200")]),i(Y,function(n){var t=n.a,a=n.b;return i(H,b([P("stat")]),b([i(H,b([P("stat-title")]),b([G(i(Zb,e.R,t))])),i(H,b([P("flex items-baseline")]),b([i(H,b([P("stat-value text-primary")]),b([eh(i(Ce,t,e.V))])),i(H,b([P("stat-desc text-primary ml-2 text-base")]),b([Uu(a)]))]))]))},r))},nh=function(e){return i(H,_,b([Qb,Zi(e.R)||Zi(e.V)?i(H,b([P("flex flex-col w-full items-center")]),b([Co(e.ac),i(H,b([P("loading loading-lg text-primary mt-4")]),_)])):i(H,b([P("flex flex-col-reverse lg:grid lg:grid-cols-3")]),b([i(H,b([P("p-4 lg:pl-8 lg:pr-4 lg:col-span-2")]),b([g(Cf,Pf,e.a8,e.ay),i(Yn,Cb,e)])),i(Yn,Co,e.ac),i(H,b([P("flex flex-col p-4 lg:pl-4 lg:col-span-1 lg:pr-8")]),b([i(Yn,rh,e),i(Yn,Ub,e)]))])),Tb]))},th=xp({dG:ef,d8:lf,eo:xf,eq:nh});const ah={Main:{init:th(i(ar,function(e){return i(ar,function(r){return i(ar,function(n){return ye({bM:n,N:r,bX:e})},i(qe,"rules",Sr))},i(qe,"situation",Sr))},i(qe,"ui",Sr)))(0)}};var ih=Object.create,Ei=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,zu=Object.getOwnPropertyNames,sh=Object.getPrototypeOf,uh=Object.prototype.hasOwnProperty,Ju=(e,r)=>function(){return r||(0,e[zu(e)[0]])((r={exports:{}}).exports,r),r.exports},lh=(e,r)=>{for(var n in r)Ei(e,n,{get:r[n],enumerable:!0})},ch=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of zu(r))!uh.call(e,a)&&a!==n&&Ei(e,a,{get:()=>r[a],enumerable:!(t=oh(r,a))||t.enumerable});return e},Wu=(e,r,n)=>(n=e!=null?ih(sh(e)):{},ch(r||!e||!e.__esModule?Ei(n,"default",{value:e,enumerable:!0}):n,e)),mh=Ju({"../../node_modules/nearley/lib/nearley.js"(e,r){(function(n,t){typeof r=="object"&&r.exports?r.exports=t():n.nearley=t()})(e,function(){function n(p,m,v){return this.id=++n.highestId,this.name=p,this.symbols=m,this.postprocess=v,this}n.highestId=0,n.prototype.toString=function(p){var m=typeof p>"u"?this.symbols.map(f).join(" "):this.symbols.slice(0,p).map(f).join(" ")+" â "+this.symbols.slice(p).map(f).join(" ");return this.name+" â "+m};function t(p,m,v,$){this.rule=p,this.dot=m,this.reference=v,this.data=[],this.wantedBy=$,this.isComplete=this.dot===p.symbols.length}t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(p){var m=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=p,m.isComplete&&(m.data=m.build(),m.right=void 0),m},t.prototype.build=function(){var p=[],m=this;do p.push(m.right.data),m=m.left;while(m.left);return p.reverse(),p},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,u.fail))};function a(p,m){this.grammar=p,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}a.prototype.process=function(p){for(var m=this.states,v=this.wants,$=this.completed,k=0;k<m.length;k++){var w=m[k];if(w.isComplete){if(w.finish(),w.data!==u.fail){for(var j=w.wantedBy,M=j.length;M--;){var A=j[M];this.complete(A,w)}if(w.reference===this.index){var F=w.rule.name;(this.completed[F]=this.completed[F]||[]).push(w)}}}else{var F=w.rule.symbols[w.dot];if(typeof F!="string"){this.scannable.push(w);continue}if(v[F]){if(v[F].push(w),$.hasOwnProperty(F))for(var re=$[F],M=0;M<re.length;M++){var je=re[M];this.complete(w,je)}}else v[F]=[w],this.predict(F)}}},a.prototype.predict=function(p){for(var m=this.grammar.byName[p]||[],v=0;v<m.length;v++){var $=m[v],k=this.wants[p],w=new t($,0,this.index,k);this.states.push(w)}},a.prototype.complete=function(p,m){var v=p.nextState(m);this.states.push(v)};function o(p,m){this.rules=p,this.start=m||this.rules[0].name;var v=this.byName={};this.rules.forEach(function($){v.hasOwnProperty($.name)||(v[$.name]=[]),v[$.name].push($)})}o.fromCompiled=function($,m){var v=$.Lexer;$.ParserStart&&(m=$.ParserStart,$=$.ParserRules);var $=$.map(function(w){return new n(w.name,w.symbols,w.postprocess)}),k=new o($,m);return k.lexer=v,k};function s(){this.reset("")}s.prototype.reset=function(p,m){this.buffer=p,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(p,m){var v=this.buffer;if(typeof v=="string"){var $=v.split(`
`).slice(Math.max(0,this.line-5),this.line),k=v.indexOf(`
`,this.index);k===-1&&(k=v.length);var w=this.index-this.lastLineBreak,j=String(this.line).length;return m+=" at line "+this.line+" col "+w+`:

`,m+=$.map(function(A,F){return M(this.line-$.length+F+1,j)+" "+A},this).join(`
`),m+=`
`+M("",j+w)+`^
`,m}else return m+" at index "+(this.index-1);function M(A,F){var re=String(A);return Array(F-re.length+1).join(" ")+re}};function u(p,m,v){if(p instanceof o)var $=p,v=m;else var $=o.fromCompiled(p,m);this.grammar=$,this.options={keepHistory:!1,lexer:$.lexer||new s};for(var k in v||{})this.options[k]=v[k];this.lexer=this.options.lexer,this.lexerState=void 0;var w=new a($,0);this.table=[w],w.wants[$.start]=[],w.predict($.start),w.process(),this.current=0}u.fail={},u.prototype.feed=function(p){var m=this.lexer;m.reset(p,this.lexerState);for(var v;;){try{if(v=m.next(),!v)break}catch(ce){var j=new a(this.grammar,this.current+1);this.table.push(j);var $=new Error(this.reportLexerError(ce));throw $.offset=this.current,$.token=ce.token,$}var k=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var w=this.current+1,j=new a(this.grammar,w);this.table.push(j);for(var M=v.text!==void 0?v.text:v.value,A=m.constructor===s?v.value:v,F=k.scannable,re=F.length;re--;){var je=F[re],ge=je.rule.symbols[je.dot];if(ge.test?ge.test(A):ge.type?ge.type===v.type:ge.literal===M){var ur=je.nextState({data:A,token:v,isToken:!0,reference:w-1});j.states.push(ur)}}if(j.process(),j.states.length===0){var $=new Error(this.reportError(v));throw $.offset=this.current,$.token=v,$}this.options.keepHistory&&(k.lexerState=m.save()),this.current++}return k&&(this.lexerState=m.save()),this.results=this.finish(),this},u.prototype.reportLexerError=function(p){var m,v,$=p.token;return $?(m="input "+JSON.stringify($.text[0])+" (lexer error)",v=this.lexer.formatError($,"Syntax error")):(m="input (lexer error)",v=p.message),this.reportErrorCommon(v,m)},u.prototype.reportError=function(p){var m=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),v=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(v,m)},u.prototype.reportErrorCommon=function(p,m){var v=[];v.push(p);var $=this.table.length-2,k=this.table[$],w=k.states.filter(function(M){var A=M.rule.symbols[M.dot];return A&&typeof A!="string"});if(w.length===0)v.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(k.states,v);else{v.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var j=w.map(function(M){return this.buildFirstStateStack(M,[])||[M]},this);j.forEach(function(M){var A=M[0],F=A.rule.symbols[A.dot],re=this.getSymbolDisplay(F);v.push("A "+re+" based on:"),this.displayStateStack(M,v)},this)}return v.push(""),v.join(`
`)},u.prototype.displayStateStack=function(p,m){for(var v,$=0,k=0;k<p.length;k++){var w=p[k],j=w.rule.toString(w.dot);j===v?$++:($>0&&m.push("    ^ "+$+" more lines identical to this"),$=0,m.push("    "+j)),v=j}},u.prototype.getSymbolDisplay=function(p){return c(p)},u.prototype.buildFirstStateStack=function(p,m){if(m.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var v=p.wantedBy[0],$=[p].concat(m),k=this.buildFirstStateStack(v,$);return k===null?null:[p].concat(k)},u.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},u.prototype.restore=function(p){var m=p.index;this.current=m,this.table[m]=p,this.table.splice(m+1),this.lexerState=p.lexerState,this.results=this.finish()},u.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},u.prototype.finish=function(){var p=[],m=this.grammar.start,v=this.table[this.table.length-1];return v.states.forEach(function($){$.rule.name===m&&$.dot===$.rule.symbols.length&&$.reference===0&&$.data!==u.fail&&p.push($)}),p.map(function($){return $.data})};function c(p){var m=typeof p;if(m==="string")return p;if(m==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function f(p){var m=typeof p;if(m==="string")return p;if(m==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:u,Grammar:o,Rule:n}})}}),ph=Ju({"../../node_modules/moo/moo.js"(e,r){(function(n,t){typeof define=="function"&&define.amd?define([],t):typeof r=="object"&&r.exports?r.exports=t():n.moo=t()})(e,function(){var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString,a=typeof new RegExp().sticky=="boolean";function o(h){return h&&t.call(h)==="[object RegExp]"}function s(h){return h&&typeof h=="object"&&!o(h)&&!Array.isArray(h)}function u(h){return h.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(h){var E=new RegExp("|"+h);return E.exec("").length-1}function f(h){return"("+h+")"}function p(h){if(!h.length)return"(?!)";var E=h.map(function(S){return"(?:"+S+")"}).join("|");return"(?:"+E+")"}function m(h){if(typeof h=="string")return"(?:"+u(h)+")";if(o(h)){if(h.ignoreCase)throw new Error("RegExp /i flag not allowed");if(h.global)throw new Error("RegExp /g flag is implied");if(h.sticky)throw new Error("RegExp /y flag is implied");if(h.multiline)throw new Error("RegExp /m flag is implied");return h.source}else throw new Error("Not a pattern: "+h)}function v(h,E){return h.length>E?h:Array(E-h.length+1).join(" ")+h}function $(h,E){for(var S=h.length,R=0;;){var U=h.lastIndexOf(`
`,S-1);if(U===-1||(R++,S=U,R===E)||S===0)break}var T=R<E?0:S+1;return h.substring(T).split(`
`)}function k(h){for(var E=Object.getOwnPropertyNames(h),S=[],R=0;R<E.length;R++){var U=E[R],T=h[U],K=[].concat(T);if(U==="include"){for(var ie=0;ie<K.length;ie++)S.push({include:K[ie]});continue}var Z=[];K.forEach(function(D){s(D)?(Z.length&&S.push(j(U,Z)),S.push(j(U,D)),Z=[]):Z.push(D)}),Z.length&&S.push(j(U,Z))}return S}function w(h){for(var E=[],S=0;S<h.length;S++){var R=h[S];if(R.include){for(var U=[].concat(R.include),T=0;T<U.length;T++)E.push({include:U[T]});continue}if(!R.type)throw new Error("Rule has no type: "+JSON.stringify(R));E.push(j(R.type,R))}return E}function j(h,E){if(s(E)||(E={match:E}),E.include)throw new Error("Matching rules cannot also include states");var S={defaultType:h,lineBreaks:!!E.error||!!E.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var R in E)n.call(E,R)&&(S[R]=E[R]);if(typeof S.type=="string"&&h!==S.type)throw new Error("Type transform cannot be a string (type '"+S.type+"' for token '"+h+"')");var U=S.match;return S.match=Array.isArray(U)?U:U?[U]:[],S.match.sort(function(T,K){return o(T)&&o(K)?0:o(K)?-1:o(T)?1:K.length-T.length}),S}function M(h){return Array.isArray(h)?w(h):k(h)}var A=j("error",{lineBreaks:!0,shouldThrow:!0});function F(h,E){for(var S=null,R=Object.create(null),U=!0,T=null,K=[],ie=[],Z=0;Z<h.length;Z++)h[Z].fallback&&(U=!1);for(var Z=0;Z<h.length;Z++){var D=h[Z];if(D.include)throw new Error("Inheritance is not allowed in stateless lexers");if(D.error||D.fallback){if(S)throw!D.fallback==!S.fallback?new Error("Multiple "+(D.fallback?"fallback":"error")+" rules not allowed (for token '"+D.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+D.defaultType+"')");S=D}var be=D.match.slice();if(U)for(;be.length&&typeof be[0]=="string"&&be[0].length===1;){var Er=be.shift();R[Er.charCodeAt(0)]=D}if(D.pop||D.push||D.next){if(!E)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+D.defaultType+"')");if(D.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+D.defaultType+"')")}if(be.length!==0){U=!1,K.push(D);for(var Cr=0;Cr<be.length;Cr++){var Mr=be[Cr];if(o(Mr)){if(T===null)T=Mr.unicode;else if(T!==Mr.unicode&&D.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Lr=p(be.map(m)),Be=new RegExp(Lr);if(Be.test(""))throw new Error("RegExp matches empty string: "+Be);var sn=c(Lr);if(sn>0)throw new Error("RegExp has capture groups: "+Be+`
Use (?: â¦ ) instead`);if(!D.lineBreaks&&Be.test(`
`))throw new Error("Rule should declare lineBreaks: "+Be);ie.push(f(Lr))}}var Fr=S&&S.fallback,un=a&&!Fr?"ym":"gm",Wn=a||Fr?"":"|";T===!0&&(un+="u");var Cl=new RegExp(p(ie)+Wn,un);return{regexp:Cl,groups:K,fast:R,error:S||A}}function re(h){var E=F(M(h));return new ce({start:E},"start")}function je(h,E,S){var R=h&&(h.push||h.next);if(R&&!S[R])throw new Error("Missing state '"+R+"' (in token '"+h.defaultType+"' of state '"+E+"')");if(h&&h.pop&&+h.pop!=1)throw new Error("pop must be 1 (in token '"+h.defaultType+"' of state '"+E+"')")}function ge(h,E){var S=h.$all?M(h.$all):[];delete h.$all;var R=Object.getOwnPropertyNames(h);E||(E=R[0]);for(var U=Object.create(null),T=0;T<R.length;T++){var K=R[T];U[K]=M(h[K]).concat(S)}for(var T=0;T<R.length;T++)for(var K=R[T],ie=U[K],Z=Object.create(null),D=0;D<ie.length;D++){var be=ie[D];if(be.include){var Er=[D,1];if(be.include!==K&&!Z[be.include]){Z[be.include]=!0;var Cr=U[be.include];if(!Cr)throw new Error("Cannot include nonexistent state '"+be.include+"' (in state '"+K+"')");for(var Mr=0;Mr<Cr.length;Mr++){var Lr=Cr[Mr];ie.indexOf(Lr)===-1&&Er.push(Lr)}}ie.splice.apply(ie,Er),D--}}for(var Be=Object.create(null),T=0;T<R.length;T++){var K=R[T];Be[K]=F(U[K],!0)}for(var T=0;T<R.length;T++){for(var sn=R[T],Fr=Be[sn],un=Fr.groups,D=0;D<un.length;D++)je(un[D],sn,Be);for(var Wn=Object.getOwnPropertyNames(Fr.fast),D=0;D<Wn.length;D++)je(Fr.fast[Wn[D]],sn,Be)}return new ce(Be,E)}function ur(h){for(var E=typeof Map<"u",S=E?new Map:Object.create(null),R=Object.getOwnPropertyNames(h),U=0;U<R.length;U++){var T=R[U],K=h[T],ie=Array.isArray(K)?K:[K];ie.forEach(function(Z){if(typeof Z!="string")throw new Error("keyword must be string (in keyword '"+T+"')");E?S.set(Z,T):S[Z]=T})}return function(Z){return E?S.get(Z):S[Z]}}var ce=function(h,E){this.startState=E,this.states=h,this.buffer="",this.stack=[],this.reset()};ce.prototype.reset=function(h,E){return this.buffer=h||"",this.index=0,this.line=E?E.line:1,this.col=E?E.col:1,this.queuedToken=E?E.queuedToken:null,this.queuedText=E?E.queuedText:"",this.queuedThrow=E?E.queuedThrow:null,this.setState(E?E.state:this.startState),this.stack=E&&E.stack?E.stack.slice():[],this},ce.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ce.prototype.setState=function(h){if(!(!h||this.state===h)){this.state=h;var E=this.states[h];this.groups=E.groups,this.error=E.error,this.re=E.regexp,this.fast=E.fast}},ce.prototype.popState=function(){this.setState(this.stack.pop())},ce.prototype.pushState=function(h){this.stack.push(this.state),this.setState(h)};var lr=a?function(h,E){return h.exec(E)}:function(h,E){var S=h.exec(E);return S[0].length===0?null:S};ce.prototype._getGroup=function(h){for(var E=this.groups.length,S=0;S<E;S++)if(h[S+1]!==void 0)return this.groups[S];throw new Error("Cannot find token type for matched text")};function Jn(){return this.value}if(ce.prototype.next=function(){var h=this.index;if(this.queuedGroup){var E=this._token(this.queuedGroup,this.queuedText,h);return this.queuedGroup=null,this.queuedText="",E}var S=this.buffer;if(h!==S.length){var K=this.fast[S.charCodeAt(h)];if(K)return this._token(K,S.charAt(h),h);var R=this.re;R.lastIndex=h;var U=lr(R,S),T=this.error;if(U==null)return this._token(T,S.slice(h,S.length),h);var K=this._getGroup(U),ie=U[0];return T.fallback&&U.index!==h?(this.queuedGroup=K,this.queuedText=ie,this._token(T,S.slice(h,U.index),h)):this._token(K,ie,h)}},ce.prototype._token=function(h,E,S){var R=0;if(h.lineBreaks){var U=/\n/g,T=1;if(E===`
`)R=1;else for(;U.exec(E);)R++,T=U.lastIndex}var K={type:typeof h.type=="function"&&h.type(E)||h.defaultType,value:typeof h.value=="function"?h.value(E):E,text:E,toString:Jn,offset:S,lineBreaks:R,line:this.line,col:this.col},ie=E.length;if(this.index+=ie,this.line+=R,R!==0?this.col=ie-T+1:this.col+=ie,h.shouldThrow){var Z=new Error(this.formatError(K,"invalid syntax"));throw Z}return h.pop?this.popState():h.push?this.pushState(h.push):h.next&&this.setState(h.next),K},typeof Symbol<"u"&&Symbol.iterator){var jr=function(h){this.lexer=h};jr.prototype.next=function(){var h=this.lexer.next();return{value:h,done:!h}},jr.prototype[Symbol.iterator]=function(){return this},ce.prototype[Symbol.iterator]=function(){return new jr(this)}}return ce.prototype.formatError=function(h,E){if(h==null)var S=this.buffer.slice(this.index),h={text:S,offset:this.index,lineBreaks:S.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var R=2,U=Math.max(h.line-R,1),T=h.line+R,K=String(T).length,ie=$(this.buffer,this.line-h.line+R+1).slice(0,5),Z=[];Z.push(E+" at line "+h.line+" col "+h.col+":"),Z.push("");for(var D=0;D<ie.length;D++){var be=ie[D],Er=U+D;Z.push(v(String(Er),K)+"  "+be),Er===h.line&&Z.push(v("",K+h.col+1)+"^")}return Z.join(`
`)},ce.prototype.clone=function(){return new ce(this.states,this.state)},ce.prototype.has=function(h){return!0},{compile:re,states:ge,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ur}})}}),L=class extends Error{constructor(r,n,t,a){super(Ci(r,n,t,a));oe(this,"name");oe(this,"info");this.name=r,this.info=t}},Ci=(e,r,n,t)=>{const a={SyntaxError:"Erreur syntaxique",EvaluationError:"Erreur d'Ã©valuation",UnknownRule:"RÃ¨gle inconnue",PrivateRule:"RÃ¨gle privÃ©e"},o=/error/i.test(e);return`
[ ${a[e]??e} ]`+(n&&"dottedName"in n&&n.dottedName?.length?`
â¡ï¸  Dans la rÃ¨gle "${n.dottedName}"`:"")+`
${o?"âï¸":"â ï¸"}  ${r}`+(t?`
`+(o?"    ":"â¹ï¸  ")+t.message:"")},Un=class extends L{constructor(e){super("InternalError",`
Erreur interne du moteur.

Cette erreur est le signe d'un bug dans publicodes. Pour nous aider Ã  le rÃ©soudre, vous pouvez copier ce texte dans un nouveau ticket : https://github.com/betagouv/mon-entreprise/issues/new.

payload:
${JSON.stringify(e,null,2)}
`,e)}},fh=class extends Un{constructor(e){super(e)}};function Jt(e,r,n,t){e.warn(Ci("Avertissement",r,n,t))}function Oo(e,r){e.warn(Ci("Avertissement",`Cette rÃ¨gle est tagguÃ©e comme experimentale. 

Cela veut dire qu'elle peut Ãªtre modifiÃ©e, renommÃ©e, ou supprimÃ©e sans qu'il n'y ait de changement de version majeure dans l'API.
`,{dottedName:r}))}function Ao(e,r,n){if(e.has(r)){e.get(r).add(n);return}e.set(r,new Set([n]))}function dh(e,r){return Object.entries(r).reduce((n,[t,a])=>({...n,[t]:[...n[t]??[],...a]}),e)}var Yr=e=>{const r={};for(const n in e)r[n]=e[n];return r};function qt(e,r=!0){function n(t){const a=e(t,n);return a===!1?t:a===void 0?Ia(n,t):r?a:Ia(n,a)}return n}function Ku(e){function r(t){switch(e(t,r)){case"continue":Ia(n,t);return;case"stop":return}}const n=t=>(r(t),t);return r}function $h(e,r){const n={};for(const t in r)n[t]=e(r[t]);return n}var Ia=(e,r)=>{switch(r=vh(e,r),r.nodeKind){case"rule":return bh(e,r);case"reference":case"constant":return r;case"arrondi":return Eh(e,r);case"simplifier unitÃ©":case"variable manquante":case"est non applicable":case"est non dÃ©fini":return gh(e,r);case"barÃ¨me":case"taux progressif":case"grille":return wh(e,r);case"une possibilitÃ©":return _h(e,r);case"durÃ©e":return xh(e,r);case"rÃ©soudre rÃ©fÃ©rence circulaire":return Ch(e,r);case"inversion":return jh(e,r);case"operation":return yh(e,r);case"recalcul":return Oh(e,r);case"unitÃ©":return Ah(e,r);case"variations":return Ph(e,r);case"replacementRule":return hh(e,r);case"texte":return Mh(e,r);case"condition":return Vh(e,r);default:throw new fh(r)}},vh=(e,r)=>{if(!("sourceMap"in r)||!r.sourceMap||!r.sourceMap.args)return r;const n=r.sourceMap,t={};for(const a in n.args){const o=n.args[a];t[a]=Array.isArray(o)?o.map(s=>e(s)):e(o)}return{...r,sourceMap:{...n,args:t}}},bh=(e,r)=>{const n=Yr(r);n.suggestions={};for(const t in r.suggestions)n.suggestions[t]=e(r.suggestions[t]);return n.replacements=r.replacements.map(e),n.explanation={ruleDisabledByItsParent:r.explanation.ruleDisabledByItsParent,nullableParent:r.explanation.nullableParent?e(r.explanation.nullableParent):void 0,parents:r.explanation.parents.map(e),valeur:e(r.explanation.valeur)},n},hh=(e,r)=>({...r,definitionRule:e(r.definitionRule),replacedReference:e(r.replacedReference),replacementNode:e(r.replacementNode),whiteListedNames:r.whiteListedNames.map(e),blackListedNames:r.blackListedNames.map(e)}),gh=(e,r)=>({...r,explanation:e(r.explanation)});function kh(e,r){return r.map(n=>({...n,...n.plafond&&{plafond:e(n.plafond)},..."montant"in n&&{montant:e(n.montant)},..."taux"in n&&{taux:e(n.taux)}}))}var wh=(e,r)=>({...r,explanation:{assiette:e(r.explanation.assiette),multiplicateur:e(r.explanation.multiplicateur),tranches:kh(e,r.explanation.tranches)}}),_h=(e,r)=>({...r,explanation:r.explanation.map(e)}),yh=(e,r)=>{const n=Yr(r);return n.explanation=[e(r.explanation[0]),e(r.explanation[1])],n},xh=(e,r)=>({...r,explanation:{depuis:e(r.explanation.depuis),"jusqu'Ã ":e(r.explanation["jusqu'Ã "])}}),jh=(e,r)=>({...r,explanation:{...r.explanation,inversionCandidates:r.explanation.inversionCandidates.map(e)}}),Eh=(e,r)=>({...r,explanation:{valeur:e(r.explanation.valeur),arrondi:e(r.explanation.arrondi)}}),Ch=(e,r)=>({...r,explanation:{...r.explanation,valeur:e(r.explanation.valeur)}}),Mh=(e,r)=>({...r,explanation:r.explanation.map(n=>typeof n=="string"?n:e(n))}),Oh=(e,r)=>({...r,explanation:{...r.explanation,amendedSituation:r.explanation.amendedSituation.map(([n,t])=>[e(n),e(t)]),recalcul:r.explanation.recalculNode&&e(r.explanation.recalculNode)}}),Ah=(e,r)=>{const n=Yr(r);return n.explanation=e(r.explanation),n},Ph=(e,r)=>({...r,explanation:r.explanation.map(({condition:n,consequence:t})=>({condition:e(n),consequence:t&&e(t)}))}),Vh=(e,r)=>{const n=Yr(r);return n.explanation={si:e(r.explanation.si),alors:e(r.explanation.alors),sinon:e(r.explanation.sinon)},n},xn={constant:e=>e};function de(e,r){if(xn??(xn={}),xn[e])throw new L("EvaluationError",`Multiple evaluation functions registered for the nodeKind \x1B[4m${e}`,{dottedName:""});xn[e]=r}var Po={isNullable:void 0,type:void 0};function Sh(e,r,n){function t(o){if(!o||typeof o!="object")return Po;if(n.has(o))return n.get(o);n.set(o,Po);const s=a(o);return n.set(o,s),s}function a(o){switch(o.nodeKind){case"barÃ¨me":case"durÃ©e":case"grille":case"taux progressif":return{isNullable:!1,type:"number"};case"est non dÃ©fini":case"est non applicable":return{isNullable:!1,type:"boolean"};case"constant":return{isNullable:o.isNullable??o.nodeValue===null,type:o.type};case"operation":return{isNullable:["<","<=",">",">=","/","*"].includes(o.operationKind)?t(o.explanation[0]).isNullable||t(o.explanation[1]).isNullable:o.operationKind==="-"?t(o.explanation[0]).isNullable:!1,type:["<","<=",">",">=","=","!=","et","ou"].includes(o.operationKind)?"boolean":"number"};case"inversion":case"recalcul":case"replacementRule":case"rÃ©soudre rÃ©fÃ©rence circulaire":return{isNullable:!1,type:"number"};case"texte":case"une possibilitÃ©":return{isNullable:!1,type:"string"};case"rule":case"arrondi":return t(o.explanation.valeur);case"unitÃ©":case"simplifier unitÃ©":case"variable manquante":return t(o.explanation);case"condition":return{isNullable:[o.explanation.si,o.explanation.alors,o.explanation.sinon].some(u=>t(u).isNullable),type:t(o.explanation.alors).type??t(o.explanation.sinon).type};case"variations":const s=o.explanation.map(({consequence:u})=>t(u));return{isNullable:s.some(u=>u.isNullable),type:s.map(u=>u.type).find(u=>u!==void 0)};case"reference":return t(r[o.dottedName])}}return e.forEach(o=>{const s=r[o];t(s),s.explanation.parents.forEach(t)}),n}function nr(e,r,n){let t,a;function o(s,u){t??(t=N(n,qn({dottedName:"INLINE_MECANISM"}))),a??(a={});for(const p in r)"par dÃ©faut"in r[p]&&(a[p]=N(r[p]["par dÃ©faut"],qn({})));Object.keys(r).length===1&&"valeur"in r&&(s={valeur:s});const c={};for(const p in s)c[p]=N(s[p],u);const f=qt(p=>{if(p.nodeKind!=="reference"||!(p.name in r))return;const m=p.name;if(m in c)return c[m];if(m in a)return a[m];throw new L("SyntaxError",`Il manque la clÃ© '${m} dans le mÃ©canisme ${e}`,{dottedName:m})})(t);return f.sourceMap={mecanismName:e,args:c},f}return o.nom=e,Object.assign(o,"name",{value:`parse${Gu(e)}Inline`})}function on(e,r,n){function t(a,o){Object.keys(r).length===1&&"valeur"in r&&(a={valeur:a});const s={};for(const c in a){const f=a[c];s[c]=Array.isArray(f)?f.map(p=>N(p,o)):N(f,o)}const u=N(n(s),o);return u.sourceMap={mecanismName:e,args:s},u}return t.nom=e,Object.assign(t,"name",{value:`parse${Gu(e)}Inline`})}function Gu(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,r=>r.toUpperCase()).replace(/\s+/g,"")}var xr={nodeKind:"constant",nodeValue:null,missingVariables:{},type:void 0,isNullable:!0},Qu={nodeKind:"constant",nodeValue:void 0,missingVariables:{},type:void 0,isNullable:!1},Nt={...Qu,type:"number"},Ih=nr("abattement",{abattement:{},valeur:{}},{"-":["valeur","abattement"],plancher:0}),qh=nr("applicable si",{"applicable si":{},valeur:{}},{condition:{si:"applicable si != non",alors:"valeur",sinon:xr}}),Nh=e=>"missingVariables"in e?e.missingVariables:{},Zu=(e={})=>Object.fromEntries(Object.entries(e).map(([r,n])=>[r,n+1])),Rr=(e={},r={})=>Object.fromEntries([...Object.keys(e),...Object.keys(r)].map(n=>[n,(e[n]??0)+(r[n]??0)])),Te=e=>e.map(Nh).reduce(Rr,{}),or=e=>({nodeValue:e,type:typeof e,isDefault:!0,nodeKind:"constant"}),Rh=(e,r,n)=>{const t={};for(const a in e){const o=e[a];if(r[a]==null&&!o)throw new L("EngineError",`Il manque une clÃ© '${a}' dans ${JSON.stringify(r)} `,{});const s=r[a]!=null?N(r[a],n):o;t[a]=s}return t},Pr=(e,r=n=>n)=>{const[n,...t]=e.split("/").map(s=>s.trim()),a=s=>Dh(s.split(".").filter(Boolean).map(u=>r(u)));return{numerators:a(n),denominators:t.flatMap(s=>a(s))}},Th=/(\d+)(?!.*[A-Za-z])/g;function Yu(e){let r={};return e.forEach(n=>{const t=n.match(Th);if(t!=null){const a=t[0],o=n.split(a)[0];r[o]=(r[o]??0)+ +a}else r[n]=(r[n]??0)+1}),r}function Dh(e){let r=Yu(e);return Object.entries(r).flatMap(([n,t])=>Array(t).fill(n))}function Bh(e){let r=Yu(e);return Object.entries(r).map(([n,t])=>t>1?`${n}${t}`:n)}var et=(e,r,n=t=>t)=>Bh(e.map(t=>n(t,r))).join("."),Vo=2;function Je(e,r=Vo,n=t=>t){if(e===null||typeof e!="object")return typeof e=="string"?n(e,r):e;const t=Wt(e),{numerators:a=[],denominators:o=[]}=t,s=a.length>0,u=o.length>0;return!s&&!u?"":s&&!u?et(a,r,n):!s&&u?`/${et(o,1,n)}`:`${et(a,Vo,n)} / ${et(o,1,n)}`}var jn={numerators:[],denominators:[]},cr=(e,r)=>{if(e==="/"){if(r.length!==2)throw new L("InternalError","Infer units of a division with units.length !== 2)",{});return cr("*",[r[0]||jn,{numerators:(r[1]||jn).denominators,denominators:(r[1]||jn).numerators}])}const n=r.filter(Boolean);if(n.length<=1)return n[0];if(e==="*")return Wt({numerators:n.flatMap(t=>t?.numerators??[]),denominators:n.flatMap(t=>t?.denominators??[])});if(e==="-"||e==="+")return r.find(t=>t)},Xu=(e,r)=>Array.isArray(e)&&Array.isArray(r)?e.length===r.length&&e.every((n,t)=>e[t]===r[t]):e===r,So=(e,r=Xu)=>n=>{const t=n.findIndex(a=>r(a,e));return n.filter((a,o)=>o!==t)},Wt=(e,r=Xu)=>[...e.numerators,...e.denominators].reduce(({numerators:t,denominators:a},o)=>t.find(s=>r(o,s))&&a.find(s=>r(o,s))?{numerators:So(o,r)(t),denominators:So(o,r)(a)}:{numerators:t,denominators:a},e),pt={"mois/an":12,"jour/an":365,"jour/mois":365/12,"trimestre/an":4,"mois/trimestre":3,"jour/trimestre":365/12*3,"â¬/kâ¬":10**3,"g/kg":10**3,"mg/g":10**3,"mg/kg":10**6,"m/km":10**3,"cm/m":10**2,"mm/cm":10**1,"mm/m":10**3,"cm/km":10**5,"mm/km":10**6};function Io(e,r){return pt[`${r}/${e}`]||pt[`${e}/${r}`]&&1/pt[`${e}/${r}`]}function qa(e,r){let n=100**(r.filter(t=>t==="%").length-e.filter(t=>t==="%").length);return[n]=e.reduce(([t,a],o)=>{const s=a.findIndex(c=>!!Io(o,c)),u=Io(o,a[s])||1;return[t*u,[...a.slice(0,s+1),...a.slice(s+1)]]},[n,r]),n}var qo={"kW.h":"kWh","mn / h":"noeud"};function Lh(e,r){return!e||!r?!1:e===r||e===qo[r]||r===qo[e]}function Hn(e,r,n){const t=Je(e),a=Je(r);if(!Lh(t,a)&&!Uh(e,r))throw new L("EngineError",`Impossible de convertir l'unitÃ© '${t}' en '${a}'`,{});if(!n||e===void 0)return n;const[o,s]=No(e||jn),[u,c]=No(r||jn);return nl(n*s/c*qa(o.numerators,u.numerators)*qa(u.denominators,o.denominators))}var el=Fh(pt);function Fh(e){return Object.keys(e).reduce((r,n)=>{const[t,a]=n.split("/"),o=r.findIndex(u=>u.has(t)),s=r.findIndex(u=>u.has(a));if(o>-1&&s>-1&&o!==s)throw new L("EngineError",`Invalid ratio ${n}`,{});return o===-1&&s===-1?r.push(new Set([t,a])):o>-1?r[o].add(a):s>-1&&r[s].add(t),r},[])}function rl(e,r){return e===r||el.some(n=>n.has(e)&&n.has(r))}function nl(e){return+e.toFixed(16)}function tl(e){const{numerators:r,denominators:n}=Wt(e,rl);return r.length&&r.every(t=>t==="%")?{numerators:["%"],denominators:n}:al({numerators:r,denominators:n})}function No(e,r=1){const n=qa(e.numerators,e.denominators);return[Wt(al(e),rl),r&&nl(r*n)]}var al=e=>({numerators:e.numerators.filter(r=>r!=="%"),denominators:e.denominators.filter(r=>r!=="%")});function Uh(e,r){if(e==null||r==null)return!0;const n=f=>f.reduce((p,m)=>{const v=el.findIndex(k=>k.has(m)),$=v===-1?m:""+v;return{...p,[$]:1+(p[$]??0)}},{}),[t,a,o,s]=[e.numerators,e.denominators,r.numerators,r.denominators].map(n),u=f=>[...new Set(f)],c=[t,a,o,s].map(Object.keys).flat();return u(c).every(f=>(t[f]||0)-(a[f]||0)===(o[f]||0)-(s[f]||0)||f==="%")}function Ro(e,r){return+e.toFixed(r)}var Hh=function(e){const r=cl(this.evaluateNode(e.explanation.valeur)),n=r.nodeValue;let t=e.explanation.arrondi;if(n!==!1&&(t=this.evaluateNode(t),typeof t.nodeValue=="number"&&!Je(t.unit)?.match(/dÃ©cimales?/)))throw new L("EvaluationError",`L'unitÃ© ${Je(t.unit)} de l'arrondi est inconnu. Vous devez utiliser l'unitÃ© âdÃ©cimalesâ`,{dottedName:this.cache._meta.evaluationRuleStack[0]});return{...e,nodeValue:typeof r.nodeValue!="number"||!("nodeValue"in t)?r.nodeValue:typeof t.nodeValue=="number"?Ro(r.nodeValue,t.nodeValue):t.nodeValue===!0?Ro(r.nodeValue,0):t.nodeValue===void 0?void 0:r.nodeValue,explanation:{valeur:r,arrondi:t},missingVariables:Te([r,t]),unit:r.unit}};function Kt(e,r){return{explanation:{valeur:N(e.valeur,r),arrondi:N(e.arrondi,r)},nodeKind:Kt.nom}}Kt.nom="arrondi";de(Kt.nom,Hh);function il(e,r){return Object.entries(e.avec).forEach(([t,a])=>{N({nom:t,...a==null?{}:typeof a!="object"||"nodeKind"in a?{valeur:a}:a},r)}),N(e.valeur,r)}il.nom="avec";var Mi=(e,r)=>e.map((n,t)=>{if(!n.plafond&&t>e.length)throw new L("SyntaxError",`La tranche nÂ°${t} du barÃ¨me n'a pas de plafond prÃ©cisÃ©. Seule la derniÃ¨re tranche peut ne pas Ãªtre plafonnÃ©e`,{dottedName:""});return{...n,...n.taux!==void 0?{taux:N(n.taux,r)}:{},...n.montant!==void 0?{montant:N(n.montant,r)}:{},plafond:"plafond"in n?N(n.plafond,r):{nodeValue:1/0,nodeKind:"constant",type:"number",isNullable:!1}}});function Oi({multiplicateur:e,assiette:r,parsedTranches:n}){return n.reduce(([t,a],o,s)=>{if(a)return[[...t,{...o,isAfterActive:!0}],a];const u=this.evaluateNode(o.plafond),c=t[s-1]?t[s-1].plafond:{nodeValue:0};let f=u.nodeValue===void 0||e.nodeValue===void 0?void 0:u.nodeValue*e.nodeValue;try{f=f===1/0||f===0?f:Hn(cr("*",[u.unit,e.unit]),r.unit,f)}catch(k){Jt(this.context.logger,`L'unitÃ© du plafond de la tranche nÂ°${s+1}  n'est pas compatible avec celle l'assiette`,{dottedName:this.cache._meta.evaluationRuleStack[0]},k)}const p=t[s-1]?t[s-1].plafondValue:0,m=p===void 0||r.nodeValue===void 0?void 0:p>r.nodeValue,v=[u,r,e,c];if(v.some(k=>k.nodeValue===void 0))return[[...t,{...o,plafond:u,plafondValue:f,plancherValue:p,nodeValue:void 0,isActive:void 0,isAfterActive:m,missingVariables:Te(v)}],!1];if(t[s-1]&&p&&f<=p)throw new L("EvaluationError",`Le plafond de la tranche nÂ°${s+1} a une valeur infÃ©rieure Ã  celui de la tranche prÃ©cÃ©dente`,{dottedName:this.cache._meta.evaluationRuleStack[0]});const $={...o,plafond:u,plancherValue:p,plafondValue:f,isAfterActive:m,isActive:r.nodeValue>=p&&r.nodeValue<f};return[[...t,$],$.isActive]},[[],!1])[0]}function zh(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):or(1),tranches:Mi(e.tranches,r)},nodeKind:"barÃ¨me"}}function Jh(e,r,n){return e.map(t=>{if(t.isAfterActive)return{...t,nodeValue:0};const a=n(t.taux),o=Te([a,t]);return[r.nodeValue,a.nodeValue,t.plafondValue,t.plancherValue].some(s=>s===void 0)?{...t,taux:a,nodeValue:void 0,missingVariables:o}:{...t,taux:a,..."unit"in r&&{unit:r.unit},nodeValue:(Math.min(r.nodeValue,t.plafondValue)-t.plancherValue)*Hn(a.unit,Pr(""),a.nodeValue),missingVariables:o}})}var Wh=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new L("EvaluationError","Le multiplicateur ne peut pas Ãªtre nul",{dottedName:this.cache._meta.evaluationRuleStack[0]});const a=Jh(Oi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}),n,r),o=a.reduce((s,{nodeValue:u})=>u==null?void 0:s+u,0);return{...e,nodeValue:o,missingVariables:Te([n,t,...a]),explanation:{assiette:n,multiplicateur:t,tranches:a},unit:n.unit}};de("barÃ¨me",Wh);var Kh=(e,r,n)=>{const{composantes:t,...a}=r,o=N({somme:t.map(s=>{const{attributs:u,...c}=s;return{...u,valeur:{[e]:{...a,...c}}}})},n);return{...o,sourceMap:{args:{},...o.sourceMap,mecanismName:"composantes"}}},Gh=function(e){let r;const n=this.evaluateNode(e.explanation.si);let t=e.explanation.alors,a=e.explanation.sinon;if("unit"in n)throw new L("EvaluationError","La condition doit Ãªtre de type boolÃ©en",{dottedName:this.cache._meta.evaluationRuleStack[0]});if(n.nodeValue===!0)t=this.evaluateNode(e.explanation.alors),t.isActive=!0,r=t;else if(n.nodeValue===!1)a=this.evaluateNode(e.explanation.sinon),r=a;else if(n.nodeValue===null)r=n;else if(n.nodeValue===void 0)a=this.evaluateNode(e.explanation.sinon),t=this.evaluateNode(e.explanation.alors),r={...n,missingVariables:Te([a,t])};else throw new L("EvaluationError","La condition doit Ãªtre de type boolÃ©en",{dottedName:this.cache._meta.evaluationRuleStack[0]});const o=r.unit??t.unit;return{...r,missingVariables:Rr(Zu(n.missingVariables),r.missingVariables),...o!=null?{unit:o}:{},...e,explanation:{si:n,alors:t,sinon:a}}};function ol(e,r){return{explanation:{si:N(e.si,r),alors:N(e.alors,r),sinon:N(e.sinon,r)},nodeKind:"condition"}}ol.nom="condition";de("condition",Gh);function sl(e){let[r,n,t]=e.split("/");return t||([r,n,t]=["01",r,n]),ul(+t,+n,+r)}var aa=e=>+e<10?`0${e}`:""+e;function ul(e,r,n){const t=new Date(+e,+r-1,+n);if(!+t||t.getDate()!==+n)throw new L("SyntaxError",`La date ${n}/${r}/${e} n'est pas valide`,{dottedName:""});return`${aa(n)}/${aa(r)}/${aa(e)}`}function Na(e){const[r,n,t]=sl(e).split("/"),a=new Date(+t,+n-1,+r);return a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),a}function Qh(e){return ul(e.getFullYear(),e.getMonth()+1,e.getDate())}var To=Qh(new Date),Zh={depuis:or(To),"jusqu'Ã ":or(To)},Yh=function(e){const r=this.evaluateNode(e.explanation.depuis),n=this.evaluateNode(e.explanation["jusqu'Ã "]);let t;if([r,n].some(({nodeValue:a})=>a===void 0))t=void 0;else{const[a,o]=[r.nodeValue,n.nodeValue].map(Na);t=Math.max(0,Math.round((o.getTime()-a.getTime())/(1e3*60*60*24)))}return{...e,missingVariables:Te([r,n]),nodeValue:t,explanation:{depuis:r,"jusqu'Ã ":n}}},Xh=(e,r)=>({explanation:Rh(Zh,e,r),unit:Pr("jour"),nodeKind:"durÃ©e"});de("durÃ©e",Yh);function ll(e,r){return{explanation:N(e,r),nodeKind:"est non dÃ©fini"}}ll.nom="est non dÃ©fini";var eg=nr("est dÃ©fini",{valeur:{}},{"=":[{"est non dÃ©fini":"valeur"},"non"]}),rg=nr("est applicable",{valeur:{}},{"=":[{"est non applicable":"valeur"},"non"]}),ng=function(e){const r=this.evaluateNode(e.explanation);let n=!1;return r.nodeValue===void 0&&(n=!0),{...e,nodeValue:n,missingVariables:r.missingVariables,explanation:r}};de("est non dÃ©fini",ng);function cl(e){if(!e.unit)return e;const r=tl(e.unit);return Ir(r,e)}function Ir(e,r){return{...r,nodeValue:r.unit&&typeof r.nodeValue=="number"?Hn(r.unit,e,r.nodeValue):r.nodeValue,unit:e}}var ia=({style:e,maximumFractionDigits:r=2,minimumFractionDigits:n=0,language:t})=>a=>{const o=e==="currency"&&r>=2&&n===0&&!Number.isInteger(a)?2:n;return Intl.NumberFormat(t,{style:e,currency:"EUR",maximumFractionDigits:r,minimumFractionDigits:o}).format(a)};function tg({maximumFractionDigits:e,minimumFractionDigits:r,language:n,formatUnit:t,unit:a,nodeValue:o}){if(typeof o!="number")return o;const s=a?Je(a,o,t):void 0;switch(s){case"â¬":return ia({style:"currency",maximumFractionDigits:e,minimumFractionDigits:r,language:n})(o);case"%":return ia({style:"percent",maximumFractionDigits:e,language:n})(o/100);default:return ia({style:"decimal",minimumFractionDigits:r,maximumFractionDigits:e,language:n})(o)+(typeof s=="string"?`Â ${s}`:"")}}function ag(e){return e&&e[0].toUpperCase()+e.slice(1)}var ig={fr:{true:"oui",false:"non"},en:{true:"yes",false:"no"}};function og(e,{language:r="fr",displayedUnit:n,formatUnit:t,precision:a=2}={}){let o=typeof e=="number"||typeof e>"u"||e===null?e:e.nodeValue;if(typeof o=="number"&&Number.isNaN(o))return"Erreur dans le calcul du nombre";if(o===void 0)return"Pas encore dÃ©fini";if(o===null)return"Non applicable";if(typeof o=="string")return o.replace("\\n",`
`);if(typeof o=="object")return o.nom;if(typeof o=="boolean")return ig[r][o];if(typeof o=="number"){let s=typeof e=="number"||typeof e>"u"||!("unit"in e)?void 0:e.unit;if(s){const u=cl({unit:s,nodeValue:o});s=u.unit,o=u.nodeValue}return tg({minimumFractionDigits:0,maximumFractionDigits:a,language:r,formatUnit:t,nodeValue:o,unit:n??s}).trim()}}var sg={};lh(sg,{contextNameToDottedName:()=>Ra,cyclicDependencies:()=>$g,decodeRuleName:()=>gg,disambiguateReference:()=>dl,disambiguateReferenceNode:()=>Da,encodeRuleName:()=>hg,findCommonAncestor:()=>fl,getChildrenRules:()=>kg,isAccessible:()=>Gt,isExperimental:()=>Ta,nameLeaf:()=>ml,ruleParent:()=>pl,ruleParents:()=>zn,ruleWithDedicatedDocumentationPage:()=>wg,updateReferencesMapsFromReferenceNode:()=>Pi});function pn(e,r){return e!=null&&Object.prototype.hasOwnProperty.call(e,r)}function Do(e){return function(...r){return e}}var ug="\0",Bo="",Lo=(e,r)=>{e[r]?e[r]++:e[r]=1},Fo=(e,r)=>{--e[r]||delete e[r]},bn=(e,r,n,t)=>{let a=""+r,o=""+n;if(!e&&a>o){const s=a;a=o,o=s}return a+Bo+o+Bo+(t===void 0?ug:t)},lg=(e,r,n,t)=>{let a=""+r,o=""+n;if(!e&&a>o){const u=a;a=o,o=u}const s={v:a,w:o};return t&&(s.name=t),s},oa=(e,r)=>bn(e,r.v,r.w,r.name),cg=class{constructor(e={}){oe(this,"_nodeCount",0);oe(this,"_edgeCount",0);oe(this,"_isDirected");oe(this,"_label");oe(this,"_defaultNodeLabelFn");oe(this,"_defaultEdgeLabelFn");oe(this,"_nodes");oe(this,"_in");oe(this,"_preds");oe(this,"_out");oe(this,"_sucs");oe(this,"_edgeObjs");oe(this,"_edgeLabels");this._isDirected=pn(e,"directed")?e.directed:!0,this._label=void 0,this._defaultNodeLabelFn=Do(void 0),this._defaultEdgeLabelFn=Do(void 0),this._nodes={},this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}setGraph(e){return this._label=e,this}graph(){return this._label}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}setNode(e,r=void 0){return pn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}setNodes(e,r){return e.forEach(n=>{r!==void 0?this.setNode(n,r):this.setNode(n)}),this}node(e){return this._nodes[e]}hasNode(e){return pn(this._nodes,e)}successors(e){const r=this._sucs[e];if(r)return Object.keys(r)}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setEdge(e,r,n=void 0,t=void 0){e=""+e,r=""+r;const a=bn(this._isDirected,e,r,t);if(pn(this._edgeLabels,a))return n!==void 0&&(this._edgeLabels[a]=n),this;this.setNode(e),this.setNode(r),this._edgeLabels[a]=n!==void 0?n:this._defaultEdgeLabelFn(e,r,t);const o=lg(this._isDirected,e,r,t);return e=o.v,r=o.w,Object.freeze(o),this._edgeObjs[a]=o,Lo(this._preds[r],e),Lo(this._sucs[e],r),this._in[r][a]=o,this._out[e][a]=o,this._edgeCount++,this}edge(e,r,n){const t=arguments.length===1?oa(this._isDirected,arguments[0]):bn(this._isDirected,e,r,n);return this._edgeLabels[t]}hasEdge(e,r,n){const t=arguments.length===1?oa(this._isDirected,arguments[0]):bn(this._isDirected,e,r,n);return pn(this._edgeLabels,t)}removeEdge(e,r,n){const t=arguments.length===1?oa(this._isDirected,arguments[0]):bn(this._isDirected,e,r,n),a=this._edgeObjs[t];return a&&(e=a.v,r=a.w,delete this._edgeLabels[t],delete this._edgeObjs[t],Fo(this._preds[r],e),Fo(this._sucs[e],r),delete this._in[r][t],delete this._out[e][t],this._edgeCount--),this}outEdges(e,r=void 0){const n=this._out[e];if(n){const t=Object.values(n);return r===void 0?t:t.filter(function(a){return a.w===r})}}};function mg(e){let r=0;const n=[],t={},a=[];function o(s){const u=t[s]={onStack:!0,lowlink:r,index:r++};if(n.push(s),e.successors(s).forEach(function(c){Object.prototype.hasOwnProperty.call(t,c)?t[c].onStack&&(u.lowlink=Math.min(u.lowlink,t[c].index)):(o(c),u.lowlink=Math.min(u.lowlink,t[c].lowlink))}),u.lowlink===u.index){const c=[];let f;do f=n.pop(),t[f].onStack=!1,c.push(f);while(s!==f);a.push(c)}}return e.nodes().forEach(function(s){Object.prototype.hasOwnProperty.call(t,s)||o(s)}),a}function pg(e){return mg(e).filter(function(r){return r.length>1||r.length===1&&e.hasEdge(r[0],r[0])})}function fg(e){const r=new cg;return[...e.entries()].forEach(([n,t])=>{t.forEach(a=>{r.setEdge(n,a)})}),r}function dg(e,r){function*n(o){let s=o;for(;;)yield r[s++%r.length]}const t=[];for(let o=0;o<r.length;o++){const s=[];let u;for(const c of n(o))if(u===void 0)s.push(c),u=c;else if(e.get(u)?.has(c)){if(s.includes(c)){s.splice(0,s.lastIndexOf(c));break}s.push(c),u=c}t.push(s)}return t.reduce((o,s)=>s.length>o.length?o:s)}function $g(e){const{referencesMaps:r}=ft(e),n=fg(r.referencesIn),a=pg(n).map(u=>u.reverse()),o=a.map(u=>dg(r.referencesIn,u)),s=a.map((u,c)=>bg(n,u,o[c]));return[o,s]}var vg=(e,r,n)=>{for(let t=0;t<e.length+1;t++)if(r===e[t]&&n===e[(t+1)%e.length])return!0;return!1};function bg(e,r,n){const t=new Set;return r.forEach(a=>{e.outEdges(a).filter(({w:o})=>r.includes(o)).forEach(({v:o,w:s})=>{t.add(`"${o}" -> "${s}"`+(vg(n,o,s)?" [color=red]":""))})}),`digraph Cycle {
	${[...t].join(`;
	`)};
}`}var Tr=e=>e.split(" . "),Ai=e=>e.join(" . "),ml=e=>Tr(e).slice(-1)?.[0],hg=e=>e?.replace(/\s\.\s/g,"/").replace(/-/g,"â").replace(/\s/g,"-"),gg=e=>e.replace(/\//g," . ").replace(/-/g," ").replace(/\u2011/g,"-"),Ra=e=>e.endsWith("$SITUATION")?pl(e):e,pl=e=>Ai(Tr(e).slice(0,-1));function zn(e){return Tr(e).slice(0,-1).map((r,n,t)=>Ai(t.slice(0,n+1))).reverse()}var kg=(e,r)=>Object.keys(e).filter(t=>t.startsWith(r)&&Tr(t).length===Tr(r).length+1);function fl(e,r){const n=Tr(e),t=Tr(r),a=n.findIndex((o,s)=>t[s]!==o);return a===-1?e:Ai(n.slice(0,a))}function Gt(e,r,n){if(!(n in e))throw new L("InternalError",`La rÃ¨gle "${n}" n'existe pas`,{dottedName:n});const t=fl(r,n),a=[n,...zn(n),""];return a.slice(0,Math.max(a.indexOf(t)-1,0)).every(s=>!(s in e)||e[s].private===!1)}function Ta(e,r){if(!(r in e))throw new L("InternalError",`La rÃ¨gle "${r}" n'existe pas`,{dottedName:r});return[r,...zn(r)].some(t=>t in e&&e[t].rawNode?.experimental==="oui")}function dl(e,r="",n){const a=[r,...zn(r),""].map(s=>s?s+" . "+n:n).sort((s,u)=>s===r?1:u===r?-1:0).filter(s=>s in e),o=a.find(s=>Gt(e,r,s));if(!a.length)throw new L("SyntaxError",`La rÃ©fÃ©rence "${n}" est introuvable.
VÃ©rifiez que l'orthographe et l'espace de nom sont corrects`,{dottedName:Ra(r)});if(!o)throw new L("SyntaxError",`La rÃ¨gle "${a[0]}" n'est pas accessible depuis "${r}".
Cela vient du fait qu'elle est privÃ©e ou qu'un de ses parent est privÃ©`,{dottedName:Ra(r)});return o}function wg(e){return e.virtualRule!==!0&&e.type!=="groupe"&&e.type!=="texte"&&e.type!=="paragraphe"&&e.type!=="notification"}function Pi(e,r,n){e.nodeKind==="reference"&&(Ao(r.referencesIn,n??e.contextDottedName,e.dottedName),Ao(r.rulesThatUse,e.dottedName,n??e.contextDottedName))}function Da(e,r){if(e.nodeKind==="reference")return e.dottedName||(e.dottedName=dl(r,e.contextDottedName,e.name),e.title=r[e.dottedName].title,e.acronym=r[e.dottedName].rawNode.acronyme),e}var _g=0,rt={};function $l(e,r){return e?(Array.isArray(e)?e:[e]).map(n=>{typeof n=="string"&&(n={rÃ¨gle:n});const t=N(n.rÃ¨gle,r),a=N(n.par??r.dottedName,r),[o,s]=[n.dans??[],n["sauf dans"]??[]].map(u=>Array.isArray(u)?u:[u]).map(u=>u.map(c=>N(c,r)));return{nodeKind:"replacementRule",rawNode:n,definitionRule:N(r.dottedName,r),replacedReference:t,replacementNode:a,whiteListedNames:o,blackListedNames:s,remplacementRuleId:_g++}}):[]}function yg(e,r){return $l(e,r).map(n=>({...n,replacementNode:xr}))}function xg(e){const r={};for(const n in e){const t=e[n];for(const a of t.replacements){if(!a.replacedReference.dottedName)throw new Un(a);const o=a.replacedReference.dottedName;r[o]=[...r[o]??[],a]}}return r}function jg({newRules:e,previousReplacements:r,parsedRules:n,referencesMaps:t,logger:a}){const o=xg(e),s=new Set([]);for(const m in o){const v=t.rulesThatUse.get(m)??[];for(const $ of v)s.add($)}const u=new Set(Object.keys(e).filter(m=>[...t.referencesIn.get(m)??new Set].some(v=>(r[v]??[]).length))),c=dh(r,o);if(!u.size&&!s.size)return[n,c];const f=Uo(r,t),p=Uo(o,t);return u.forEach(m=>{n[m]=f(n[m])}),s.forEach(m=>{n[m]=p(n[m])}),[n,c]}function Uo(e,r,n){return qt((t,a)=>{if(t.nodeKind==="replacementRule"||t.nodeKind==="inversion"||t.nodeKind==="une possibilitÃ©")return!1;if(t.nodeKind==="recalcul")return{...t,explanation:{...t.explanation,recalculNode:a(t.explanation.recalculNode),amendedSituation:t.explanation.amendedSituation.map(([o,s])=>[o,a(s)])}};if(t.nodeKind==="reference"){if(!t.dottedName)throw new Un(t);const o=Eg(t,e[t.dottedName]??[]);return Ku(s=>(Pi(s,r,t.contextDottedName),"continue"))(o),o}})}function Eg(e,r,n){const t=r.filter(({definitionRule:o})=>o.dottedName!==e.contextDottedName).filter(({whiteListedNames:o})=>!o.length||o.some(s=>e.contextDottedName.startsWith(s.dottedName))).filter(({blackListedNames:o})=>!o.length||o.every(s=>!e.contextDottedName.startsWith(s.dottedName))).sort((o,s)=>{const u=+!!s.whiteListedNames.length-+!!o.whiteListedNames.length,c=+!!s.blackListedNames.length-+!!o.blackListedNames.length;return u||c});if(!t.length)return e;t.length>1;const a=t.map(o=>o.remplacementRuleId).join("-");return rt[a]??(rt[a]={nodeKind:"variations",sourceMap:{mecanismName:"replacement"},rawNode:e.rawNode,explanation:[...t.map(o=>({condition:o.definitionRule,consequence:o.replacementNode})),{condition:or(!0),consequence:e}]}),rt[a]}function Cg(e,r){const n=!!(e.privÃ©==="oui"||e.nom.startsWith("[privÃ©] ")),t=e.nom.replace(/^\[privÃ©\] /,""),a=[r.dottedName,t].filter(Boolean).join(" . "),o=ml(a),s=ag(e.titre??o);if(r.parsedRules[a])throw new L("EvaluationError",`La rÃ©fÃ©rence '${a}' a dÃ©jÃ  Ã©tÃ© dÃ©finie`,{dottedName:a});const u={};for(const m in e)j0.includes(m)&&(u[m]=e[m]);"formule"in e&&(u.valeur=e.formule),!n&&!a.endsWith("$SITUATION")&&(u["dans la situation"]=`${a} . $SITUATION`,u.avec={...u.avec??{},"[privÃ©] $SITUATION":{...Qu,isNullable:e["possiblement non applicable"]==="oui"}},u["par dÃ©faut"]!=null&&(u["par dÃ©faut"]={valeur:u["par dÃ©faut"],"variable manquante":a}));const c={...r,dottedName:a};r.parsedRules[a]=void 0;const f={valeur:N(u,c),parents:zn(a).map(m=>N(m,c)).map(m=>(m.dottedName=m.name,m))},p={};if(e.suggestions)for(const m in e.suggestions)p[m]=N(e.suggestions[m],c);return r.parsedRules[a]={dottedName:a,replacements:[...yg(e["rend non applicable"],c),...$l(e.remplace,c)],title:s,private:n,suggestions:p,nodeKind:"rule",explanation:f,rawNode:e,virtualRule:!!r.dottedName},r.dottedName?N(t,r):r.parsedRules[a]}de("rule",function(r){const{ruleDisabledByItsParent:n,nullableParent:t,parentMissingVariables:a}=vl(this,r);let o={...r.explanation.valeur,nodeValue:null,missingVariables:{}};return n||(this.cache._meta.evaluationRuleStack.filter(u=>u===r.dottedName).length>1?o={nodeValue:void 0}:(this.cache._meta.evaluationRuleStack.unshift(r.dottedName),o=this.evaluateNode(r.explanation.valeur),this.cache._meta.evaluationRuleStack.shift())),o.missingVariables??(o.missingVariables={}),Mg(this,r,o),{...o,missingVariables:Rr(o.missingVariables,a),...r,explanation:{parents:r.explanation.parents,valeur:o,nullableParent:t,ruleDisabledByItsParent:n}}});function Mg(e,r,n){r.private===!0||!Gt(e.context.parsedRules,"",r.dottedName)||n.nodeValue===void 0&&!Object.keys(n.missingVariables).length&&(n.missingVariables[r.dottedName]=1)}function vl(e,r){if(r.private)return{ruleDisabledByItsParent:!1,parentMissingVariables:{}};const n=e.context.nodesTypes,t=r.explanation.parents.find(o=>n.get(o)?.isNullable||n.get(o)?.type==="boolean");if(!t)return{ruleDisabledByItsParent:!1,parentMissingVariables:{}};if(!e.cache._meta.parentRuleStack.includes(r.dottedName)){e.cache._meta.parentRuleStack.unshift(r.dottedName);let o=or(!1);if(n.get(t)?.isNullable&&(o=e.evaluateNode({nodeKind:"est non applicable",explanation:t})),o.nodeValue!==!0&&n.get(t)?.type==="boolean"&&(o=e.evaluateNode({nodeKind:"operation",operator:"=",operationKind:"=",explanation:[t,or(!1)]})),e.cache._meta.parentRuleStack.shift(),o.nodeValue===!0)return{ruleDisabledByItsParent:!0,parentMissingVariables:o.missingVariables??{},nullableParent:t}}let a={};if(n.get(t)?.type==="boolean"){const o=e.evaluateNode(t);return a=o.missingVariables??{},{ruleDisabledByItsParent:o.nodeValue===!1,parentMissingVariables:a,nullableParent:t}}return{ruleDisabledByItsParent:!1,parentMissingVariables:a,nullableParent:t}}function bl(e,r){return{explanation:N(e,r),nodeKind:"est non applicable"}}bl.nom="est non applicable";var nt=e=>({nodeKind:"est non applicable",explanation:e}),Og=function(e){const r=e.explanation;if(this.context.nodesTypes.get(r)?.isNullable===!1&&r.nodeKind!=="rule")return{...e,nodeValue:!1,missingVariables:{}};if(this.cache.nodes.has(r)&&this.cache.nodes.get(r)!==void 0)return{...e,nodeValue:this.cache.nodes.get(r)?.nodeValue===null,missingVariables:this.cache.nodes.get(r)?.missingVariables??{}};switch(r.nodeKind){case"rule":const{ruleDisabledByItsParent:t,parentMissingVariables:a}=vl(this,r);if(t)return{...e,nodeValue:!0,missingVariables:a};const o=this.evaluateNode(nt(r.explanation.valeur)),s=Rr(a,o.missingVariables);return o.nodeValue===!1&&this.context.nodesTypes.get(this.context.parsedRules[`${r.dottedName} . $SITUATION`])?.isNullable&&!Object.keys(o.missingVariables).length&&(s[r.dottedName]=1),{...e,nodeValue:o.nodeValue,missingVariables:s};case"reference":if(!r.dottedName)throw new L("InternalError","Missing dottedName",{});return{...this.evaluateNode(nt(this.context.parsedRules[r.dottedName])),...e};case"condition":return{...this.evaluateNode({...r,explanation:{si:r.explanation.si,alors:nt(r.explanation.alors),sinon:nt(r.explanation.sinon)}}),...e}}const n=this.evaluateNode(r);return{...e,nodeValue:n.nodeValue===void 0?void 0:n.nodeValue===null,missingVariables:n.missingVariables}};de("est non applicable",Og);function Ag(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):or(1),tranches:Mi(e.tranches,r)},nodeKind:"grille"}}var Pg=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new L("EvaluationError","Le multiplicateur ne peut pas Ãªtre nul",{dottedName:this.cache._meta.evaluationRuleStack[0]});const a=Oi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}).map(c=>{if(c.isActive===!1)return c;const f=r(c.montant);return{...c,montant:f,nodeValue:f.nodeValue,unit:f.unit,missingVariables:Te([f,c])}});let o;const s=a.find(c=>c.isActive);s?o=[s]:a[a.length-1].isAfterActive===!1?o=[{nodeValue:!1}]:o=a.filter(c=>c.isActive===void 0);const u=o[0]?o[0].isActive===void 0?void 0:o[0].nodeValue:!1;return{...e,nodeValue:u,missingVariables:Te([n,t,...o]),explanation:{...e.explanation,assiette:n,multiplicateur:t,tranches:a},unit:o[0]?.unit??void 0}};de("grille",Pg);function hl(e,r,n,t=0,a=100,o=0){let s=r,u=n,c=s,f=e(s),p=e(u),m=f,v,$,k,w,j,M;for(;a-- >0;){if(k=u-s,Math.abs(m)<Math.abs(p)&&(s=u,u=c,c=s,f=p,p=m,m=f),v=1e-15*Math.abs(u)+t/2,$=(c-u)/2,Math.abs($)<=v||p===0)return u;if(Math.abs(k)>=v&&Math.abs(f)>Math.abs(p)){let A,F;const re=c-u;s===c?(A=p/f,w=re*A,j=1-A):(j=f/m,A=p/m,F=p/f,w=F*(re*j*(j-A)-(u-s)*(A-1)),j=(j-1)*(A-1)*(F-1)),w>0?j=-j:w=-w,w<.75*re*j-Math.abs(v*j)/2&&w<Math.abs(k*j/2)&&($=w/j)}if(Math.abs($)<v&&($=$>0?v:-v),s=u,f=p,u+=$,p=e(u),(p>0&&m>0||p<0&&m<0)&&(c=s,m=f),Math.abs(p)<t)return u;Math.abs(p)<o&&(M=u)}return M}var Vg=function(e){const r=this.shallowCopy();if(this.cache._meta.evaluationRuleStack.slice(1).includes(e.explanation.ruleToInverse))return{...Nt,...e};r.cache._meta.parentRuleStack=[...this.cache._meta.parentRuleStack],r.cache._meta.evaluationRuleStack=[...this.cache._meta.evaluationRuleStack];const n=e.explanation.inversionCandidates.find(M=>{if(this.cache._meta.evaluationRuleStack.includes(M.dottedName))return!1;const A=r.evaluateNode(r.context.parsedRules[`${M.dottedName} . $SITUATION`]);return typeof A.nodeValue=="number"&&!(M.dottedName in A.missingVariables)});if(n===void 0)return{...e,nodeValue:void 0,missingVariables:{...Object.fromEntries(e.explanation.inversionCandidates.map(M=>[M.dottedName,1])),[e.explanation.ruleToInverse]:1}};const t=r.evaluateNode(n);let a=0;r.setSituation({[n.dottedName]:Nt},{keepPreviousSituation:!0});let o;const s=M=>(a++,r.setSituation({[e.explanation.ruleToInverse]:{nodeValue:M,nodeKind:"constant",type:"number",unit:t.unit}},{keepPreviousSituation:!0}),o=r.evaluateNode(n),o),u=t.nodeValue;let c;const f=u,m=s(f).nodeValue,v=m>u?.9:1.2,$=m!==void 0?f*u*v/m:2e3,w=s($).nodeValue,j=this.context.inversionMaxIterations??10;if(m!==void 0||w!==void 0){const M=ge=>(ge===f?m:ge===$?w:s(ge).nodeValue)-u,re=w!==void 0&&w<u&&(w>m||m>u)?$:m!==void 0&&m<u&&(m>w||w>u)?f:-1e6,je=w!==void 0&&w>u&&(w<m||m<u)?$:m!==void 0&&m>u&&(m<w||w<u)?f:1e8;c=hl(M,re,je,.1,j,1)}return c==null&&(this.cache.inversionFail=!0),(o.traversedVariables??[]).forEach(M=>this.cache._meta.traversedVariablesStack[0].add(M)),{...e,nodeValue:c,unit:t.unit,explanation:{...e.explanation,inversionGoal:n,numberOfIteration:a},missingVariables:o.missingVariables}},Sg=(e,r)=>{if(!e.avec)throw new L("SyntaxError","Une formule d'inversion doit prÃ©ciser _avec_ quoi on peut inverser la variable",{dottedName:r.dottedName});return{explanation:{ruleToInverse:r.dottedName,inversionCandidates:e.avec.map(n=>({...N(n,r)}))},nodeKind:"inversion"}};de("inversion",Vg);var Ig=on("le maximum de",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({condition:{si:{"est non applicable":"$INTERNAL valeur"},alors:"$INTERNAL acc",sinon:{condition:{si:{ou:[{"est non applicable":"$INTERNAL acc"},{">":["$INTERNAL valeur","$INTERNAL acc"]}]},alors:"$INTERNAL valeur",sinon:"$INTERNAL acc"}}},avec:{"[privÃ©] $INTERNAL valeur":n,"[privÃ©] $INTERNAL acc":r}}),xr)),qg=on("le minimum de",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({condition:{si:{"est non applicable":"$INTERNAL valeur"},alors:"$INTERNAL acc",sinon:{condition:{si:{ou:[{"est non applicable":"$INTERNAL acc"},{"<":["$INTERNAL valeur","$INTERNAL acc"]}]},alors:"$INTERNAL valeur",sinon:"$INTERNAL acc"}}},avec:{"[privÃ©] $INTERNAL valeur":n,"[privÃ©] $INTERNAL acc":r}}),xr));function Ba(e){return e.reverse().reduce((r,n)=>({"+":[n,r]}),xr)}var Ng=on("somme",{valeur:{type:"liste"}},({valeur:e})=>Ba([...e])),Rg=on("moyenne",{valeur:{type:"liste"}},({valeur:e})=>{const r=[...e];return{"/":[Ba(r),Ba(r.map(Tg))]}});function Tg(e){return{"applicable si":{"est applicable":e},valeur:1}}var Dg=nr("non applicable si",{"non applicable si":{},valeur:{}},{condition:{si:"non applicable si = non",alors:"valeur",sinon:xr}}),Bg=(e,r)=>(Array.isArray(e)&&(e={possibilitÃ©s:e}),{...e,explanation:e.possibilitÃ©s.map(n=>N(n,r)),context:r.dottedName,nodeKind:"une possibilitÃ©"});de("une possibilitÃ©",e=>({...e,missingVariables:{[e.context]:1},nodeValue:void 0}));var gl={"*":[(e,r)=>e*r,"Ã"],"/":[(e,r)=>e/r,"â"],"+":[(e,r)=>e+r],"-":[(e,r)=>e-r,"â"],"<":[(e,r)=>e<r],"<=":[(e,r)=>e<=r,"â¤"],">":[(e,r)=>e>r],">=":[(e,r)=>e>=r,"â¥"],"=":[(e,r)=>(e??!1)===(r??!1)],"!=":[(e,r)=>(e??!1)!==(r??!1),"â "],et:[(e,r)=>(e??!1)&&(r??!1)],ou:[(e,r)=>(e??!1)||(r??!1)]},Lg=(e,r)=>(n,t)=>{const a=n.map(o=>N(o,t));return{...n,nodeKind:"operation",operationKind:e,operator:r||e,explanation:a}},Fg=function(e){let r=this.evaluateNode(e.explanation[0]),n={...e,missingVariables:{}};if(r.nodeValue===null&&["<",">","<=",">=","/","*","-","et"].includes(e.operationKind)||r.nodeValue===0&&["/","*"].includes(e.operationKind)||r.nodeValue===!1&&e.operationKind==="et"||r.nodeValue===!0&&e.operationKind==="ou")return{...n,nodeValue:e.operationKind==="et"?!1:r.nodeValue,missingVariables:r.missingVariables};let t=this.evaluateNode(e.explanation[1]);if(n.explanation=[r,t],e.operationKind==="/"&&t.nodeValue===0)throw new L("EvaluationError","Division by zero",{dottedName:this.cache._meta.evaluationRuleStack[0]});if(t.nodeValue===null&&["<",">","<=",">=","/","*","et"].includes(e.operationKind)||t.nodeValue===0&&["*"].includes(e.operationKind)||t.nodeValue===!1&&e.operationKind==="et"||t.nodeValue===!0&&e.operationKind==="ou")return{...n,nodeValue:e.operationKind==="et"?!1:t.nodeValue,missingVariables:t.missingVariables};n.missingVariables=Te([r,t]),(r.nodeValue===void 0||t.nodeValue===void 0)&&(n={...n,nodeValue:void 0});const a=["+","-"].includes(e.operationKind)&&Je(t.unit)==="%"&&Je(r.unit)!=="%";if(!("nodeValue"in n)&&!["/","*"].includes(e.operationKind)&&!a)try{r.unit&&"unit"in t?t=Ir(r.unit,t):t.unit&&(r=Ir(t.unit,r))}catch(c){Jt(this.context.logger,`Dans l'expression '${e.operationKind}', la partie gauche (unitÃ©: ${Je(r.unit)}) n'est pas compatible avec la partie droite (unitÃ©: ${Je(t.unit)})`,{dottedName:this.cache._meta.evaluationRuleStack[0]},c)}const o=gl[e.operationKind][0],s=r.nodeValue,u=t.nodeValue;if(n.nodeValue="nodeValue"in n?n.nodeValue:["<",">","<=",">=","*","/"].includes(e.operationKind)&&t.nodeValue===null?null:[s,u].every(c=>typeof c=="string"&&c.match?.(/^[\d]{2}\/[\d]{2}\/[\d]{4}$/))?o(Na(s),Na(u)):o(s,u),e.operationKind==="*"&&cr("*",[r.unit,t.unit])?.numerators.includes("%")){let c=cr("*",[r.unit,t.unit]);const f=n.nodeValue;return{...n,nodeValue:typeof f=="number"?f/100:f,unit:cr("*",[c,{numerators:[],denominators:["%"]}])}}if(a){let c=cr("*",[r.unit,t.unit]);return{...n,nodeValue:typeof r.nodeValue=="number"&&typeof t.nodeValue=="number"?r.nodeValue*(1+t.nodeValue/100*(e.operationKind==="-"?-1:1)):n.nodeValue,unit:cr("*",[c,{numerators:[],denominators:["%"]}])}}return e.operationKind==="*"||e.operationKind==="/"||e.operationKind==="-"||e.operationKind==="+"?{...n,unit:cr(e.operationKind,[r.unit,t.unit])}:n};de("operation",Fg);var Ug=Object.fromEntries(Object.entries(gl).map(([e,[r,n]])=>[e,Lg(e,n)])),Hg=Ug,zg=nr("par dÃ©faut",{"par dÃ©faut":{},valeur:{}},{condition:{si:{"est non dÃ©fini":"valeur"},alors:"par dÃ©faut",sinon:"valeur"}}),Jg=nr("plafond",{plafond:{},valeur:{}},{condition:{si:{et:["plafond != non","valeur > plafond"]},alors:"plafond",sinon:"valeur"}}),Wg=nr("plancher",{plancher:{},valeur:{}},{condition:{si:{et:["plancher != non","valeur < plancher"]},alors:"plancher",sinon:"valeur"}}),Ho=nr("produit",{assiette:{},taux:{"par dÃ©faut":"100%"},facteur:{"par dÃ©faut":1},plafond:{"par dÃ©faut":xr}},{"*":[{"*":["taux","facteur"]},{valeur:"assiette",plafond:"plafond"}],"simplifier l'unitÃ©":"oui"}),Kg=function(e){if(this.cache._meta.currentRecalcul===e.explanation.recalculNode)return{...xr,...e};const r=Object.fromEntries(e.explanation.amendedSituation.filter(([a,o])=>{const s=this.evaluateNode(a),u=this.evaluateNode(o);return s.nodeValue!==u.nodeValue||Je(s.unit)!==Je(u.unit)}).map(([a,o])=>[a.dottedName,o]));let n=this;Object.keys(r).length&&(n=this.shallowCopy().setSituation(r,{keepPreviousSituation:!0}),n.subEngineId=this.subEngines.length,Object.values(r).forEach(a=>n.cache.nodes.set(a,this.evaluate(a))),this.subEngines.push(n)),n.cache._meta.currentRecalcul=e.explanation.recalculNode;const t=n.evaluateNode(e.explanation.recalculNode);return delete n.cache._meta.currentRecalcul,{...e,nodeValue:t.nodeValue,explanation:{...e.explanation,recalcul:t,subEngineId:n.subEngineId},missingVariables:t.missingVariables,..."unit"in t&&{unit:t.unit}}},Gg=(e,r)=>{const n=Object.keys(e.avec).map(a=>[N(a,r),N(e.avec[a],r)]);return{explanation:{recalculNode:N(e.rÃ¨gle??r.dottedName,r),amendedSituation:n},nodeKind:"recalcul"}};de("recalcul",Kg);var Qg=function(e){if(this.cache._meta.evaluationRuleStack.slice(1).includes(e.explanation.ruleToSolve))return{...Nt,...e};let r=0;const n=this.shallowCopy();n.cache._meta.parentRuleStack=[...this.cache._meta.parentRuleStack],n.cache._meta.evaluationRuleStack=[...this.cache._meta.evaluationRuleStack];const t=this.context.inversionMaxIterations??25,a=m=>(r++,n.setSituation({[e.explanation.ruleToSolve]:{...Nt,nodeValue:m}},{keepPreviousSituation:!0}),n.evaluateNode(e.explanation.valeur)),o=Symbol("inversion failed");let s=o;const u=1;let c=a(u);const f=c.nodeValue,p=c.unit;return f!==void 0&&(s=hl(k=>k===u?f-u:(c=a(k),c.nodeValue-k),-1e6,1e8,.5,t,2)),s===o&&(s=void 0,this.cache.inversionFail=!0),s!==void 0&&(c=a(s)),{...e,unit:p,nodeValue:s,explanation:{...e.explanation,valeur:c,numberOfIterations:r},missingVariables:c.missingVariables}};function kl(e,r){return{explanation:{ruleToSolve:r.dottedName,valeur:N(e.valeur,r)},nodeKind:"rÃ©soudre rÃ©fÃ©rence circulaire"}}kl.nom="rÃ©soudre la rÃ©fÃ©rence circulaire";de("rÃ©soudre rÃ©fÃ©rence circulaire",Qg);function wl(e,r){return{explanation:N(e.valeur,r),nodeKind:"simplifier unitÃ©"}}wl.nom="simplifier l'unitÃ©";de("simplifier unitÃ©",function(r){const n=this.evaluateNode(r.explanation),t=n.nodeValue,a={...n,...r,explanation:n};if(t==null)return a;if(!n.unit)return{...a,unit:n.unit};const o=tl(n.unit);return{...a,nodeValue:typeof t=="number"?Hn(n.unit,o,t):t,unit:o}});var Zg=nr("dans la situation",{valeur:{},"dans la situation":{}},{condition:{si:{"est non dÃ©fini":"dans la situation"},alors:"valeur",sinon:"dans la situation"}});function Yg(e,r){return{explanation:{assiette:N(e.assiette,r),multiplicateur:e.multiplicateur?N(e.multiplicateur,r):or(1),tranches:Mi(e.tranches,r)},nodeKind:"taux progressif"}}var Xg=function(e){const r=this.evaluateNode.bind(this),n=this.evaluateNode(e.explanation.assiette),t=this.evaluateNode(e.explanation.multiplicateur);if(t.nodeValue===0)throw new L("EvaluationError","Division by zero",{dottedName:""});const a=Oi.call(this,{parsedTranches:e.explanation.tranches,assiette:n,multiplicateur:t}),o={...e,explanation:{tranches:a,assiette:n,multiplicateur:t},unit:Pr("%")},s=a[a.length-1];if(a.every(({isActive:A})=>A===!1)||s.isActive&&s.plafond.nodeValue===1/0){const A=Ir(Pr("%"),r(s.taux)),{nodeValue:F,missingVariables:re}=A;return s.taux=A,s.nodeValue=F,s.missingVariables=re,{...o,nodeValue:F,missingVariables:re}}if(a.every(({isActive:A})=>A!==!0)||typeof n.nodeValue!="number")return{...o,nodeValue:void 0,missingVariables:Te(a)};const u=a.findIndex(({isActive:A})=>A===!0),c=a[u];c.taux=Ir(Pr("%"),r(c.taux));const f=a[u-1];f&&(f.taux=Ir(Pr("%"),r(f.taux)),f.isActive=!0);const p=f?f.taux:c.taux,m=[p,c.taux];if(m.some(A=>A.nodeValue===void 0))return c.nodeValue=void 0,{...o,nodeValue:void 0,missingVariables:Te(m)};const v=p.nodeValue,$=c.taux.nodeValue,k=c.plancherValue,w=c.plafondValue,j=($-v)/(w-k),M=v+(n.nodeValue-k)*j;return c.nodeValue=M,{...o,nodeValue:M,missingVariables:{}}};de("taux progressif",Xg);var Vi="texte";function La(e,r){const n=[];let t=0;for(const{0:a,index:o}of e.matchAll(/{{(.|\n)*?}}/g)){const s=a.slice(2,-2).trim(),u=N(s,r);n.push(e.substring(t,o),u),t=(o??0)+a.length}return n.push(e.slice(t)),{nodeKind:Vi,explanation:n}}La.nom=Vi;de(Vi,function(r){const n=r.explanation.map(t=>typeof t=="string"?t:this.evaluateNode(t));return{...r,explanation:n,missingVariables:Te(r.explanation.filter(t=>typeof t!="string")),nodeValue:n.map(t=>typeof t=="string"?t:og(t)).join("")}});var e0=on("toutes ces conditions",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({et:[r,n]}),"oui")),r0=on("une de ces conditions",{valeur:{type:"liste"}},({valeur:e})=>e.reduce((r,n)=>({ou:[r,n]}),"non"));function Qt(e,r){const n=N(e.valeur,r),t=Pr(e.unitÃ©,r.getUnitKey);return{explanation:n,unit:t,nodeKind:Qt.nom}}Qt.nom="unitÃ©";de(Qt.nom,function(r){const n=this.evaluateNode(r.explanation);let t=n.nodeValue;if(t!==null&&"unit"in r)try{t=Hn(n.unit,r.unit,n.nodeValue)}catch(a){Jt(this.context.logger,"Erreur lors de la conversion d'unitÃ© explicite",{dottedName:this.cache._meta.evaluationRuleStack[0]},a)}return{...r,nodeValue:t,explanation:n,missingVariables:n.missingVariables}});function Zt(e,r){return{missingVariable:e["variable manquante"],nodeKind:Zt.nom,explanation:N(e.valeur,r)}}Zt.nom="variable manquante";de(Zt.nom,function(r){const n=this.evaluateNode(r.explanation),t=Object.values(n.missingVariables).reduce((a,o)=>a>o?a:o,0);return{...r,nodeValue:n.nodeValue,unit:n.unit,explanation:n,missingVariables:Rr(n.missingVariables,{[r.missingVariable]:t+1})}});var n0=(e,r,n)=>{if(e==="valeur")return N(r,n);const{variations:t,...a}=r;return N({variations:t.map(({alors:s,sinon:u,si:c})=>{const{attributs:f,...p}=s??u;return{[s!==void 0?"alors":"sinon"]:{...f,[e]:{...a,...p}},...c!==void 0&&{si:c}}})},n)};function t0(e,r){return{explanation:e.map(({si:t,alors:a,sinon:o})=>o!==void 0?{consequence:N(o,r),condition:or(!0)}:{consequence:N(a,r),condition:N(t,r)}),nodeKind:"variations"}}var a0=function(e){const[r,n,t]=e.explanation.reduce(([a,o,s,u],{condition:c,consequence:f},p)=>{if(u===!0)return[a,[...o,{condition:c,consequence:f}],s,u];const m=this.evaluateNode(c),v=u===void 0?u:!u&&(m.nodeValue===void 0?void 0:m.nodeValue!==!1&&m.nodeValue!==null);if(v===!1||v===null)return[a,[...o,{condition:m,consequence:f}],s,u];let $;if(m.nodeValue!==!1&&m.nodeValue!==null&&($=this.evaluateNode(f),s))try{$=Ir(s,$)}catch(k){Jt(this.context.logger,`L'unitÃ© de la branche nÂ° ${p+1} du mÃ©canisme 'variations' n'est pas compatible avec celle d'une branche prÃ©cÃ©dente`,{dottedName:this.cache._meta.evaluationRuleStack[0]},k)}return[v&&$?.nodeValue,[...o,{condition:m,consequence:$??f}],s||$?.unit,u||v]},[null,[],void 0,!1]);return{...e,nodeValue:r,...t!==void 0&&{unit:t},explanation:n,missingVariables:n.reduce((a,{condition:o,consequence:s})=>Rr(a,Rr(Zu(o.missingVariables),"nodeValue"in o&&o.nodeValue!==!1&&o.nodeValue!==null?s.missingVariables:{})),{})}};de("variations",a0);var i0=Wu(mh(),1),tt=([e,,r,,n])=>({[r.value.toLowerCase()]:[e,n]}),o0=([e,,r])=>({[e]:[Hr([{value:"0"}]),r]}),s0=({value:e})=>({variable:e}),zo=([{value:e}])=>{console.log(e)},Hr=([{value:e}])=>({constant:{type:"number",nodeValue:parseFloat(e)}}),u0=e=>({...Hr(e),unitÃ©:e[2].value}),Jo=([{value:e}])=>({constant:{type:"date",nodeValue:sl(e)}}),sa=([{value:e}])=>({constant:{type:"boolean",nodeValue:e==="oui"}}),Wo=([{value:e}])=>({constant:{type:"string",nodeValue:e.slice(1,-1)}}),l0=Wu(ph(),1);function se(e){return e[0]}var c0="(?:(?:0?[1-9]|[12][0-9]|3[01])\\/)?(?:0?[1-9]|1[012])\\/\\d{4}",m0="[a-zA-ZÃ-Å¿â¬$%]",p0="[a-zA-ZÃ-Å¿0-9',Â°]",Fa=`${m0}(?:[-']?${p0}+)*`,f0="-?(?:[1-9][0-9]+|[0-9])(?:\\.[0-9]+)?",X=l0.default.compile({"(":"(",")":")","[":"[","]":"]",comparison:[">","<",">=","<=","=","!="],date:new RegExp(c0),boolean:["oui","non"],number:new RegExp(f0),word:new RegExp(Fa),string:[/'.*'/,/".*"/],JSONObject:/{.*}/,additionSubstraction:/[\+-]/,multiplicationDivision:["*","/"],dot:" . ",".":".",space:{match:/[\s]+/,lineBreaks:!0}}),hn=e=>({value:e.map(r=>r&&r.value).join("")}),at=([e,r])=>Array.isArray(r)?hn([e,...r]):e,d0=X,$0=[{name:"main",symbols:["Comparison"],postprocess:se},{name:"main",symbols:["NumericValue"],postprocess:se},{name:"main",symbols:["Date"],postprocess:se},{name:"main",symbols:["NonNumericTerminal"],postprocess:se},{name:"main",symbols:["JSONObject"],postprocess:se},{name:"NumericValue",symbols:["AdditionSubstraction"],postprocess:se},{name:"NumericValue",symbols:["Negation"],postprocess:se},{name:"NumericTerminal",symbols:["Variable"],postprocess:se},{name:"NumericTerminal",symbols:["number"],postprocess:se},{name:"Negation",symbols:[{literal:"-"},X.has("space")?{type:"space"}:space,"Parentheses"],postprocess:o0},{name:"Parentheses",symbols:[{literal:"("},X.has("space")?{type:"space"}:space,"NumericValue",X.has("space")?{type:"space"}:space,{literal:")"}],postprocess:([,,e])=>e},{name:"Parentheses",symbols:[{literal:"("},"NumericValue",{literal:")"}],postprocess:([,e])=>e},{name:"Parentheses",symbols:["NumericTerminal"],postprocess:se},{name:"Date",symbols:["Variable"],postprocess:se},{name:"Date",symbols:[X.has("date")?{type:"date"}:Jo],postprocess:Jo},{name:"Comparison",symbols:["Comparable",X.has("space")?{type:"space"}:space,X.has("comparison")?{type:"comparison"}:comparison,X.has("space")?{type:"space"}:space,"Comparable"],postprocess:tt},{name:"Comparison",symbols:["Date",X.has("space")?{type:"space"}:space,X.has("comparison")?{type:"comparison"}:comparison,X.has("space")?{type:"space"}:space,"Date"],postprocess:tt},{name:"Comparable$subexpression$1",symbols:["AdditionSubstraction"]},{name:"Comparable$subexpression$1",symbols:["NonNumericTerminal"]},{name:"Comparable",symbols:["Comparable$subexpression$1"],postprocess:([[e]])=>e},{name:"NonNumericTerminal",symbols:[X.has("boolean")?{type:"boolean"}:sa],postprocess:sa},{name:"NonNumericTerminal",symbols:[X.has("string")?{type:"string"}:Wo],postprocess:Wo},{name:"Variable$ebnf$1",symbols:[]},{name:"Variable$ebnf$1$subexpression$1",symbols:[X.has("dot")?{type:"dot"}:dot,"Words"],postprocess:hn},{name:"Variable$ebnf$1",symbols:["Variable$ebnf$1","Variable$ebnf$1$subexpression$1"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Variable",symbols:["Words","Variable$ebnf$1"],postprocess:e=>s0(at(e))},{name:"Words$ebnf$1$subexpression$1$ebnf$1",symbols:[X.has("space")?{type:"space"}:space],postprocess:se},{name:"Words$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Words$ebnf$1$subexpression$1",symbols:["Words$ebnf$1$subexpression$1$ebnf$1","WordOrNumber"],postprocess:hn},{name:"Words$ebnf$1",symbols:["Words$ebnf$1$subexpression$1"]},{name:"Words$ebnf$1$subexpression$2$ebnf$1",symbols:[X.has("space")?{type:"space"}:space],postprocess:se},{name:"Words$ebnf$1$subexpression$2$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Words$ebnf$1$subexpression$2",symbols:["Words$ebnf$1$subexpression$2$ebnf$1","WordOrNumber"],postprocess:hn},{name:"Words$ebnf$1",symbols:["Words$ebnf$1","Words$ebnf$1$subexpression$2"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Words",symbols:["WordOrKeyword","Words$ebnf$1"],postprocess:at},{name:"Words",symbols:[X.has("word")?{type:"word"}:Fa],postprocess:se},{name:"WordOrKeyword",symbols:[X.has("word")?{type:"word"}:Fa],postprocess:se},{name:"WordOrKeyword",symbols:[X.has("boolean")?{type:"boolean"}:sa],postprocess:se},{name:"WordOrNumber",symbols:["WordOrKeyword"],postprocess:se},{name:"WordOrNumber",symbols:[X.has("number")?{type:"number"}:Hr],postprocess:se},{name:"UnitDenominator$ebnf$1$subexpression$1",symbols:[X.has("space")?{type:"space"}:space]},{name:"UnitDenominator$ebnf$1",symbols:["UnitDenominator$ebnf$1$subexpression$1"],postprocess:se},{name:"UnitDenominator$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"UnitDenominator",symbols:["UnitDenominator$ebnf$1",{literal:"/"},"Words"],postprocess:hn},{name:"UnitNumerator$ebnf$1$subexpression$1",symbols:[{literal:"."},"Words"]},{name:"UnitNumerator$ebnf$1",symbols:["UnitNumerator$ebnf$1$subexpression$1"],postprocess:se},{name:"UnitNumerator$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"UnitNumerator",symbols:["Words","UnitNumerator$ebnf$1"],postprocess:at},{name:"Unit$ebnf$1",symbols:["UnitNumerator"],postprocess:se},{name:"Unit$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Unit$ebnf$2",symbols:[]},{name:"Unit$ebnf$2",symbols:["Unit$ebnf$2","UnitDenominator"],postprocess:function(r){return r[0].concat([r[1]])}},{name:"Unit",symbols:["Unit$ebnf$1","Unit$ebnf$2"],postprocess:at},{name:"AdditionSubstraction",symbols:["AdditionSubstraction",X.has("space")?{type:"space"}:space,X.has("additionSubstraction")?{type:"additionSubstraction"}:additionSubstraction,X.has("space")?{type:"space"}:space,"MultiplicationDivision"],postprocess:tt},{name:"AdditionSubstraction",symbols:["MultiplicationDivision"],postprocess:se},{name:"MultiplicationDivision",symbols:["MultiplicationDivision",X.has("space")?{type:"space"}:space,X.has("multiplicationDivision")?{type:"multiplicationDivision"}:multiplicationDivision,X.has("space")?{type:"space"}:space,"Parentheses"],postprocess:tt},{name:"MultiplicationDivision",symbols:["Parentheses"],postprocess:se},{name:"number",symbols:[X.has("number")?{type:"number"}:Hr],postprocess:Hr},{name:"number$ebnf$1$subexpression$1",symbols:[X.has("space")?{type:"space"}:space]},{name:"number$ebnf$1",symbols:["number$ebnf$1$subexpression$1"],postprocess:se},{name:"number$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"number",symbols:[X.has("number")?{type:"number"}:Hr,"number$ebnf$1","Unit"],postprocess:u0},{name:"JSONObject",symbols:[X.has("JSONObject")?{type:"JSONObject"}:zo],postprocess:zo}],v0="main",b0={Lexer:d0,ParserRules:$0,ParserStart:v0},{Grammar:h0,Parser:g0}=i0.default,k0=h0.fromCompiled(b0),Ua=new g0(k0),w0=Ua.save();function _0(e,r){const n=(e+"").replace(/\s*\n\s*/g," ").trim();try{Ua.restore(w0);const[t]=Ua.feed(n).results;if(t==null)throw new L("InternalError",`
Un problÃ¨me est survenu lors du parsing de l'expression \`${n}\` :

	le parseur Nearley n'a pas rÃ©ussi Ã  parser l'expression.
`,{dottedName:r});return t}catch(t){throw t instanceof L?t:new L("SyntaxError",`\`${n}\` n'est pas une expression valide`,{dottedName:r},t)}}function y0(e,r){if(!r.dottedName)throw new Un({message:"Une rÃ©fÃ©rence ne peut pas exister en dehors d'une rÃ¨gle (`context.dottedName` est vide)",context:r});return{nodeKind:"reference",name:e,contextDottedName:r.dottedName}}de("reference",function(r){if(!r.dottedName)throw new Un(r);const n=this.evaluateNode(this.context.parsedRules[r.dottedName]);return delete n.sourceMap,{...n,...r}});function N(e,r){if(e==null)throw new L("SyntaxError",`
	Une des valeurs de la formule est vide.
	VÃ©rifiez que tous les champs Ã  droite des deux points sont remplis`,{dottedName:r.dottedName});if(typeof e=="boolean")throw new L("SyntaxError",`
Les valeurs boolÃ©ennes true / false ne sont acceptÃ©es.
Utilisez leur contrepartie franÃ§aise : 'oui' / 'non'`,{dottedName:r.dottedName});const n=typeof e=="object"?e:_0(e,r.dottedName);return"nodeKind"in n?n:"nom"in n?Cg(n,r):{...x0(n,r),rawNode:e}}function Ko(e,r){if(Array.isArray(e))throw new L("SyntaxError",`
Il manque le nom du mÃ©canisme pour le tableau : [${e.map(s=>`'${s}'`).join(", ")}]
Les mÃ©canisme possibles sont : 'somme', 'le maximum de', 'le minimum de', 'toutes ces conditions', 'une de ces conditions'.
		`,{dottedName:r.dottedName});const n=Object.keys(e);if(n.length>1)throw new L("SyntaxError",`
Les mÃ©canismes suivants se situent au mÃªme niveau : ${n.map(s=>`'${s}'`).join(", ")}
Cela vient probablement d'une erreur dans l'indentation
	`,{dottedName:r.dottedName});if(n.length===0)return{nodeKind:"constant",nodeValue:void 0};const t=n[0],a=e[t],o=yl[t];if(!o)throw new L("SyntaxError",`Le mÃ©canisme "${t}" est inconnu.

VÃ©rifiez qu'il n'y ait pas d'erreur dans l'orthographe du nom.`,{dottedName:r.dottedName});try{return a?.composantes?Kh(t,a,r):a?.variations&&Object.values(a).length>1?n0(t,a,r):o(a,r)}catch(s){throw s instanceof L?s:new L("SyntaxError",t?`â¡ï¸ Dans le mÃ©canisme ${t}
${s.message}`:s.message,{dottedName:r.dottedName})}}var _l=[Zt,il,qh,Dg,Kt,Qt,wl,Wg,Jg,zg,Zg,kl,Ih];function x0(e,r){const n=_l.find(o=>o.nom in e);if(!n)return Ko(e,r);const{[n.nom]:t,...a}=e;return Ko({[n.nom]:{valeur:a,[n.nom]:t}},r)}var yl={...Hg,..._l.reduce((e,r)=>({[r.nom]:r,...e}),{}),"inversion numÃ©rique":Sg,"le maximum de":Ig,"le minimum de":qg,"taux progressif":Yg,"toutes ces conditions":e0,"est non dÃ©fini":ll,"est non applicable":bl,"est applicable":rg,"est dÃ©fini":eg,"une de ces conditions":r0,"une possibilitÃ©":Bg,condition:ol,barÃ¨me:zh,durÃ©e:Xh,grille:Ag,multiplication:Ho,produit:Ho,recalcul:Gg,somme:Ng,moyenne:Rg,[La.nom]:La,valeur:N,variable:y0,variations:t0,constant:e=>({type:e.type,fullPrecision:!0,isNullable:e.nodeValue==null,missingVariables:{},nodeValue:e.nodeValue,nodeKind:"constant"})},j0=Object.keys(yl);function qn(e){return{dottedName:"",logger:console,getUnitKey:r=>r,parsedRules:{},referencesMaps:{referencesIn:new Map,rulesThatUse:new Map},nodesTypes:new WeakMap,rulesReplacements:{},...e}}function ua(e){return{...e,parsedRules:{...e.parsedRules},referencesMaps:{referencesIn:new Map(e.referencesMaps.referencesIn),rulesThatUse:new Map(e.referencesMaps.rulesThatUse)}}}function ft(e,r=qn({})){if(typeof e=="string")throw new L("EngineError","Publicodes does not parse yaml rule sets itself anymore. Please provide a parsed js object. E.g. the `eemeli/yaml` package.",{});let n=Yr(e);const t=qn(r);let a=t.parsedRules;t.parsedRules={};for(const p in n){let m=n[p];if((typeof m=="string"||typeof m=="number")&&(m={valeur:`${m}`}),typeof m!="object")throw new L("SyntaxError",`Rule ${p} is incorrectly written. Please give it a proper value.`,{dottedName:p});const v=Yr(m);v.nom=p,N(v,t)}let o={};for(const p in a)o[p]=a[p];for(const p in t.parsedRules)o[p]=t.parsedRules[p];let[s,u]=E0(o,t.parsedRules,t.referencesMaps),c;[o,c]=jg({parsedRules:o,newRules:s,referencesMaps:u,previousReplacements:t.rulesReplacements,logger:t.logger});const f=Sh(Object.keys(s),o,t.nodesTypes);return{parsedRules:o,nodesTypes:f,referencesMaps:u,rulesReplacements:c}}function E0(e,r,n){const t=qt(s=>Da(s,e)),a=qt(s=>{const u=Da(s,e);return u&&Pi(u,n),u});return[$h(s=>s.nodeKind==="replacementRule"?t(s):a(s),r),n]}var it=()=>({_meta:{evaluationRuleStack:[],parentRuleStack:[],traversedVariablesStack:[]},nodes:new Map}),C0=class xl{constructor(r={},n={}){oe(this,"baseContext");oe(this,"context");oe(this,"publicParsedRules");oe(this,"cache",it());oe(this,"subEngines",[]);oe(this,"subEngineId");oe(this,"checkExperimentalRule",Ku(r=>(r.nodeKind==="reference"&&Ta(this.context.parsedRules,r.dottedName)&&Oo(this.baseContext.logger,r.dottedName),"continue")));const t={dottedName:"",...n};this.baseContext=qn({...t,...ft(r,t)}),this.context=this.baseContext,this.publicParsedRules={};for(const a in this.baseContext.parsedRules){const o=this.baseContext.parsedRules[a];!o.private&&Gt(this.baseContext.parsedRules,"",a)&&(this.publicParsedRules[a]=o)}}resetCache(){this.cache=it()}setSituation(r={},n={}){this.resetCache();const t=n.keepPreviousSituation??!1;Object.keys(r).forEach(s=>{if(!(s in this.baseContext.parsedRules))throw new L("EvaluationError",`Erreur lors de la mise Ã  jour de la situation : ${s} n'existe pas dans la base de rÃ¨gle.`,{dottedName:s});if(this.baseContext.parsedRules[s].private)throw new L("EvaluationError",`Erreur lors de la mise Ã  jour de la situation : ${s} est une rÃ¨gle privÃ©e (il n'est pas possible de modifier une rÃ¨gle privÃ©e).`,{dottedName:s})});const a=Object.fromEntries(Object.entries(r).map(([s,u])=>[`[privÃ©] ${s} . $SITUATION`,u&&typeof u=="object"&&"nodeKind"in u?{valeur:u}:u])),o=ua(this.baseContext);try{this.context={...this.baseContext,...ft(a,t?this.context:this.baseContext)}}catch(s){throw this.baseContext=o,s}return this.baseContext=o,Object.keys(r).forEach(s=>{Ta(this.context.parsedRules,s)&&Oo(this.baseContext.logger,s),this.checkExperimentalRule(this.context.parsedRules[`${s} . $SITUATION`])}),this}inversionFail(){return!!this.cache.inversionFail}getRule(r){if(!(r in this.baseContext.parsedRules))throw new L("UnknownRule",`La rÃ¨gle '${r}' n'existe pas`,{dottedName:r});if(!(r in this.publicParsedRules))throw new L("PrivateRule",`La rÃ¨gle ${r} est une rÃ¨gle privÃ©e.`,{dottedName:r});return this.publicParsedRules[r]}getParsedRules(){return this.publicParsedRules}evaluate(r){const n=this.cache.nodes.get(r);if(n)return n;this.context={...this.context,...ft({"[privÃ©] $EVALUATION":r&&typeof r=="object"&&"nodeKind"in r?{valeur:r}:r},this.context)},this.checkExperimentalRule(this.context.parsedRules.$EVALUATION),this.cache._meta=it()._meta;const t=this.evaluateNode(this.context.parsedRules.$EVALUATION.explanation.valeur);return this.cache.nodes.set(r,t),t}evaluateNode(r){const n=this.cache.nodes.get(r);if(n!==void 0)return n.traversedVariables?.forEach(o=>this.cache._meta.traversedVariablesStack[0]?.add(o)),n;if(!xn[r.nodeKind])throw new L("EvaluationError",`Unknown "nodeKind": ${r.nodeKind}`,{dottedName:""});const t=this.cache._meta.traversedVariablesStack.length===0||r.nodeKind==="rule";t&&this.cache._meta.traversedVariablesStack.unshift(new Set),r.nodeKind==="reference"&&r.dottedName&&r.dottedName in this.publicParsedRules&&this.cache._meta.traversedVariablesStack[0].add(r.dottedName);const a=xn[r.nodeKind].call(this,r);return t&&(a.traversedVariables=Array.from(this.cache._meta.traversedVariablesStack.shift()??[]),this.cache._meta.traversedVariablesStack.length>0&&a.traversedVariables.forEach(o=>{this.cache._meta.traversedVariablesStack[0].add(o)})),this.cache.nodes.set(r,a),a}shallowCopy(){const r=new xl;return r.baseContext=ua(this.baseContext),r.context=ua(this.context),r.publicParsedRules=this.publicParsedRules,r.cache={...it(),nodes:new Map(this.cache.nodes)},r}};class M0 extends C0{constructor(n,t){super(n);oe(this,"elmApp");this.elmApp=t}setSituation(n,t){return this.elmApp.ports.situationUpdated.send(null),super.setSituation(n,t)}evaluateAll(n){const t=n.map(a=>{const o=super.evaluate(a);return[a,{nodeValue:o.nodeValue??null,isNullable:o?.isNullable??o?.explanation?.ruleDisabledByItsParent??!1,missingVariables:Object.keys(o.missingVariables)}]});return this.elmApp.ports.evaluatedRules.send(t),t}}const O0={titre:"Alimentation",icÃ´nes:"ð½ï¸",formule:{somme:["repas","petits dÃ©jeuners","boissons","ecocups","dÃ©chets","artistes"]},unitÃ©:"kgCO2e",description:`C'est l'un des postes d'Ã©missions les plus importants : l'impact des repas carnÃ©s est particuliÃ¨rement important, 
privilÃ©giez une **proposition vÃ©gÃ©tarienne** pour vos repas.
Cette catÃ©gorie inclut Ã©galement l'impact des **dÃ©chets** gÃ©nÃ©rÃ©s par la restauration du festival.
`,note:`A ajouter dans une V2 ?
  - Part de nourriture bio sur l'ensemble des repas
  - Part de nourriture de saison sur l'ensemble des repas
  - Part de nourriture locale sur l'ensemble des repas
  - Prise en compte du gaspillage ?
`},A0={titre:"Communication",icÃ´nes:"ð¢",description:`Ce poste d'Ã©mission inclut l'impact de liÃ©e Ã  la communication du festival, incluant le textile, le merchandising, les supports numÃ©riques et les impressions.
Pour le moment, seuls les impacts du **textile pour les Ã©quipes** et le **merchandising** sont pris en compte.
`,formule:{somme:["merchandising","textile bÃ©nÃ©voles","numÃ©rique","impressions"]},unitÃ©:"kgCO2e"},P0={titre:"Informations",icÃ´nes:"â¹ï¸",description:`Pour calculer l'empreinte carbone de votre festival, nous avons besoin de quelques informations sur celui-ci.
Renseignez la **durÃ©e** de l'Ã©vÃ¨nement, le total des **entrÃ©es** journaliÃ¨res, le nombre d'**organisateurs et bÃ©nÃ©voles**, le nombre de **scÃ¨nes**.

*Essayez Ã©galement d'estimer le nombre d'**artistes (Ã©quipe incluse)** par mode de transport.*
`},V0={titre:"Infrastructures",icÃ´nes:"ðï¸",description:`Ce poste d'Ã©mission inclut l'impact des **bÃ¢timents** et de la **scÃ©nographie** du festival. 
Pour le moment, il est possible de paramÃ©trer seulement les **dÃ©penses** liÃ©es Ã  la location du matÃ©riel.
`,formule:{somme:["bÃ¢timents","scÃ©nographie","toilettes"]},unitÃ©:"kgCO2e"},S0={titre:"RÃ©sultats"},I0={titre:"Transport",icÃ´nes:"ð",formule:{somme:["public","artistes"]},description:`Le transport des festivaliers et des artistes est **LE** poste important du bilan carbone d'un festival. 
Estimez les distances parcourues par les festivaliers et les artistes pour venir au festival et les modes de transport utilisÃ©s.

*L'**avion** est de loin le mode de transport le plus Ã©metteur de CO2e, mais la **voiture** n'est pas en reste. Encouragez le train ou le covoiturage pour vos dÃ©placements.*
`,unitÃ©:"kgCO2e"},q0=null,N0=null,jl={alimentation:O0,"alimentation . artistes":{titre:"Alimentation des artistes",formule:{somme:["repas","petits dÃ©jeuners","eau en bouteille"]},note:`Par dÃ©faut, on considÃ¨re que les artistes consomment un repas sur place, un petit dÃ©jeuner s'ils sont hÃ©bergÃ©s.
`},"alimentation . artistes . repas":{formule:{recalcul:{rÃ¨gle:"alimentation . repas",avec:{"informations . nombre de repas total":"informations . nombre artistes * 1 repas","alimentation . repas . proposition":"alimentation . artistes . repas . type"}}}},"alimentation . artistes . repas . type":{titre:"RÃ©gime alimentaire des artistes",question:"Quelle type de rÃ©gime alimentaire prÃ©voyez-vous pour les artistes ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["vÃ©gÃ©talien","vÃ©gÃ©tarien","mixte vÃ©gÃ© viande","viande uniquement"]}},"par dÃ©faut":"'mixte vÃ©gÃ© viande'"},"alimentation . artistes . repas . type . vÃ©gÃ©talien":{titre:"Uniquement vÃ©gan"},"alimentation . artistes . repas . type . vÃ©gÃ©tarien":{titre:"Uniquement vÃ©gÃ©tarien"},"alimentation . artistes . repas . type . mixte vÃ©gÃ© viande":{titre:"Mixte vÃ©gÃ©tarien / viande"},"alimentation . artistes . repas . type . viande uniquement":{titre:"Uniquement carnÃ©"},"alimentation . artistes . petits dÃ©jeuners":{"applicable si":"hÃ©bergement . artistes prÃ©sent",formule:{recalcul:{rÃ¨gle:"alimentation . petits dÃ©jeuners",avec:{"alimentation . petits dÃ©jeuners . nombre":"informations . nombre artistes * 1 repas"}}}},"alimentation . artistes . eau en bouteille":{"applicable si":"eau en bouteille prÃ©sent",formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte",note:`On fait l'hypothÃ¨se que les artistes consomment de l'eau en bouteille.
Si eau en bouteille: 0.27 kgCO2e/l
`},"alimentation . artistes . eau en bouteille prÃ©sent":{titre:"Eau en bouteille pour les artistes",question:"Allez-vous prÃ©voir de l'eau en bouteille pour les artistes ?","par dÃ©faut":"oui"},"alimentation . artistes . eau en bouteille . quantitÃ©":{formule:"0.5 l * informations . nombre artistes"},"nosgestesclimat . alimentation . boisson . tasse de cafÃ©":{titre:"Empreinte d'une tasse de cafÃ©",formule:"empreinte cafÃ© moulu * quantitÃ© cafÃ© par tasse",unitÃ©:"kgCO2e/tasse",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de cafÃ© . empreinte cafÃ© moulu":{formule:10.09,unitÃ©:"kgCO2e/kg",note:"Facteur d'Ã©mission issu d'[Agibalyse, cafÃ© moulu](https://agribalyse.ademe.fr/app/aliments/18003#Caf%C3%A9,_moulu).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de cafÃ© . quantitÃ© cafÃ© par tasse":{formule:.012,unitÃ©:"kg/tasse",note:"on fait l'hypothÃ¨se qu'une tasse de cafÃ© contient en moyenne 12 grammes de cafÃ© moulu.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ©":{titre:"Empreinte d'une tasse de thÃ©",formule:"empreinte thÃ© infusÃ© sans consommation * quantitÃ© thÃ© par tasse",unitÃ©:"kgCO2e/tasse",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . empreinte thÃ© infusÃ© sans consommation":{formule:"empreinte thÃ© infusÃ© * (1 - part consommation empreinte thÃ© infusÃ©)",unitÃ©:"kgCO2e/kg",note:`Pour l'empreinte d'une tasse de cafÃ© ou chocolat chaud, la part liÃ©e Ã  la consommation (chauffage de l'eau notamment) n'est pas prise en compte dans le facteur d'Ã©mission
ce qui n'est pas le cas du facteur d'Ã©mission du thÃ© issu d'Agribalyse. Si la boisson est bue Ã  domicile, la consommation est dÃ©jÃ  incluse dans la facture Ã©lectrique du logement.
En revanche, si elle est prise dans un cafÃ©, l'empreinte de la consommation doit Ãªtre ajoutÃ©e.
Nous faisons le choix de ne pas inclure la consommation dans les boissons chaudes
(la part liÃ©e Ã  la consommation Ã©tant nÃ©gligeable pour le cafÃ© et chocolat chaud devant les grains de cafÃ© ou le cacao)
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . quantitÃ© thÃ© par tasse":{formule:.25,unitÃ©:"kg/tasse",note:"On fait l'hypothÃ¨se qu'une tasse de thÃ© fait en moyenne 250 grammes.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . empreinte thÃ© infusÃ©":{formule:.04,unitÃ©:"kgCO2e/kg",note:"Facteur d'Ã©mission issu d'[Agibalyse, thÃ© infusÃ© non sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18020#Th%C3%A9_infus%C3%A9,_non_sucr%C3%A9).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . tasse de thÃ© . part consommation empreinte thÃ© infusÃ©":{formule:"25%",note:`Selon la dÃ©composition issu d'[Agibalyse, thÃ© infusÃ© non sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18020#Th%C3%A9_infus%C3%A9,_non_sucr%C3%A9),
la part de consommation dans le facteur d'Ã©mission du thÃ© reprÃ©sente 25%.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur":{formule:{moyenne:["facteur sodas","facteur jus de fruits"]},note:"Cette valeur est bien sÃ»r trÃ¨s approximative.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur sodas":{formule:.51,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, Cola, sucrÃ©](https://agribalyse.ademe.fr/app/aliments/18037#Cola,_sucr%C3%A9,_avec_%C3%A9dulcorants), 0.51 kgCO2e/kg. On considÃ¨re que la masse volumique est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur jus de fruits":{formule:.91,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, Jus multifruit, pur jus, standard](https://agribalyse.ademe.fr/app/aliments/2069#Jus_multifruit,_%C3%A0_base_de_concentr%C3%A9,_standard), 0.91 kgCO2e/kg. On considÃ¨re que la masse volumique est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur":{formule:{moyenne:["facteur biÃ¨re","facteur vin","facteur cocktail"]},note:"Le vin n'a pas la mÃªme empreinte que la biÃ¨re au litre, c'est une grosse simplification.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur biÃ¨re":{formule:1.12,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, biÃ¨re coeur de marchÃ©](https://agribalyse.ademe.fr/app/aliments/5001#Bi%C3%A8re_%22coeur_de_march%C3%A9%22_(4-5%C2%B0_alcool)), 1.12 kgCO2e/kg. On considÃ¨re que la masse volumique de la biÃ¨re est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur vin":{formule:1.22,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, vin blanc sec](https://agribalyse.ademe.fr/app/aliments/5215#Vin_blanc_sec), 1.22 kgCO2e/kg. On considÃ¨re que la masse volumique du vin est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . alcool . facteur cocktail":{formule:.91,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agribalyse, cocktail base rhum](https://agribalyse.ademe.fr/app/aliments/1012#Cocktail_%C3%A0_base_de_rhum), 0.91 kgCO2e/kg. On considÃ¨re que la masse volumique d'un cocktail est de 1kg/l.",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte":{formule:.27,unitÃ©:"kgCO2e/l",note:"Facteur d'Ã©mission issu d'[Agibalyse, eau embouteillÃ©e de source](https://agribalyse.ademe.fr/app/aliments/18430#Eau_embouteillÃ©e_de_source).",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"alimentation . boissons":{titre:"Boissons",formule:{somme:["froide","chaude"]}},"alimentation . boissons . froide":{formule:{somme:["eau","eau en bouteille bÃ©nÃ©voles","soft","alcool"]},note:"On fait l'hypothÃ¨se que les boissons ne sont pas servies en bouteilles individuelles."},"alimentation . boissons . froide . eau":{formule:"quantitÃ© * empreinte",note:"On fait l'hypothÃ¨se de fontaine Ã  eau."},"alimentation . boissons . froide . eau . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . eau . quantitÃ© par jour":{formule:"0.5 l * informations . nombre de personnes par jour"},"alimentation . boissons . froide . eau . empreinte":{formule:62e-5,unitÃ©:"kgCO2e/l",note:`Facteur d'Ã©mission issu de la base empreinte "Eau potable, mix de provenances".
Si eau en bouteille: 0.27 kgCO2e/l
`},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles":{"applicable si":"eau en bouteille bÃ©nÃ©voles prÃ©sent",formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . eau en bouteille . empreinte"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles prÃ©sent":{titre:"Eau en bouteille pour les Ã©quipes",question:"Allez-vous prÃ©voir de l'eau en bouteille pour les Ã©quipes ?","par dÃ©faut":"oui"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles . quantitÃ© par jour":{formule:"0.5 l/jour * informations . nombre de bÃ©nÃ©voles"},"alimentation . boissons . froide . soft":{formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . sucrÃ©es . facteur",note:`A priori, le facteur d'Ã©mission d'agribalyse considÃ¨re bien une part d'emballage qui correspond Ã  la bouteille. 
On suppose que ce sont des grands formats.
`},"alimentation . boissons . froide . soft . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . soft . quantitÃ© par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour"},"alimentation . boissons . froide . soft . quantitÃ© par jour et par personne":{titre:'QuantitÃ© de boissons "soft" par personne et par jour',question:'Quelle quantitÃ© de boissons "soft" est consommÃ©e par personne et par jour ?',plancher:0,"par dÃ©faut":.5,unitÃ©:"l"},"alimentation . boissons . froide . alcool":{formule:"quantitÃ© * nosgestesclimat . alimentation . boisson . alcool . facteur",note:`On considÃ¨re ici une moyenne de plusieurs types d'alcool dont le facteur d'Ã©mission est nÃ©anmoins trÃ¨s proche.
On pourrait imaginer sÃ©parer la biÃ¨re du reste ouo considÃ©rer seulement la biÃ¨re.
`},"alimentation . boissons . froide . alcool . quantitÃ©":{formule:"quantitÃ© par jour * informations . nombre de jours"},"alimentation . boissons . froide . alcool . quantitÃ© par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour"},"alimentation . boissons . froide . alcool . quantitÃ© par jour et par personne":{titre:"QuantitÃ© d'alcool par personne et par jour",question:"Quelle quantitÃ© d'alcool est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":.5,unitÃ©:"l"},"alimentation . boissons . chaude":{formule:{somme:["cafÃ©","thÃ©"]}},"alimentation . boissons . chaude . cafÃ©":{formule:"nombre * nosgestesclimat . alimentation . boisson . tasse de cafÃ©"},"alimentation . boissons . chaude . cafÃ© . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . boissons . chaude . cafÃ© . nombre par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour",note:"On fait l'hypothÃ¨se qu'en moyenne, la consommation sera de 1 cafÃ© par personne et par jour."},"alimentation . boissons . chaude . cafÃ© . quantitÃ© par jour et par personne":{titre:"Tasses de cafÃ© par personne et par jour",question:"Quelle quantitÃ© de cafÃ© est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":1,unitÃ©:"tasse"},"alimentation . boissons . chaude . thÃ©":{formule:"nombre * nosgestesclimat . alimentation . boisson . tasse de thÃ©"},"alimentation . boissons . chaude . thÃ© . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . boissons . chaude . thÃ© . nombre par jour":{formule:"quantitÃ© par jour et par personne * informations . nombre de personnes par jour",note:"On fait l'hypothÃ¨se qu'en moyenne, la consommation sera de 1 thÃ© pour 10 personnes par jour."},"alimentation . boissons . chaude . thÃ© . quantitÃ© par jour et par personne":{titre:"Tasses de thÃ© par personne et par jour",question:"Quelle quantitÃ© de thÃ© est consommÃ©e par personne et par jour ?",plancher:0,"par dÃ©faut":"10% * 1 tasse",unitÃ©:"tasse"},"alimentation . dÃ©chets":{formule:{somme:["gobelets * surplus","couverts * surplus","assiettes * surplus"]},unitÃ©:"kgCO2e",note:`DerriÃ¨re la production des dÃ©chets, se cache ici une production et non seulement la comptabilitÃ© de l'empreinte de la fin de vie des dÃ©chets 
finalement assez dÃ©risoire. On a donc ici ce que contiendront les poubelles et qui sont des Ã©lÃ©ments directement issus du festival
(vaisselle en cartons, papier).
`},"alimentation . dÃ©chets . surplus":{formule:"110%",note:`L'objectif ici est d'avoir une idÃ©e de l'impact du reste des dÃ©chets du festival en aplicant un facteur correctif (dÃ©fini arbitrairement)
qui a l'avantage de tenir compte des pratiques du festival.
`},"alimentation . dÃ©chets . recyclage":{titre:"Mise en place du tri sÃ©lectif",question:"Allez-vous mettre en place un tri sÃ©lectif et un recyclage des dÃ©chets ?","par dÃ©faut":"non"},"alimentation . dÃ©chets . gobelets":{"non applicable si":"ecocups prÃ©sent",formule:"2 gobelet * informations . nombre de jours * informations . nombre de personnes par jour * empreinte",unitÃ©:"kgCO2e",note:"On considÃ¨re 2 gobelets par personne par jour."},"alimentation . dÃ©chets . gobelets . empreinte":{formule:{variations:[{si:'gobelets . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'gobelets . type = "carton"',alors:"type . carton . poids * empreinte carton par kg"}]},unitÃ©:"kgCO2e/gobelet"},"alimentation . dÃ©chets . gobelets . type":{titre:"Type de gobelets",question:"Quel type de gobelets allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","carton"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . gobelets . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . gobelets . type . plastique . poids":{formule:.01,unitÃ©:"kg/gobelet"},"alimentation . dÃ©chets . gobelets . type . carton":null,"alimentation . dÃ©chets . gobelets . type . carton . poids":{formule:.01,unitÃ©:"kg/gobelet",note:"On considÃ¨re 10g par gobelet."},"alimentation . dÃ©chets . couverts":{formule:"2 couvert/repas * informations . nombre de jours * informations . nombre de repas par jour * empreinte",unitÃ©:"kgCO2e"},"alimentation . dÃ©chets . couverts . empreinte":{formule:{variations:[{si:'couverts . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'couverts . type = "bois"',alors:"type . bois . poids * empreinte bois par kg"}]},unitÃ©:"kgCO2e/couvert"},"alimentation . dÃ©chets . couverts . type":{titre:"Type de couverts",question:"Quel type de couverts allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","bois"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . couverts . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . couverts . type . plastique . poids":{formule:.002,unitÃ©:"kg/couvert"},"alimentation . dÃ©chets . couverts . type . bois":null,"alimentation . dÃ©chets . couverts . type . bois . poids":{formule:.002,unitÃ©:"kg/couvert",note:"On considÃ¨re 2g par couvert."},"alimentation . dÃ©chets . assiettes":{formule:"1 assiette/repas * informations . nombre de jours * informations . nombre de repas par jour * empreinte",unitÃ©:"kgCO2e"},"alimentation . dÃ©chets . assiettes . empreinte":{formule:{variations:[{si:'assiettes . type = "plastique"',alors:"type . plastique . poids * empreinte plastique par kg"},{si:'assiettes . type = "carton"',alors:"type . carton . poids * empreinte carton par kg"}]},unitÃ©:"kgCO2e/assiette"},"alimentation . dÃ©chets . assiettes . type":{titre:"Type d'assiettes",question:"Quel type de gobelets allez-vous utiliser ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["plastique","carton"]}},"par dÃ©faut":"'plastique'"},"alimentation . dÃ©chets . assiettes . type . plastique":{titre:"Plastique jetable"},"alimentation . dÃ©chets . assiettes . type . plastique . poids":{formule:.005,unitÃ©:"kg/assiette"},"alimentation . dÃ©chets . assiettes . type . carton":null,"alimentation . dÃ©chets . assiettes . type . carton . poids":{formule:.005,unitÃ©:"kg/assiette",note:"On considÃ¨re 10g par assiette."},"alimentation . dÃ©chets . empreinte plastique par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re du platisque polypropylÃ¨ne (PP) neuf et l'impact fin de vie.
`},"alimentation . dÃ©chets . empreinte plastique par kg . fabrication":{formule:2,unitÃ©:"kgCO2e/kg",note:`On considÃ¨re du platisque polypropylÃ¨ne (PP) neuf.
FE issus de la base empreinte (PP - polypropylÃ¨ne)
`},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie recyclage":{formule:.434,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Plastique rigide PP bouteilles/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte plastique par kg . fin de vie non recyclÃ©":{formule:2.77,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Plastique pÃ©trosourcÃ© PP/IncinÃ©ration - Impacts)
`},"alimentation . dÃ©chets . empreinte carton par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).
`},"alimentation . dÃ©chets . empreinte carton par kg . fabrication":{formule:.67,unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).

FE issus de la base empreinte (Carton/recyclÃ©)
`},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie recyclage":{formule:.992,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte carton par kg . fin de vie non recyclÃ©":{formule:.12,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/IncinÃ©ration - Impacts)
`},"alimentation . dÃ©chets . empreinte bois par kg":{formule:"fabrication + fin de vie",unitÃ©:"kgCO2e/kg",note:`On considÃ¨re que le carton est recyclÃ© (hypothÃ¨se conservatrice, contrairement Ã  ce qu'on peut penser, 
le carton recyclÃ© est plus impactant que le carton neuf).
`},"alimentation . dÃ©chets . empreinte bois par kg . fabrication":{formule:.67,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Carton/recyclÃ©)
`},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie":{formule:{variations:[{si:"recyclage",alors:"fin de vie recyclage"},{sinon:"fin de vie non recyclÃ©"}]},unitÃ©:"kgCO2e/kg"},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie recyclage":{formule:.992,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/Recyclage - Impacts)
`},"alimentation . dÃ©chets . empreinte bois par kg . fin de vie non recyclÃ©":{formule:.12,unitÃ©:"kgCO2e/kg",note:`FE issus de la base empreinte (Emballages/Carton/IncinÃ©ration - Impacts)
`},"alimentation . ecocups":{"applicable si":"ecocups prÃ©sent",formule:"1 ecocup.jour * informations . nombre de personnes par jour * empreinte / amortissement",unitÃ©:"kgCO2e"},"alimentation . ecocups prÃ©sent":{titre:"Utilisation d'ecocups",question:"Allez-vous utiliser des ecocups pour l'Ã©vÃ©nement ?","par dÃ©faut":"oui"},"alimentation . ecocups . rÃ©utilisation":{titre:"RÃ©utilisation des ecocups",question:"Est-il prÃ©vu de rÃ©utiliser les ecocups pour une autre Ã©dition ?","par dÃ©faut":"non"},"alimentation . ecocups . amortissement":{formule:{variations:[{si:"ecocups . rÃ©utilisation",alors:3},{sinon:1}]},note:"On considÃ¨re que les ecocups servirons sur 3 Ã©ditions."},"alimentation . ecocups . empreinte":{formule:"poids * dÃ©chets . empreinte plastique par kg",unitÃ©:"kgCO2e/ecocup"},"alimentation . ecocups . poids":{formule:.03,unitÃ©:"kg/ecocup"},"nosgestesclimat . alimentation . petit dÃ©jeuner . continental":{titre:"Continental",formule:.289,unitÃ©:"kgCO2e/repas",description:`
> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le \`@incubateur-ademe/nosgestesclimat\`.


Petit dÃ©jeuner avec pain, viennoiserie, beurre, confiture et un fruit.

Voici le menu type utilisÃ© pour notre calcul.

| IngrÃ©dients     | Qte (g) | Kcal  | ProtÃ©ines (g) | Lipides (g) | gCO2e /g | gCO2e |
| --------------- | ------- | ----- | ------------- | ----------- | -------- | ----- |
| Pain            | 50      | 132,5 | 4,5           | 1,6         | 0,67     | 33,5  |
| Vienoiserie     | 50      | 203   | 4             | 10,5        | 1,7      | 85    |
| Beurre demi-sel | 10      | 71,7  | 0,09          | 8,1         | 7,82     | 78,2  |
| Confiture       | 20      | 27,8  | 0,04          | 0,01        | 1,42     | 28,4  |
| Orange          | 100     | 47    | 0,9           | 0,1         | 0,64     | 64    |
| Total           | 230     | 482   | 9,53          | 20,31       |          | 289,1 |
`},"alimentation . petits dÃ©jeuners":{titre:"Petits dÃ©jeuners","applicable si":"petits dÃ©jeuners prÃ©sent",formule:"nombre * nosgestesclimat . alimentation . petit dÃ©jeuner . continental",note:"On considÃ¨re le petits dÃ©jeuner continental de Nos Gestes Climat"},"alimentation . petits dÃ©jeuners prÃ©sent":{titre:"Petits dÃ©jeuners sur l'Ã©vÃ©nement",question:"Proposez-vous des petits dÃ©jeuners sur place ?","par dÃ©faut":"oui"},"alimentation . petits dÃ©jeuners . nombre":{formule:"nombre par jour * informations . nombre de jours"},"alimentation . petits dÃ©jeuners . nombre par jour":{formule:"1 repas * informations . nombre de personnes par jour"},"nosgestesclimat . alimentation . plats . vÃ©gÃ©talien . empreinte":{titre:"Empreinte d'un repas vÃ©gÃ©talien",formule:.785,unitÃ©:"kgCO2e/repas",note:`Pour l'instant, en l'absence de repas type vÃ©gÃ©talien dans la [base carbone](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm),
nous prenons l'empreinte du repas vÃ©gÃ©tarien, dans lequel nous substituons les 2 Åufs par du tofu et des noix dans l'entrÃ©e qui devient alors une salade,
en gardant approximativement les mÃªmes quantitÃ©s de calories et de protÃ©ines.

> Note : on peut se demander pourquoi la recette fait mention d'une omelette aux oignons sans inclure les oignons. NÃ©gligeables ? Nous les avons ajoutÃ©s.

Notons finalement que le tofu considÃ©rÃ© ici pourrait Ãªtre remplacÃ© par du soja franÃ§ais et une fabrication du tofu franÃ§aise dÃ©carbonÃ©e, notamment pour Ã©viter la dÃ©forestation et rÃ©duire encore plus les Ã©missions, donnant lieu Ã  un rÃ©gime vÃ©gÃ©talien local. Voir [ce papier](https://www.nature.com/articles/s43016-020-0106-x) Ã  ce propos du soja et de la dÃ©forestation.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien . empreinte":{titre:"Empreinte d'un repas vÃ©gÃ©tarien",formule:1.115,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas vÃ©gÃ©tarien 1" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), [actualisÃ© avec les facteurs d'Ã©mission Agribalyse](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424).

> Note : on peut se demander pourquoi la recette fait mention d'une omelette aux oignons sans inclure les oignons. NÃ©gligeables ? Nous les avons ajoutÃ©.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1694091424) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . viande 1 . empreinte":{titre:"Empreinte d'un repas de type viande 1 (poulet, porc, fromage)",formule:2.098,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas classique 1 (avec poulet)" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), actualisÃ© avec les facteurs d'Ã©mission Agribalyse.

Le facteur d'Ã©mission associÃ© Ã  l'ingrÃ©dient principal (ici le la piÃ¨ce de volaille ou porc) correspond Ã  une moyenne de facteurs d'Ã©missions associÃ©s au porc (piÃ¨ce de viande et charcuterie), poulet, dinde, canard d'Agribalyse.
Cette moyenne est pondÃ©rÃ©e selon les consommations rÃ©elles des FranÃ§ais par type de viande animale.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1200865486) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . alimentation . plats . viande 2 . empreinte":{titre:"Empreinte d'un repas de type viande 2 (bÅuf, veau, agneau)",formule:5.51,unitÃ©:"kgCO2e/repas",note:`C'est le "Repas classique 2 (avec bÅuf)" [ici](https://www.bilans-ges.ademe.fr/documentation/UPLOAD_DOC_FR/index.htm?repas.htm), actualisÃ© avec les facteurs d'Ã©mission Agribalyse.

Le facteur d'Ã©mission associÃ© Ã  l'ingrÃ©dient principal (ici le la piÃ¨ce de viande rouge) correspond Ã  une moyenne de facteurs d'Ã©missions associÃ©s au bÅuf, agneau, veau d'Agribalyse.
Cette moyenne est pondÃ©rÃ©e selon les consommations rÃ©elles des FranÃ§ais par type de viande animale.

ð§® Le calcul dÃ©taillÃ© est [disponible ici](https://docs.google.com/spreadsheets/d/1SVYvBaaYDOUDcg5jX0eZFEColnWWIL8PCLMGrPR000o/edit#gid=1200865486) sous forme de tableur.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"alimentation . repas":{titre:"Repas",formule:{somme:["vÃ©gÃ©talien","vÃ©gÃ©tarien","viande 1","viande 2"]}},"alimentation . repas . vÃ©gÃ©talien":{formule:"nombre * nosgestesclimat . alimentation . plats . vÃ©gÃ©talien . empreinte"},"alimentation . repas . vÃ©gÃ©talien . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . vÃ©gÃ©talien . proportion":{formule:{variations:[{si:"proposition = 'vÃ©gÃ©talien'",alors:"100%"},{sinon:"0%"}]}},"alimentation . repas . vÃ©gÃ©tarien":{formule:"nombre * nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien . empreinte"},"alimentation . repas . vÃ©gÃ©tarien . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . vÃ©gÃ©tarien . proportion":{formule:{variations:[{si:"proposition = 'vÃ©gÃ©tarien'",alors:"100%"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . mixte vÃ©gÃ© viande . proportion vÃ©gÃ©tarien"},{sinon:"0%"}]}},"alimentation . repas . viande 1":{formule:"nombre * nosgestesclimat . alimentation . plats . viande 1 . empreinte"},"alimentation . repas . viande 1 . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . viande 1 . proportion":{formule:{variations:[{si:"proposition = 'viande uniquement'",alors:"proposition . choix viande . proportion viande 1"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . choix viande . proportion viande 1 * proposition . mixte vÃ©gÃ© viande . proportion viande"},{sinon:"0%"}]}},"alimentation . repas . viande 2":{formule:"nombre * nosgestesclimat . alimentation . plats . viande 2 . empreinte"},"alimentation . repas . viande 2 . nombre":{formule:"proportion * informations . nombre de repas total"},"alimentation . repas . viande 2 . proportion":{formule:{variations:[{si:"proposition = 'viande uniquement'",alors:"proposition . choix viande . proportion viande 2"},{si:"proposition = 'mixte vÃ©gÃ© viande'",alors:"proposition . choix viande . proportion viande 2 * proposition . mixte vÃ©gÃ© viande . proportion viande"},{sinon:"0%"}]}},"alimentation . repas . proposition":{titre:"RÃ©gime des repas proposÃ©s",question:"Quelle type de rÃ©gime alimentaire prÃ©voyez-vous ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["vÃ©gÃ©talien","vÃ©gÃ©tarien","mixte vÃ©gÃ© viande","viande uniquement"]}},"par dÃ©faut":"'mixte vÃ©gÃ© viande'"},"alimentation . repas . proposition . vÃ©gÃ©talien":{titre:"Uniquement vÃ©gan"},"alimentation . repas . proposition . vÃ©gÃ©tarien":{titre:"Uniquement vÃ©gÃ©tarien"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande":{titre:"Mixte vÃ©gÃ©tarien / viande"},"alimentation . repas . proposition . viande uniquement":{titre:"Uniquement carnÃ©"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande . proportion vÃ©gÃ©tarien":{"applicable si":"proposition = 'mixte vÃ©gÃ© viande'",titre:"Proportion de repas vÃ©gÃ©tariens",question:"Comment allez-vous rÃ©partir les rÃ©gimes proposÃ©s ?",plancher:0,plafond:100,"par dÃ©faut":"50%",unitÃ©:"%"},"alimentation . repas . proposition . mixte vÃ©gÃ© viande . proportion viande":{"applicable si":"proposition = 'mixte vÃ©gÃ© viande'",formule:"100% - proportion vÃ©gÃ©tarien",unitÃ©:"%"},"alimentation . repas . proposition . choix viande":{"applicable si":{"une de ces conditions":["proposition = 'mixte vÃ©gÃ© viande'","proposition = 'viande uniquement'"]},titre:"Choix de viande",question:"Proposerez-vous de la viande blanche ou viande rouge ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["viande 1","viande 2","les deux"]}},"par dÃ©faut":"'les deux'"},"alimentation . repas . proposition . choix viande . viande 1":{titre:"Viande blanche"},"alimentation . repas . proposition . choix viande . viande 2":{titre:"Viande rouge"},"alimentation . repas . proposition . choix viande . les deux":{titre:"Les 2"},"alimentation . repas . proposition . choix viande . proportion viande 1":{formule:{variations:[{si:"choix viande = 'viande 1'",alors:"100%"},{si:"choix viande = 'les deux'",alors:"50%"},{sinon:"0%"}]}},"alimentation . repas . proposition . choix viande . proportion viande 2":{formule:{variations:[{si:"choix viande = 'viande 2'",alors:"100%"},{si:"choix viande = 'les deux'",alors:"50%"},{sinon:"0%"}]}},"commun . intensitÃ© Ã©lectricitÃ©":{titre:"IntensitÃ© carbone du mix Ã©lectrique franÃ§ais",description:`
> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [\`@incubateur-ademe/publicodes-commun\`](https://github.com/incubateur-ademe/publicodes-commun).


IntensitÃ© moyenne, tous types de consommations confondues, annÃ©e 2022.`,formule:.052,unitÃ©:"kgCO2e/kWh",note:`Ici, on parle du mix Ã©lectrique de consommation. 
Le chiffre est issu de la Base Empreinte (ElectricitÃ©/2022 - mix moyen/consommation) dont la mÃ©thodologie est dÃ©crite dans la [documentation](https://prod-basecarbonesolo.ademe-dri.fr/documentation/UPLOAD_DOC_FR/).
La v2.6 de MicMac donnait une valeur de 12.4gCO2e/kWh pour les fournisseurs d'Ã©lectricitÃ© "verte", mais cette valeur semble correspondre Ã  un calcul thÃ©orique sur l'annÃ©e, et non pas Ã  un calcul rÃ©el, minute par minute.
`},"commun . mois par an":{titre:"Nombre de mois par an",formule:12,unitÃ©:"mois",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . semaines par an":{titre:"Nombre de semaines par an",formule:52,unitÃ©:"semaine",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . jours par semaine":{titre:"Nombre de jours par semaine",formule:7,unitÃ©:"jour/semaine",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},"commun . jours par an":{titre:"Nombre de jours par an",formule:365,unitÃ©:"jour",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le [`@incubateur-ademe/publicodes-commun`](https://github.com/incubateur-ademe/publicodes-commun)."},communication:A0,"communication . impressions":{titre:"Impressions",formule:0,unitÃ©:"kgCO2e",note:"A venir"},"communication . merchandising":{titre:"Merchandising",formule:{somme:["textile","plastique"]},unitÃ©:"kgCO2e",note:`Pour cette modÃ©lisation, nous nous inspirons de l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf)
en estimant le chiffre d'affaires rÃ©alisÃ© grÃ¢ce au merchandising rÃ©parti sur diffÃ©rents produits textiles (t-shirts et sweat shirts) 
mais Ã©galement des produits dÃ©rivÃ©s "plastiques".

D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
sur les consommations et les achats des festivaliers, le panier moyen pour du merch est de 4â¬ par jour et par personne.

Dans une V2, il s'agira d'affiner l'empreinte carbone associÃ©e aux produits vendu en passant par des FE "physiques"
et en incluant des variations selon l'approvisionnement des produits.
`},"communication . merchandising . surplus production":{formule:"110%",note:`On estime que 10% le surplus de production.
`},"communication . merchandising . chiffre d affaires":{formule:"informations . nombre de festivaliers * merchandising . panier moyen par jour et par personne",unitÃ©:"â¬",note:`D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
sur les consommations et les achats des festivaliers, le panier moyen pour du merch est de 4â¬ par jour et par personne.
`},"communication . merchandising . chiffre d affaires . part textile":{formule:"70%"},"communication . merchandising . chiffre d affaires . part plastique":{formule:"30%"},"communication . merchandising . panier moyen par jour et par personne":{titre:"Montant du panier moyen d'un festivalier par jour pour le merch.",question:"Quel est le montant du panier moyen d'un festivalier par jour ?","par dÃ©faut":4,unitÃ©:"â¬",note:`D'aprÃ¨s [le baromÃ¨tre 2023 de Weezevent](https://weezevent.com/fr/blog/barometre-festivals-2023/#:~:text=Notons%20que%20le%20prix%20moyen,%E2%82%AC)%20pour%20les%20festivals%20urbains.)
`},"communication . merchandising . textile":{formule:"surplus production * chiffre d affaires . part textile * chiffre d affaires * ratio monÃ©taire",unitÃ©:"kgCO2e"},"communication . merchandising . textile . ratio monÃ©taire":{formule:"ratio monÃ©taire HT / 1.2 â¬/â¬HT",unitÃ©:"kgCO2e/â¬"},"communication . merchandising . textile . ratio monÃ©taire HT":{formule:.6,unitÃ©:"kgCO2e/â¬HT",note:`Facteur d'Ã©mission issu de la base empreinte "Service/Textile et habillement".
`},"communication . merchandising . plastique":{formule:"surplus production * chiffre d affaires . part plastique * chiffre d affaires * ratio monÃ©taire",unitÃ©:"kgCO2e"},"communication . merchandising . plastique . ratio monÃ©taire":{formule:"ratio monÃ©taire HT / 1.2 â¬/â¬HT",unitÃ©:"kgCO2e/â¬"},"communication . merchandising . plastique . ratio monÃ©taire HT":{formule:.8,unitÃ©:"kgCO2e/â¬HT",note:`Facteur d'Ã©mission issu de la base empreinte "Service/Textile et habillement".
`},"communication . numÃ©rique":{titre:"NumÃ©rique",formule:0,unitÃ©:"kgCO2e",note:"A venir"},"nosgestesclimat . divers . textile . t-shirt . empreinte":{formule:5.35,unitÃ©:"kgCO2e",note:"moyenne de l'empreinte des t-shirts en coton et en polyester de la Base Carbone",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"nosgestesclimat . divers . textile . sweat . empreinte":{formule:27.4,unitÃ©:"kgCO2e",note:"empreinte d'un sweat de la Base Carbone",description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"communication . textile bÃ©nÃ©voles":{titre:"Textile bÃ©nÃ©voles",formule:{variations:[{si:'textile bÃ©nÃ©voles . type = "t shirt"',alors:"informations . nombre de bÃ©nÃ©voles * nosgestesclimat . divers . textile . t-shirt . empreinte / amortissement"},{si:'textile bÃ©nÃ©voles . type = "sweat"',alors:"informations . nombre de bÃ©nÃ©voles * nosgestesclimat . divers . textile . sweat . empreinte / amortissement"},{si:'textile bÃ©nÃ©voles . type = "aucun"',alors:0}]},unitÃ©:"kgCO2e"},"communication . textile bÃ©nÃ©voles . type":{titre:"VÃªtements pour les Ã©quipes et bÃ©nÃ©voles",question:"PrÃ©voyez-vous des vÃªtements pour votre Ã©quipe ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["t shirt","sweat","aucun"]}},"par dÃ©faut":"'t shirt'"},"communication . textile bÃ©nÃ©voles . type . t shirt":{titre:"T-shirt"},"communication . textile bÃ©nÃ©voles . type . sweat":{titre:"Sweat"},"communication . textile bÃ©nÃ©voles . type . aucun":{titre:"Non, aucun vÃªtement"},"communication . textile bÃ©nÃ©voles . amortissement":{formule:{variations:[{si:"textile bÃ©nÃ©voles . rÃ©utilisation",alors:2},{sinon:1}]}},"communication . textile bÃ©nÃ©voles . rÃ©utilisation":{titre:"RÃ©utilisation des vÃªtements pour une autre Ã©dition",question:"Est-il prÃ©vu de rÃ©utiliser les vÃªtements pour une autre Ã©dition ?","par dÃ©faut":"non"},"nosgestesclimat . logement . chauffage . gaz . facteur d'Ã©mission base carbone":{titre:"IntensitÃ© carbone gaz naturel",valeur:.221,unitÃ©:"kgCO2e/kWh",note:`Il s'agit de kgCO2e/kWh *PCS*.

On raisonne en PCS (Pouvoir Calorifique SupÃ©rieur) et non en PCI (Pouvoir Calorifique InfÃ©rieur), car le PCS est utilisÃ© en tant que coefficient de conversion dans les factures pour convertir le volume de gaz utilisÃ© en kWh : 
on fait l'hypothÃ¨se que la chaudiÃ¨re gaz rÃ©cupÃ¨re bien la chaleur latente de condensation.

Base Carbone Gaz naturel - 2022/mix moyen/consommation
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},Ã©nergie:{titre:"Ãnergie",icÃ´nes:"â¡ï¸",description:`Cette section concerne la consommation d'**Ã©lectricitÃ©**, de **fioul et gaz** et des **groupes Ã©lectrogÃ¨nes** pour l'Ã©vÃ©nement. 
Les valeurs prÃ©-entrÃ©es sont basÃ©es sur des **consommations moyennes par festivalier** pour ce type d'Ã©vÃ¨nement.

*L'empreinte des groupes Ã©lectrogÃ¨nes est particuliÃ¨rement importante devant celle de l'Ã©lectricitÃ©.*
`,formule:{somme:["Ã©lectricitÃ©","autre","groupes Ã©lectrogÃ¨nes"]},unitÃ©:"kgCO2e"},"Ã©nergie . consommation par dÃ©faut":{formule:"0.6 kWh * informations . nombre de festivaliers",unitÃ©:"kWh",note:`Selon l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf):
il est tout Ã  fait pertinent d'utiliser lâ[Ã©tude dâENERIS](https://www.ressource0.com/wp-content/uploads/2012/09/guideSpectacle-vivant1.pdf) produite en 2011 
qui propose une consommation Ã©lectrique de 0,6 KWh par festivalier en moyenne.
`},"Ã©nergie . Ã©lectricitÃ©":{formule:"consommation * commun . intensitÃ© Ã©lectricitÃ©",unitÃ©:"kgCO2e"},"Ã©nergie . Ã©lectricitÃ© . consommation":{titre:"Consommation d'Ã©lectricitÃ© totale",question:"Quelle est votre consommation d'Ã©lectricitÃ© pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":{variations:[{si:{"toutes ces conditions":["autre prÃ©sent","groupes Ã©lectrogÃ¨nes prÃ©sent"]},alors:"consommation par dÃ©faut / 4"},{si:{"toutes ces conditions":["autre prÃ©sent = non","groupes Ã©lectrogÃ¨nes prÃ©sent"]},alors:"consommation par dÃ©faut / 2"},{sinon:"consommation par dÃ©faut"}]}},"Ã©nergie . autre":{"applicable si":"autre prÃ©sent",formule:{somme:["gaz","fioul"]},unitÃ©:"kgCO2e"},"Ã©nergie . autre prÃ©sent":{titre:"Utilisation d'une autre source d'Ã©nergie",question:"Utilisez-vous une autre source d'Ã©nergie pour l'Ã©vÃ©nement (gaz, fioul) ?","par dÃ©faut":"non"},"Ã©nergie . autre . gaz":{formule:"consommation * nosgestesclimat . logement . chauffage . gaz . facteur d'Ã©mission base carbone",unitÃ©:"kgCO2e"},"Ã©nergie . autre . gaz . consommation":{titre:"Consommation de gaz totale",question:"Quelle est votre consommation de gaz pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":{variations:[{si:"groupes Ã©lectrogÃ¨nes prÃ©sent",alors:"consommation par dÃ©faut / 4"},{sinon:"consommation par dÃ©faut / 2"}]}},"Ã©nergie . autre . fioul":{formule:"consommation * empreinte",unitÃ©:"kgCO2e"},"Ã©nergie . autre . fioul . consommation":{titre:"Consommation de fioul totale",question:"Quelle est votre consommation de fioul pour l'Ã©vÃ©nement ?",plancher:0,unitÃ©:"kWh","par dÃ©faut":"consommation par dÃ©faut / 4"},"Ã©nergie . autre . fioul . empreinte":{formule:.303,unitÃ©:"kgCO2e/kWh",note:`Facteur d'Ã©mission issu de la base empreinte "Fioul domestique" (kgCO2e/kWhPCS).
`},"Ã©nergie . groupes Ã©lectrogÃ¨nes":{"applicable si":"groupes Ã©lectrogÃ¨nes prÃ©sent",formule:"nombre * empreinte par jour * informations . nombre de jours",unitÃ©:"kgCO2e",note:`On fait l'hypothÃ¨se que la puissance d'un groupe Ã©lectrogÃ¨ne utilisÃ© est de 10kW.
On estime qu'un groupe Ã©lectrogÃ¨ne de cette puissance consomme 4l/h.

Dans un second temps, il s'agira de d'Ã©valuer l'empreinte du groupe Ã©lectrogÃ¨ne directement 
via le type de carburant consommÃ© et la consommation rÃ©elle.
`},"Ã©nergie . groupes Ã©lectrogÃ¨nes prÃ©sent":{titre:"Utilisation de groupes Ã©lectrogÃ¨nes",question:"Allez-vous utiliser des groupes Ã©lectrogÃ¨nes pour l'Ã©vÃ©nement ?","par dÃ©faut":"oui"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . nombre":{titre:"Nombre de groupes Ã©lectrogÃ¨nes",question:"Combien de groupes Ã©lectrogÃ¨nes prÃ©voyez-vous d'utiliser ?",plancher:0,"par dÃ©faut":{variations:[{si:"autre prÃ©sent",alors:"consommation par dÃ©faut / 4 / production"},{sinon:"consommation par dÃ©faut / 2 / production"}]}},"Ã©nergie . groupes Ã©lectrogÃ¨nes . production":{formule:"10kW * 24 h/jour * 0.75 * informations . nombre de jours",unitÃ©:"kWh"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . empreinte par jour":{formule:"0.75 * consommation carburant * empreinte carburant * 24 h/jour",note:"On considÃ¨re qu'un groupe Ã©lectrogÃ¨ne est utilisÃ© 75% de la journÃ©e Ã  pleine puissance.",unitÃ©:"kgCO2e/jour"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . consommation carburant":{formule:4,unitÃ©:"l/h"},"Ã©nergie . groupes Ã©lectrogÃ¨nes . empreinte carburant":{formule:2.7,unitÃ©:"kgCO2e/l",note:`Facteur d'Ã©mission issu de la base empreinte "Essence".
`},"hÃ©bergement . artistes":{titre:"HÃ©bergement des artistes","applicable si":"artistes prÃ©sent",formule:"informations . nombre de nuits artistes * nosgestesclimat . logement . vacances . empreinte hotel par nuit",unitÃ©:"kgCO2e"},"hÃ©bergement . artistes prÃ©sent":{titre:"HÃ©bergement des artistes",question:"Prenez-vous en charge l'hÃ©bergement en hÃ´tel des artistes du festival ?","par dÃ©faut":"oui"},"nosgestesclimat . logement . vacances . empreinte hotel par nuit":{formule:6.93,unitÃ©:"kgCO2e/nuit",note:`## Notre hypothÃ¨se sur le facteur d'Ã©mission utilisÃ©

  D'aprÃ¨s [l'enquÃªte mobilitÃ© des franÃ§ais de 2019](https://www.statistiques.developpement-durable.gouv.fr/resultats-detailles-de-lenquete-mobilite-des-personnes-de-2019?rubrique=60&dossier=1345), 
  les franÃ§ais voyagent Ã  86% en France. On assume donc ici que **les nuitÃ©es se passent en France**.

## Notre source de donnÃ©es

  Le rapport final de prÃ©-dÃ©ploiement de l'affichage environnemental des hÃ´tels, [publication ADEME de mars 2020](https://librairie.ademe.fr/consommer-autrement/4096-projet-de-pre-deploiement-de-l-affichage-environnemental-des-hotels.html), donne une moyenne de 9,91 kg Ã©qCO2 / nuitÃ©e. 
  En retranchant la partie petit-dÃ©jeuner (comptant pour 30% de l'empreinte), car sinon nous aurions une double comptabilitÃ© de ces derniers, on se retrouve avec une empreinte par nuitÃ©e de 9,91 * (1 - 30%) = 6,93 kg Ã©qCO2.

  Le rapport permet Ã©galement de scinder les empreintes selon la classe de l'hÃ´tel. Pour dÃ©marrer, nous avons assumÃ© de partir sur la moyenne des empreintes toutes classes confondues, mais cela pourra Ãªtre implÃ©mentÃ© par la suite. Cela donnerait :

  - HÃ´tels sans classement : 4,73 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 2* : 8,53 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 3* : 8,47 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 4* : 11,43 kg Ã©qCO2 / nuitÃ©e
  - HÃ´tels 5* : 17,11 kg Ã©qCO2 / nuitÃ©e

  Depuis plusieurs annÃ©es, [Betterfly Tourism](https://www.betterfly-tourism.com/affichage-environnemental-hotels/) implÃ©mente en partenariat avec l'ADEME l'affichage environnemental auprÃ¨s des hÃ´tels. Il sera donc possible de rÃ©Ã©valuer l'empreinte avec des donnÃ©es plus rÃ©centes issues de leur base de donnÃ©es consolidÃ©e.

  De son cÃ´tÃ©, le [Hotel Carbon Measurement Initiative (HCMI)](https://sustainablehospitalityalliance.org/resource/hotel-carbon-measurement-initiative/) qui alimente le [Cornell Hotel Sustainability Benchmarking Index](https://greenview.sg/services/chsb-index/) prÃ©sente des [donnÃ©es](https://ecommons.cornell.edu/handle/1813/109990) pertinentes pour notre usage.
  Cela pourra Ãªtre un bon point de dÃ©part pour le jour oÃ¹ nous souhaiterons diffÃ©rencier les nuitÃ©es d'hÃ´tel selon le pays frÃ©quentÃ©.
  Ã noter que le HCMI donne une moyenne pour la France de 7,7 kg Ã©qCO2 / nuitÃ©e, ce qui est trÃ¨s proche de la donnÃ©e que nous avons choisie, elle calculÃ©e Ã  partir du rÃ©fÃ©rentiel ADEME.

  > Point publicodes : Cette rÃ¨gle Ã©tant utilisÃ©e dans d'autres espaces nom que \`logement . vacances . hotel\` c'est important ici de ne pas l'inclure dans cet espace non qui rendrait l'empreinte de la nuitÃ©e non applicable si la rÃ¨gle hotel est elle aussi non applicable.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"hÃ©bergement . bÃ©nÃ©voles":{titre:"HÃ©bergement des bÃ©nÃ©voles",formule:{variations:[{si:'type = "camping"',alors:"nombre de nuits hÃ´tel * nosgestesclimat . logement . vacances . empreinte hotel par nuit"},{si:'type = "hÃ´tel"',alors:"nombre de nuits hÃ´tel * nosgestesclimat . logement . vacances . empreinte hotel par nuit"},{sinon:0}]},unitÃ©:"kgCO2e"},"hÃ©bergement . bÃ©nÃ©voles . type":{titre:"HÃ©bergement des bÃ©nÃ©voles",question:"Prenez-vous en charge l'hÃ©bergement en hÃ´tel des organisateurs et bÃ©nÃ©voles du festival ?",formule:{"une possibilitÃ©":{"choix obligatoire":"oui",possibilitÃ©s:["camping","hÃ´tel","aucun"]}},"par dÃ©faut":"'aucun'"},"hÃ©bergement . bÃ©nÃ©voles . type . camping":{titre:"Oui, en camping"},"hÃ©bergement . bÃ©nÃ©voles . type . hÃ´tel":{titre:"Oui, en hÃ´tel"},"hÃ©bergement . bÃ©nÃ©voles . type . aucun":{titre:"Non"},"hÃ©bergement . bÃ©nÃ©voles . nombre de nuits hÃ´tel":{formule:"informations . nombre de bÃ©nÃ©voles * informations . nombre de nuits",unitÃ©:"nuit"},hÃ©bergement:{titre:"HÃ©bergement",icÃ´nes:"âºï¸",description:`Ce poste d'Ã©mission inclut l'impact de l'hÃ©bergement des festivaliers, des bÃ©nÃ©voles et des artistes.
*La part des festivaliers qui dorment sur place impacte directement le nombre de **dÃ©placements** du public.*
`,formule:{somme:["bÃ©nÃ©voles","public","artistes"]},unitÃ©:"kgCO2e",note:`Pour le moment, on ne prend en compte que les nuitÃ©es en hÃ´tel en considÃ©rant que le nombre de nuits 
correspond au nombre de jours de l'Ã©vÃ¨nement.
Dans un second temps, on pourrait ajouter le camping par exemple. 
On pourrait Ã©galement ajouter la possibilitÃ© de renseigner le nombre de nuitÃ©es prises en charge durant l'Ã©vÃ¨nement.
`},"nosgestesclimat . logement . vacances . camping . empreinte par nuit":{formule:1.4,unitÃ©:"kgCO2e/nuit",note:`Ces donnÃ©es sont issues de la proposition de rÃ©fÃ©rentiel ADEME pour l'hÃ´tellerie de plein air, Ã©tude effectuÃ©e sur 13 campings de l'HÃ©rault conjointement entre Betterfly Tourism et l'ADEME.
Les donnÃ©es sont fournies par Betterfly Tourism et datent de juin 2021. La moyenne de l'empreinte par nuitÃ©e sur les 13 campings Ã©tudiÃ©s est de 1,4 kg Ã©qCO2.
Le rÃ©fÃ©rentiel ADEME est prÃ©sent dans la base Impacts depuis mai 2023.
`,description:"> â¹ï¸ Cette rÃ¨gle provient du modÃ¨le `@incubateur-ademe/nosgestesclimat`."},"hÃ©bergement . public":{"applicable si":"public prÃ©sent",formule:"nombre de nuits camping * nosgestesclimat . logement . vacances . camping . empreinte par nuit",unitÃ©:"kgCO2e",note:"On considÃ¨re que l'hÃ©bergement se fait en camping."},"hÃ©bergement . public prÃ©sent":{titre:"HÃ©bergement des festivaliers en camping",question:"Prenez-vous en charge l'hÃ©bergement en camping des participants du festival ?","par dÃ©faut":"oui"},"hÃ©bergement . public . nombre de nuits camping":{formule:"nombre de festivaliers hÃ©bergÃ©s * informations . nombre de nuits",unitÃ©:"nuit"},"hÃ©bergement . public . nombre de festivaliers hÃ©bergÃ©s":{formule:"part * informations . nombre de festivaliers"},"hÃ©bergement . public . nombre de festivaliers journÃ©e":{formule:"(100% - part) * informations . nombre de festivaliers"},"hÃ©bergement . public . part":{titre:"Part des festivaliers qui dorment sur place",question:"Quelle part des festivaliers dorment sur place ?","par dÃ©faut":30,plancher:0,plafond:100,unitÃ©:"%"},informations:P0,"informations . nombre de jours":{titre:"DurÃ©e de l'Ã©vÃ¨nement",question:"Combien de jours dure votre Ã©vÃ¨nment ?",description:"Compter 1 jour pour une soirÃ©e.","par dÃ©faut":2,plancher:0,unitÃ©:"jour"},"informations . nombre de nuits":{formule:"informations . nombre de jours * 1 nuit/jour",unitÃ©:"nuit"},"informations . nombre de festivaliers":{titre:"Nombre de festivaliers",description:"Compter 2 si une mÃªme personne vient 2 jours.",question:"Combien de participants attendez-vous sur l'ensemble de l'Ã©vÃ¨nements (compter 2 entrÃ©es si une personne est prÃ©sente 2 jours) ?",plancher:0,note:"On parle de la somme des entrÃ©es uniques par jour.","par dÃ©faut":25e3},"informations . nombre de festivaliers par jour":{formule:"nombre de festivaliers / nombre de jours"},"informations . nombre de bÃ©nÃ©voles":{titre:"Nombre d'organisateurs et bÃ©nÃ©voles",question:"Combien y aura-t-il d'organisateurs et bÃ©nÃ©voles ?",plancher:0,"par dÃ©faut":100},"informations . nombre de personnes par jour":{formule:"nombre de festivaliers par jour + nombre de bÃ©nÃ©voles"},"informations . nombre de repas par jour":{formule:"2 repas * nombre de personnes par jour"},"informations . nombre de repas total":{formule:"nombre de repas par jour * nombre de jours"},"informations . nombre artistes en voiture":{titre:"Nombre d'artistes (Ã©quipe incluse) en voiture",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes en train":{titre:"Nombre d'artistes (Ã©quipe incluse) en train",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes en tour bus":{titre:"Nombre d'artistes (Ã©quipe incluse) en tour bus",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":30},"informations . nombre artistes en avion":{titre:"Nombre d'artistes (Ã©quipe incluse) en avion",question:"Combien d'artistes (Ã©quipe incluse) seront prÃ©sents sur le festival ?",plancher:0,"par dÃ©faut":10},"informations . nombre artistes":{formule:{somme:["nombre artistes en voiture","nombre artistes en train","nombre artistes en tour bus","nombre artistes en avion"]}},"informations . nombre de nuits artistes":{formule:"nombre artistes * 1 nuit",unitÃ©:"nuit"},"informations . scÃ¨nes":null,"informations . scÃ¨nes . nombre petites scÃ¨nes":{titre:"Nombre de petites scÃ¨nes",question:"Quel est le nombre de petites scÃ¨nes prÃ©vus pour l'Ã©vÃ©nement ?",plancher:0,"par dÃ©faut":2,unitÃ©:"scÃ¨ne"},"informations . scÃ¨nes . nombre grandes scÃ¨nes":{titre:"Nombre de grandes scÃ¨nes",question:"Quel est le nombre de grandes scÃ¨nes prÃ©vues pour l'Ã©vÃ©nement ?",plancher:0,"par dÃ©faut":2,unitÃ©:"scÃ¨ne"},bÃ¢timents:{titre:"BÃ¢timents",formule:{somme:["bÃ©ton","mÃ©tallique","temporaire"]},unitÃ©:"kgCO2e"},"bÃ¢timents . facteur amortissement":{formule:"informations . nombre de jours / (commun . jours par an * 50)",note:`BÃ¢timents amortis sur 50 ans. On fait l'hypothÃ¨se que le bÃ¢timent reste "non amorti" 
mÃªme s'il date de plus de 50 ans pour limiter les paramÃ¨tres, au vu de l'impact nÃ©gligeable.
`},"bÃ¢timents . bÃ©ton":{formule:"surface * empreinte par m2 * facteur amortissement",unitÃ©:"kgCO2e"},"bÃ¢timents . bÃ©ton . surface":{titre:"Surface des bÃ¢timents bÃ©ton",question:`Quelle est la surface des bÃ¢timents "structure bÃ©ton" utilisÃ©s pour l'Ã©vÃ©nement ?`,plancher:0,"par dÃ©faut":0,unitÃ©:"m2"},"bÃ¢timents . bÃ©ton . empreinte par m2":{formule:825,unitÃ©:"kgCO2e/m2",note:`Facteur d'Ã©mission issu de la base empreinte "BÃ¢timent industriel/structure en bÃ©ton".
`},"bÃ¢timents . mÃ©tallique":{formule:"surface * empreinte par m2 * facteur amortissement",unitÃ©:"kgCO2e"},"bÃ¢timents . mÃ©tallique . surface":{titre:"Surface des bÃ¢timents structure mÃ©tallique",question:`Quelle est la surface des bÃ¢timents "structure mÃ©tallique" utilisÃ©s pour l'Ã©vÃ©nement ?`,plancher:0,"par dÃ©faut":500,unitÃ©:"m2"},"bÃ¢timents . mÃ©tallique . empreinte par m2":{formule:275,unitÃ©:"kgCO2e/m2",note:`Facteur d'Ã©mission issu de la base empreinte "BÃ¢timent industriel/structure mÃ©tallique".
`},"bÃ¢timents . temporaire":{titre:"Barnums",formule:0,unitÃ©:"kgCO2e",note:"A venir"},infrastructures:V0,"infrastructures . scÃ©nographie":{titre:"ScÃ©nographie",formule:{somme:["fret","matÃ©riel","dÃ©cor"]},unitÃ©:"kgCO2e"},"infrastructures . scÃ©nographie . fret":{formule:"tonnes km total * empreinte par tonnes km",note:`On considÃ¨re que l'empreinte des scÃ¨nes rÃ©side dans le fret.

Selon l'Ã©tude [DÃ©carbonons la Culture ! The Shift Project](https://theshiftproject.org/wp-content/uploads/2021/12/211130-TSP-PTEF-Rapport-final-Culture-v3.pdf),
Le seul montage des scÃ¨nes dâun festival comme Les Vieilles Charrues implique une quarantaine de semi-remorques pour 4 scÃ¨nes (voir [cet artcle de France Info](https://france3-regions.francetvinfo.fr/bretagne/2013/07/18/l-antiseche-pour-etre-incollable-sur-les-vieilles-charrues-289717.html)).

NÃ©anmoins, il est fait l'hypothÃ¨se de partir sur une moyenne de 7 semi-remorques pour une grande scÃ¨ne, 3 pour une plus petite.

Comme expliquÃ© dans l'Ã©tude "DÃ©carbonons la Culture !", ces donnÃ©es sont celles des Vieilles Charrues, 
Par ailleurs, on ne sait pas si cette donnÃ©e inclut la logistique alimentaire.

Pour cette premiÃ¨re estimation, il est considÃ©rÃ© que le tonnage transportÃ© est en moyenne Ã  8,5 tonnes sur 1500km (A/R)
`,unitÃ©:"kgCO2e"},"infrastructures . scÃ©nographie . fret . nombre de camion par petite scÃ¨ne":{formule:3,unitÃ©:"camion/scÃ¨ne",note:`Nombre de camions nÃ©cessaires pour le transport d'une petite scÃ¨ne.
`},"infrastructures . scÃ©nographie . fret . nombre de camion par grande scÃ¨ne":{formule:7,unitÃ©:"camion/scÃ¨ne",note:`Nombre de camions nÃ©cessaires pour le transport d'une grande scÃ¨ne.
`},"infrastructures . scÃ©nographie . fret . empreinte par tonnes km":{formule:.0823,unitÃ©:"kgCO2e/t.km",note:`Facteur d'Ã©mission issu de la base empreinte "ArticulÃ©/< 34 tonnes/Diesel routier, incorporation 7 % de biodiesel".
`},"infrastructures . scÃ©nographie . fret . tonnes km total":{formule:{somme:["informations . scÃ¨nes . nombre petites scÃ¨nes * fret . nombre de camion par petite scÃ¨ne * tonnes km par camion","informations . scÃ¨nes . nombre grandes scÃ¨nes * fret . nombre de camion par grande scÃ¨ne * tonnes km par camion"]},unitÃ©:"t.km"},"infrastructures . scÃ©nographie . fret . tonnes km par camion":{formule:"charge moyenne * distance moyenne",unitÃ©:"t.km/camion"},"infrastructures . scÃ©nographie . fret . distance moyenne":{formule:1500,unitÃ©:"km",note:`Distance moyenne parcourue par les semi-remorques pour le transport du matÃ©riel de scÃ¨ne en incluant le retour Ã  vide.
`},"infrastructures . scÃ©nographie . fret . charge moyenne":{formule:8.5,unitÃ©:"t/camion",note:`Charge moyenne des semi-remorques pour le transport du matÃ©riel de scÃ¨ne.
`},"infrastructures . scÃ©nographie . matÃ©riel":{formule:"dÃ©penses * ratio monÃ©taire * facteur amortissement",unitÃ©:"kgCO2e",note:`Selon la mÃ©thode du simulateur [SEEDS](https://nuage.arviva.org/index.php/s/Pzzm9KbAwwL4gPR), 
les Ã©missions de CO2 liÃ©es Ã  la location de matÃ©riel technique sont estimÃ©es Ã  partir du montant 
dÃ©pensÃ©s pour leur location puis amorties sur via la durÃ©e de location et leur durÃ©e de vie.

A titre indicatif:
  - Projecteur : 600â¬ soit 240kgCO2e  
  - Enceinte : 500â¬ soit 200kgCO2e 
  - Console : 1500â¬ soit 600kgCO2e 
  - Machine Ã  fumÃ©e : 400â¬ soit 160kgCO2e  
  - Micros : 200â¬ soit 80kgCO2e  
  - VidÃ©oprojecteur : 145kgCO2e (dÃ©jÃ  prÃ©sent dans la base ADEME)
`},"infrastructures . scÃ©nographie . matÃ©riel . facteur amortissement":{formule:"informations . nombre de jours / (commun . jours par an * 5)",note:"MatÃ©riel amorti sur 5 ans."},"infrastructures . scÃ©nographie . matÃ©riel . dÃ©penses":{titre:"DÃ©penses pour la location de matÃ©riel de scÃ©nographie",question:"A combien estimez-vous vos dÃ©penses de location de matÃ©riel technique (scÃ¨ne, son, lumiÃ¨re, vidÃ©o etc...) ?",plancher:0,"par dÃ©faut":1e7,unitÃ©:"â¬HT"},"infrastructures . scÃ©nographie . matÃ©riel . ratio monÃ©taire":{formule:.4,unitÃ©:"kgCO2e/â¬HT",note:`Ratio monÃ©taire issu de la Base Empreinte "Service/Produits informatiques, Ã©lectroniques et optiques".
`},"infrastructures . scÃ©nographie . dÃ©cor":{"applicable si":"dÃ©cor prÃ©sent",formule:0,unitÃ©:"kgCO2e",note:`Pour le moment, nous faisons l'hypothÃ¨se que les dÃ©cors et costumes sont de la responsabilitÃ© des artistes.
`},"infrastructures . scÃ©nographie . dÃ©cor prÃ©sent":{"par dÃ©faut":"non"},"infrastructures . toilettes":{formule:0,unitÃ©:"kgCO2e",note:"A venir"},resultats:S0,"resultats . bilan total":{titre:"Bilan Carbone de mon Ã©vÃ¨nement",formule:{somme:["alimentation","transport","infrastructures","hÃ©bergement","Ã©nergie","communication"]},unitÃ©:"kgCO2e"},"resultats . bilan par festivalier":{titre:"Bilan Carbone par festivalier et par jour",formule:"bilan total / informations . nombre de festivaliers",unitÃ©:"kgCO2e"},"transport . artistes":{titre:"Transport des artistes",formule:{somme:["voiture","avion","train","tour bus"]},unitÃ©:"kgCO2e"},"transport . artistes . voiture":{"applicable si":"informations . nombre artistes en voiture > 0",formule:"informations . nombre artistes en train * distance * voiture . empreinte par km / voiture . remplissage moyen",unitÃ©:"kgCO2e"},"transport . artistes . voiture . distance":{titre:"Distance moyenne parcourue par les artistes en voiture",question:"Quelle est la distance (A/R) parcourue en voiture en moyenne par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":100,unitÃ©:"km"},"transport . artistes . avion":{"applicable si":"informations . nombre artistes en avion > 0",formule:"informations . nombre artistes en avion * distance * avion . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . avion . distance":{titre:"Distance moyenne parcourue par les artistes en avion",question:"Quelle est la distance (A/R) parcourue en avion en moyenne par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":1500,unitÃ©:"km"},"transport . artistes . train":{"applicable si":"informations . nombre artistes en train > 0",formule:"informations . nombre artistes en train * distance * train . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . train . distance":{titre:"Distance moyenne parcourue par les artistes en train",question:"Quelle est la distance en moyenne (A/R) parcourue en train par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":500,unitÃ©:"km"},"transport . artistes . tour bus":{"applicable si":"informations . nombre artistes en tour bus > 0",formule:"informations . nombre artistes en tour bus * distance * tour bus . empreinte par km",unitÃ©:"kgCO2e"},"transport . artistes . tour bus . distance":{titre:"Distance moyenne parcourue par les artistes en tour bus",question:"Quelle est la distance en moyenne (A/R) parcourue en tour bus par les artistes pour venir au festival ?",plancher:0,"par dÃ©faut":1e3,unitÃ©:"km"},"transport . public":{titre:"Transport du public",formule:{somme:["voiture","avion","train","commun"]},unitÃ©:"kgCO2e"},"transport . public . accessible en transports en commun":{titre:"AccessibilitÃ© en transports en commun",question:"Votre festival est-il facilement accessible en transport en commun ?","par dÃ©faut":"non"},"transport . public . nombre de dÃ©placements":{formule:{somme:["festivaliers","bÃ©nÃ©voles"]},note:`On considÃ¨re ici les festivaliers mais aussi les Ã©quipes d'organisation et les bÃ©nÃ©voles.
`},"transport . public . nombre de dÃ©placements . festivaliers":{formule:{variations:[{si:"hÃ©bergement . public prÃ©sent",alors:"hÃ©bergement . public . nombre de festivaliers journÃ©e + hÃ©bergement . public . nombre de festivaliers hÃ©bergÃ©s / informations . nombre de jours * 1 jour"},{sinon:"informations . nombre de festivaliers"}]}},"transport . public . nombre de dÃ©placements . bÃ©nÃ©voles":{formule:{variations:[{si:'hÃ©bergement . bÃ©nÃ©voles . type = "aucun"',alors:"informations . nombre de bÃ©nÃ©voles * informations . nombre de jours / 1 jour"},{sinon:"informations . nombre de bÃ©nÃ©voles"}]}},"transport . public . distance AR":{titre:"Distance moyenne aller/retour parcourue par un festivalier (hors avion)",question:"Quelle est la distane moyenne aller/retour parcourue par un festivalier ?",unitÃ©:"km",plancher:0,"par dÃ©faut":100,note:"On inclut ici les festivaliers mais Ã©galement les bÃ©nÃ©voles et les organisateurs."},"transport . public . part mobilitÃ© douce":{formule:"100% - parts totales modes de transport",unitÃ©:"%",note:"On considÃ¨re que l'impact de la marche ou du vÃ©lo est nÃ©gligeable."},"transport . public . parts totales modes de transport":{formule:{somme:["voiture . part","avion . part","train . part","commun . part"]},plafond:100,unitÃ©:"%"},"transport . public . voiture . part":{titre:"Part des festivaliers venant en voiture",question:"Quelle part des festivaliers viennent en voiture ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"20%"},{sinon:"80%"}]}},"transport . public . avion . part":{titre:"Part des festivaliers venant en avion",question:"Quelle part des festivaliers viennent en avion ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"3%"},{sinon:"3%"}]}},"transport . public . train . part":{titre:"Part des festivaliers venant en train",question:"Quelle part des festivaliers viennent en train ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"20%"},{sinon:"10%"}]}},"transport . public . commun . part":{titre:"Part des festivaliers venant en transports en commun",question:"Quelle part des festivaliers viennent en transports en commun (bus, tramway, mÃ©tro) ?",plancher:0,plafond:100,unitÃ©:"%","par dÃ©faut":{variations:[{si:"accessible en transports en commun",alors:"50%"},{sinon:"5%"}]}},"transport . public . voiture":{formule:"part * nombre de dÃ©placements * distance AR * voiture . empreinte par km / voiture . remplissage moyen",unitÃ©:"kgCO2e",note:"On fait l'hypothÃ¨se d'un aller/retour par festivalier."},"transport . public . avion":{formule:"part * nombre de dÃ©placements * distance avion AR * avion . empreinte par km",unitÃ©:"kgCO2e"},"transport . public . avion . distance avion AR":{formule:1500,unitÃ©:"km"},"transport . public . train":{formule:"part * nombre de dÃ©placements * distance AR * train . empreinte par km",unitÃ©:"kgCO2e"},"transport . public . commun":{formule:"part * nombre de dÃ©placements * distance AR * commun . empreinte par km",unitÃ©:"kgCO2e"},transport:I0,"transport . voiture":null,"transport . voiture . empreinte par km":{formule:.231,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Voiture/Motorisation moyenne/2018".
`},"transport . voiture . remplissage moyen":{formule:1.8,note:"On considÃ¨re un taux de remplissage moyen de 1,8 personnes par voiture."},"transport . avion":null,"transport . avion . empreinte par km":{formule:.187,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Avion passagers/Moyen courrier, 2018/AVEC trainÃ©es".
`},"transport . train":null,"transport . train . empreinte par km":{formule:{moyenne:["TGV","TER"]},unitÃ©:"kgCO2e/km",note:`Moyenne entre TGV et TER.
`},"transport . train . empreinte par km . TGV":{formule:.00293,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "TGV/2022".
`},"transport . train . empreinte par km . TER":{formule:.0277,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "TER/2022/Traction moyenne".
`},"transport . commun . empreinte par km":{formule:{moyenne:["bus","mÃ©tro ou tram"]},unitÃ©:"kgCO2e/km"},"transport . commun . empreinte par km . bus":{formule:.146,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Autobus moyen/AgglomÃ©ration de 100 000 Ã  250 000 habitants".
`},"transport . commun . empreinte par km . mÃ©tro ou tram":{formule:.00503,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "MÃ©tro, tramway, trolleybus/2018/AgglomÃ©ration de 100 000 Ã  250 000 habitants".
`},"transport . tour bus":null,"transport . tour bus . empreinte par km":{formule:.0295,unitÃ©:"kgCO2e/km",note:`Facteur d'Ã©mission issu de la base empreinte "Autocar/2018".
`},nosgestesclimat:q0,"nosgestesclimat . alimentation . boisson":null,"nosgestesclimat . alimentation":null,"nosgestesclimat . alimentation . boisson . sucrÃ©es":null,"nosgestesclimat . alimentation . boisson . alcool":null,"nosgestesclimat . alimentation . boisson . eau en bouteille":null,"nosgestesclimat . alimentation . petit dÃ©jeuner":null,"nosgestesclimat . alimentation . plats . vÃ©gÃ©talien":null,"nosgestesclimat . alimentation . plats":null,"nosgestesclimat . alimentation . plats . vÃ©gÃ©tarien":null,"nosgestesclimat . alimentation . plats . viande 1":null,"nosgestesclimat . alimentation . plats . viande 2":null,commun:N0,"nosgestesclimat . divers . textile . t-shirt":null,"nosgestesclimat . divers . textile":null,"nosgestesclimat . divers":null,"nosgestesclimat . divers . textile . sweat":null,"nosgestesclimat . logement . chauffage . gaz":null,"nosgestesclimat . logement . chauffage":null,"nosgestesclimat . logement":null,"nosgestesclimat . logement . vacances":null,"nosgestesclimat . logement . vacances . camping":null},R0={categories:{informations:{index:0,sub:[]},alimentation:{index:1,sub:["alimentation . repas","alimentation . petits dÃ©jeuners","alimentation . boissons","alimentation . ecocups","alimentation . dÃ©chets","alimentation . artistes"]},transport:{index:2,sub:["transport . public","transport . artistes"]},infrastructures:{index:3,sub:["infrastructures . bÃ¢timents","infrastructures . scÃ©nographie"]},hÃ©bergement:{index:4,sub:["hÃ©bergement . bÃ©nÃ©voles","hÃ©bergement . public","hÃ©bergement . artistes"]},Ã©nergie:{index:5,sub:["Ã©nergie . Ã©lectricitÃ©","Ã©nergie . autre","Ã©nergie . groupes Ã©lectrogÃ¨nes"]},communication:{index:6,sub:["communication . merchandising","communication . textile bÃ©nÃ©voles"]}},questions:{informations:[["informations . nombre de jours","informations . nombre de festivaliers","informations . nombre de bÃ©nÃ©voles","informations . scÃ¨nes . nombre petites scÃ¨nes","informations . scÃ¨nes . nombre grandes scÃ¨nes"],["informations . nombre artistes en voiture","informations . nombre artistes en train","informations . nombre artistes en tour bus","informations . nombre artistes en avion"]],alimentation:[["alimentation . repas . proposition","alimentation . repas . proposition . choix viande","alimentation . repas . proposition . mixte vÃ©gÃ© viande . proportion vÃ©gÃ©tarien","alimentation . petits dÃ©jeuners prÃ©sent"],["alimentation . boissons . froide . eau en bouteille bÃ©nÃ©voles prÃ©sent","alimentation . boissons . froide . alcool . quantitÃ© par jour et par personne","alimentation . boissons . froide . soft . quantitÃ© par jour et par personne","alimentation . artistes . eau en bouteille prÃ©sent","alimentation . boissons . chaude . cafÃ© . quantitÃ© par jour et par personne","alimentation . boissons . chaude . thÃ© . quantitÃ© par jour et par personne"],["alimentation . ecocups prÃ©sent","alimentation . ecocups . rÃ©utilisation"],["alimentation . dÃ©chets . recyclage","alimentation . dÃ©chets . gobelets . type","alimentation . dÃ©chets . assiettes . type","alimentation . dÃ©chets . couverts . type"]],communication:[["communication . textile bÃ©nÃ©voles . type","communication . textile bÃ©nÃ©voles . rÃ©utilisation"],["communication . merchandising . panier moyen par jour et par personne"]],hÃ©bergement:[["hÃ©bergement . public prÃ©sent","hÃ©bergement . public . part"],["hÃ©bergement . bÃ©nÃ©voles . type","hÃ©bergement . artistes prÃ©sent"]],infrastructures:[["infrastructures . scÃ©nographie . matÃ©riel . dÃ©penses"]],transport:[["transport . public . accessible en transports en commun","transport . public . distance AR","transport . public . voiture . part","transport . public . train . part","transport . public . commun . part","transport . public . avion . part"],["transport . artistes . voiture . distance","transport . artistes . train . distance","transport . artistes . tour bus . distance","transport . artistes . avion . distance"]],Ã©nergie:[["Ã©nergie . Ã©lectricitÃ© . consommation"],["Ã©nergie . groupes Ã©lectrogÃ¨nes prÃ©sent","Ã©nergie . groupes Ã©lectrogÃ¨nes . nombre"],["Ã©nergie . autre prÃ©sent","Ã©nergie . autre . fioul . consommation","Ã©nergie . autre . gaz . consommation"]]}},T0=JSON.parse(localStorage.getItem("situation")??"{}");let Si=ah.Main.init({flags:{rules:jl,ui:R0,situation:T0},node:document.getElementById("elm-app")});const El=new M0(jl,Si);Si.ports.setSituation.subscribe(e=>{El.setSituation(e),localStorage.setItem("situation",JSON.stringify(e))});Si.ports.evaluateAll.subscribe(e=>{El.evaluateAll(e)});
